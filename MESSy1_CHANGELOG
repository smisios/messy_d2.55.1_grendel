******************************************************************************
**                          ECHAM5/MESSy history                            **
******************************************************************************

******************************************************************************

WARNINGS about the latest version are in the file WARNINGS!

******************************************************************************

echam5.3.01_messy_1.11 (05 Apr 2011)

CHANGES by Patrick Joeckel:
- WARNINGS updated

CHANGES by Volker Grewe:
- PRODLOSS: new tool to generate diagtrac.tex files for family based
  production/loss budgeting in MECCA1/KPP1

******************************************************************************

echam5.3.01_messy_1.10f (17 Mar 2011)

CHANGES by Patrick Joeckel:
- xmessy: bug fix (O3ORIG)

Changes by Klaus-Dirk Gottschaldt & Holger Tost:
- SCAV: - alternative HNO3 - Ice trapping and some diagnostics added

CHANGES by Holger Tost:
- SCAV, GMXE, ISORROPIA boxmodels updated / repaired
- SCAV: update
- GMXE: update
- ONLEM: OC and BC emissions modified / expanded
- GMXE update / re-implementation
- SCAV: updates
- SATSIMS: new submodel (ISCCP simulator)
- RAD4ALL: additional diagnostic channel objects (for SATSIMS)
- AEROPT: new submodel (aerosol optical properties)
- messy_cmn_gasaq.f90: update for pseudo soil solubility / dryreactivity for
  drydep
- messy_cmn_aqattr.f90: updates

******************************************************************************

echam5.3.01_messy_1.10e (04 Mar 2011)

Changes by Rudolf Deckert:
- PSC: bug-fixes for QCTM mode

CHANGES by Patrick Joeckel:
- WARNINGS: updated
- MLOCEAN, messy_main_control_e5.f90: reduced to one entry point named
  messy_mixlo (calling mlocean_mixlo) in order to avoid naming conflicts
  with module messy_mlocean and subroutine mlocean_mlo

CAHNGES by Markus Kunze:
- MLOCEAN: new submodel
- changes necessary to implement submodel MLOCEAN
  - sicetemp.f90
    - added pre-processor directives
    - USE messy_main_switch, ONLY: USE_MLOCEAN
    - IF(USE_MLOCEAN) calculate sea ice temperature within submodel.
  - gpc.f90
    - added pre-processor directives;
    - USE messy_main_switch, ONLY: USE_MLOCEAN
    - IF (.NOT.USE_MLOCEAN) CALL clsst
  - physc.f90
    - added interface to MESSy submodel MLOCEAN: CALL messy_mlocean
    - USED from messy_main_data_bi: evapi, cvsi, ahfsw, ahfsi
    - zevapi declared as POINTER to evapi
    - zcvsi declared as POINTER to cvsi
    - zhfsw declared as POINTER to ahfsw
    - zhfsi declared as POINTER to ahfsi
    - zhflw declared as POINTER to ahflw (used from mo_memory_g3b)
    - zhfli declared as POINTER to ahfli (used from mo_memory_g3b)
  - mo_sst.f90
    - added: USE messy_main_switch, ONLY: USE_MLOCEAN
    - lmlo (ECHAM5 style) and USE_MLOCEAN (MESSy style) can be used
      alternatively.
  - messy_main_bmluse_bi.f90
    - added:
    - use nmw1, nmw2 from mo_interpo.f90
    - USE mo_sst,  ONLY: sst, aice
  - messy_main_data_bi.f90
    - use additional variables from mo_memory_g3b:
      ahfice, ahfli, ahflw, ahfres, ahfcon,
      amlcorr, amlcorac, amlheatac,
      fluxres, friac, qres,
      siced, soflw, sofli, trflw, trfli
    - added additional 2-dimensional POINTERS:
      ahfsw, ahfsi, cvsi, evapi, fsnet
    - added additional elements to messy stream:
      ahfsi, ahfsw, evapi, cvsi, fsnet
    - added as reference from g3b stream to messy stream:
      tsw, siced, fluxres, ahfli, ahflw, trfli, trflw,
      soflw, sofli, ahfice, amlcorr, qres
  - messy_main_constants_mem.f90
    - added additional parameters:
      M_O2, rho_sea, alv, als, clw, csw, ctfreez

CHANGES by Simone Dietmueller/ Michael Ponater:
- ml_ocean.f90
  - code for ECHAM5 mixed layer ocean included
- mo_sst.f90
  - check order of the latitudes and turn if necessary
- xmessy:
  - added switch USE_MLO
  - USE_MLO is used to initialise LMLO which is passed to the
    &RUNCTL namelist of ECHAM5.nml

******************************************************************************

echam5.3.01_messy_1.10d (02 Feb 2011)

CHANGES by Patrick Joeckel:
- libsrc/isorropia/Makefile: bug-fix (Fortran77 !)

Changes by Holger Tost:
- config/mh-aix: some additional options
- libsrc/isorropia: new library for aerosol thermodynamics model
- configure.in (condifure): libsrc/isorropia added
- GM7 and EQSAM deleted
- GMXE: new submodel
- MECCA1: aqueous.spc: new diagnostic species added
- messy_cmn_aqattr.f90, messy_cmn_gasaq.f90: new "common" modules for
  aqueous phase species definitions
- messy_main_constants_mem.f90: HUGE_DP, STRLEN_KPPSPECIES, cemiss, MHg added
- messy_main_tools.f90: function str added
- CLOUD: update
- messy_main_data_bi.f90: xtecl, xteci added
- SCAV: bug-fixes
  - diagnostic fluxes for budgeting corrected
  - ice nucleation scavenging (new subroutine)
  - speedup for scav_easy
- JVAL, MECCA1: H2O4 photolysis
- M7: dryrad for mode 5-7 added
- HETCHEM (update):
  - loss_n2o5 removed
  - unit for aerosol surface climatology changed to m2/m3

******************************************************************************

echam5.3.01_messy_1.10c (03 Nov 2010)

Changes by Volker Grewe:
- O3ORIG: update

Changes by Rudolf Deckert:
- PSC: bug-fix for QCTM mode

******************************************************************************

echam5.3.01_messy_1.10b (22 Sep 2010)

CHANGES by Volker Grewe and Stefanie Meul:
- O3ORIG: new diagnostic submodel for regional ozone tagging

CHANGES by Klaus-Dirk Gottschaldt and Patrick Joeckel:
- PSC: bug-fix for alternative r_ice calculation

******************************************************************************

echam5.3.01_messy_1.10 (25 Aug 2010)

CHANGES by Michael Ponater:
- rrtm_rrtm_140gp.f90, messy_rad4all_long.f90: set negative optical depths to
  zero

CHANGES by Patrick Joeckel:
- TRACER: set contnorest=.TRUE. for tracers
- MECCA1: diagtrac.tex, enable UBP diagnostic also, if UBP is ON

CHANGES by Klaus-Dirk Gottschaldt and Patrick Joeckel:
- PSC: bug-fix in r_ice calculation

******************************************************************************

echam5.3.01_messy_1.9i (30 Jul 2010)

CHANGES by Patrick Joeckel:
- LNOX: cloud bottom height (cbh) added to stream

CHANGES by Klaus-Dirk Gottschaldt:
- MECCA1:
  - L41_ubp.rpl: bug-fix
  - messy_mecca1_ubp_op.inc: bug-fix
  - tracdef.tex: switches for UBP-reservoirs corrected

******************************************************************************

echam5.3.01_messy_1.9h (30 Jul 2010)

CHANGES by Patrick Joeckel:
- config/mh-linux-64, xmessy: updates for mpc* at RZG
- ONLEM: added lrerun=.TRUE. to stream elements zprecipinsoil and prectot
- MECCA1 (UBP, messy_mecca1_ubp_dec.inc): bug-fix in type declaration

******************************************************************************

echam5.3.01_messy_1.9g (23 Jul 2010)

CHANGES by Klaus-Dirk Gottschaldt:
- MECCA1: complete revision of upper boundary parameterisation (UBP) for L41

CHANGES by Volker Grewe:
- MECCA1 (diagtrac.tex, gas.spc, tracdef.tex, tracer.nml): new ozone
  budget diagnostic

CHANGES by Patrick Joeckel (thanks to Francois Benduhn):
- SEDI, PSC:
  - bug fixes in first order sedimentation schemes

CHANGES by Andreas Baumgaertner:
- NCREGRID: bug fix in messy_ncregrid_tools.f90 (subroutine RGTOOL_G2C);
  rank corrections for latm, lati, lonm, loni

CHANGES by Eleni Tsati:
- TAGGING: update

CHANGES by Patrick Joeckel:
- TRACER:
  - messy_main_tracer_bi.f90: calculate tracer mass with dry air mass in box
    (tracer_pdef_gp)
- DATA:
  - new channel object grmassdry (mass of dry air (in kg) in grid box)
- NCREGRID:
  - GRD_MAXSTRLEN increased from 100 to 200
  - messy_ncregrid_toold.f90: NCCNTMAXNLEN increased from 20 to 40
- ONLEM (messy_onlem.f90): bug fixes in NO_emissions and NOemis_yl95sl10;
  OPTIONAL attribute removed from noslflux_diag*, since they are used, even if
  they are not present

******************************************************************************

echam5.3.01_messy_1.9f (16 Jun 2010)

CHANGES by Volker Grewe and Eleni Tsati:
- TAGGING: new submodel
- MECCA1: additional diagnostic tracers for TAGGING,
	  modified files: gas.spc, diagtac.tex, tracdef.tex
- OFFLEM: new namelists for TAGGING

CHANGES by Patrick Joeckel:
- MECCA1 (xmecca1): allow negative diagnostic products in diagtrac.tex

CHANGES by Volker Grewe:
- MECCA1: O3 diagnostic, modified files: gas.spc, diagtac.tex, tracdef.tex

******************************************************************************

echam5.3.01_messy_1.9e (14 Jun 2010)

CHANGES by Joerg Steinkamp:
- ONLEM: - new diagnostic output for NO emissions from soil
	 - improved version of Yienger and Levy NO emssions from soil updated
	 - NO pulsing (from soil) revised

CHANGES by Patrick Joeckel:
 - AIRSEA: bug fix for sea-surface concentration pointers
 - TNUDGE: tnudge now terminates if stream element for tracer-nudging is not
	   available

CHANGES by Andrea Pozzer:
- AIRSEA (airsea_calc_schmidt_sea): temperature limitied to [0,40] deg C

******************************************************************************

echam5.3.01_messy_1.9d (21 May 2010)

CHANGES by Mauro Dall'Amico:
 - PLUMEGAS: new submodel

CHANGES by Patrick Joeckel:
 - xmessy: allow more file names for sst and sea-ice data
 - modules/mo_transpose.f90:
   - avoid async_gather also for __INTEL_COMPILER

******************************************************************************

echam5.3.01_messy_1.9c (03 Mar 2010)

- CHANGES by Patrick Joeckel:
  - WARNINGS updated
  - MECCA1:
    - gas.eqn renamed to gas_mim1.eqn
    - new gas.eqn renamed to gas_mim2.eqn
    - news subdirectories mim1 and mim2 in rpl for specific replacement files
    - existing replacement files moved to rpl/mim1
    - xmecca1:
      - additional selection of equation file
      - selection of replacement files consistent with selected eqn-file
      - NOTE: tracdef.tex, gas.spc, aqueous.spc, aqueous.eqn are
	      shared between MIM1 and MIM2

- CHANGES by Domenico Taraborrelli and Rolf Sander:
 - MIM2 included in MECCA1:
   - new isoprene oxidation from ACP, 9, 2751-2777, 2009
   - implementation based on gas_MIM2_20080816_dt.eqn,
     gas_MIM2_20080816_dt.spc, gas-v1.1_labeled.eqn (2009-06-22 22:28),
     and complex_k_MCM.txt (2009-03-10 17:42)
   - new parameterization for RO2 + R'O2 reactions
   - new oxidation scheme for acetone
   - new oxidation scheme for C2H4 (oxidation by OH and O3)
   - C1-chemistry not copied from MIM2 (but RO2+R'O2 adjusted to new
     parameterization)
   - obsolete species (kept for MIM1):
     NACA, ISON, ISO2, ISOOH, LHOC3H6O2, LHOC3H6OOH, MVKO2, MVKOOH
   - lumped species now all start with "L"
   - reaction numbers changed because MPAN is C4, not C3:
     G4318 --> G4418
     G4319 --> G4419
     J4305 --> J4407
   - some reactions were already included in MECCA1. In these cases, the
     products were updated to MIM2 but the MECCA1 rate coefficient was
     kept (instead of using the MCM value)
   - product ONIT neglected in G4415
   - J-values for MIM2 reactions are now based on available J-values from JVAL:
     0.074*JX(ip_CHOH)                for ACETOL, CO2H3CO3H, and HO12CO3C4
     0.074*JX(IP_CHOH)+JX(IP_CH3OOH)  for C59OOH and LMVKOHABOOH
     0.5*JX(ip_CH3COCHO)              for BIACETOH
     0.5*JX(ip_MVK)                   for HCOC5
     3.7*JX(ip_PAN)                   for ISOPBNO3, ISOPDNO3, and LISOPACNO3
     3.7*JX(ip_PAN)+0.074*JX(ip_CHOH) for NOA
     JX(ip_CH3COCHO)                  for HCOCO2H, HOCH2COCO2H, and HOCH2COCHO
     JX(ip_CH3OOH)                    for many ROOH
     JX(ip_CH3OOH)+0.074*JX(ip_CHOH)  for HYPERACET
     JX(IP_CH3OOH)+JX(IP_HOCH2CHO)    for HCOCO3H
     JX(ip_GLYOX)                     for GLYOX
     JX(ip_HOCH2CHO)                  for HOCH2CHO, MACROOH, and MACROH
     JX(ip_MACR)                      for MACR, NC4CHO, and LHC4ACCHO
     JX(ip_MVK)                       for MVK and MVKOH
   - tracdef.tex:
     - new species added
     - MPAN corrected (C4 not C3)
   - reaction numbers assigned to new reactions

******************************************************************************

echam5.3.01_messy_1.9b (03 Mar 2010)

- CHANGES by Patrick Joeckel:
  - MECCA1:
    - gas_1.1.eqn removed
    - renaming of species completed in other submodels:
      - EMDEP:
	- messy_emdep_emis_e5.f90
      - EQSAM:
	- messy_eqsam_e5.f90, eqsam.nml, messy_eqsam.f90
      - GM7:
	- messy_gm7_e5.f90, gm7.nml, messy_gm7.f90
      - JVAL:
	- messy_jval_e5.f90, messy_jval.f90
      - ONLEM:
	- onlem.nml
      - PHOTO:
	- messy_photo_e5.f90, messy_photo.f90
      - MECCA1:
	- diagtrac.tex, rpl/*.rpl, tracdef.tex
      - SCAV:
	- ice2.eqn, ice.eqn, ice.spc, messy_scav_box.f90, scav.nml,
	  messy_scav_ice.f90, messy_scav_liq.f90
      - OFFLEM:
	- offlem.nml, offlem/c4h10_2000.nml, offlem/ch3cooh_2000.nml
      - TRACER:
	- tracer.nml

CHANGES by Domenico Taraborrelli and Rolf Sander:
- MECCA1:
  - G4403: bugfix: yield of CH3CHO is 0.28 instead of 0.84
  - messy_mecca1_box.f90: added JX(ip_GLYOX), JX(ip_MACR), JX(ip_MVK),
    and JX(ip_HOCH2CHO)

- CHANGES by Rolf Sander:
  - MECCA1:
    - xmecca1: "setenv LC_COLLATE C" added before all gawk calls
    - tdacdef.tex: new species for MIM2
    - "St"-label added to J(BrO)
    - species renamd according to MCM:
      PAA        -->  CH3CO3H
      CH3COCHO   -->  MGLYOX
      EtO2       -->  C2H5O2
      EtOOH      -->  C2H5OOH
      PA         -->  CH3CO3
      CH3COOH    -->  CH3CO2H
      PrO2       -->  IC3H7O2
      ONIT       -->  LC4H9NO3
      PrOOH      -->  IC3H7OOH
      PrONO2     -->  IC3H7NO3
      ACETO2     -->  CH3COCH2O2
      ACETP      -->  HYPERACET
      C4H10      -->  NC4H10
      C4H9O2     -->  LC4H9O2
      C4H9OOH    -->  LC4H9OOH
      MEKO2      -->  LMEKO2
      MEKOOH     -->  LMEKOOH
      MeCOCO     -->  BIACET
      ISOP       -->  C5H8
      C3H6O2     --> LHOC3H6O2
      C3H6OOH    --> LHOC3H6OOH
    - modified files: gas.spc, gas.eqn, aqueous.spc, aqueous.eqn

******************************************************************************

echam5.3.01_messy_1.9 (02 Feb 2010)

******************************************************************************

echam5.3.01_messy_1.8.1i (01 Feb 2010)

CHANGES by Patrick Joeckel:
- NCREGRID, TRACER:
  bug fix in messy_ncregrid_control.f90 for special case of
  ntrac > 1, L_TRACER_INIT = T and no &regrid-namelist present in tracer.nml
- WARNINGS updated
- configure.in, configure updated

CHANGES by Ole Kirner:
- PSC:
  - bug-fixes for kinetic nat parameterisation
  - namelist switch r_ub renamed to r_mb (middle boundary)
  - new namelist switch r_ub (upper boundary)

CHANGES by Rudolf Deckert:
- PSC: stream element r_ice and v_sed_NAT also if .NOT. KinPar

CHANGES by Patrick Joeckel:
- PTRAC: first aerosol (medium!) tracer determines RADIUS, SIGMA, and DENSITY
  of corresponding mode

CHANGES by Holger Tost (thanks to Susannah Burrows):
- SCAV (messy_scav_e5.f90): bug-fix in aerorosl flux calculation

******************************************************************************

echam5.3.01_messy_1.8.1h (18 Jan 2010)

CHANGES by Ole Kirner:
- mh-aix, xmessy: updates for KIT-IMK
- zip.sh: exclude all data* subdirectories
- PSC: kinetic PSC parameterisation for NAT and ice with 9 size bins
  - psc.nml (CTRL): new switch KinPar to activate kinetic parameterisation
- HETCHEM:
  - stream element N_s0_3d renamed to N_solid
  - optional differentiation between NAT and ice particles
    (This option is automatically selected, if KinPar=T in PSC,
    the coupling is established via the existence of the stream element
    r_solid in PSC.)
  - hetchem.nml:
    - Pscnumdens renamed to Pscdens_solid
    - Pscrad renamed to Pscrad_solid
    - new parameters (CPL): Pscdens_ice, Pscrad_ice, Pscdens_NAT, Pscrad_NAT

CHANGES by Susannah Burrows:
- bug-fix in ptrac_bioaerosol.nml

******************************************************************************

echam5.3.01_messy_1.8.1g (15 Jan 2010)

CHANGES by Patrick Joeckel:
- WARNINGS: updated
- H2O, MECCA1: *_init_tracer modified
- PSC, PTRAC, DRADON, D14CO, MYTOY, GM7, EQSAM:
  entry point *_init_tracer removed
- DRADON: l_initrac switch removed from CPL namelist
- D14CO: l_initrac switch removed from CPL namelist
- TRACER:
  - all tracers are now initialsed via &REGRID namelists in tracer.nml
  - new switch L_TRACER_INIT to SWITCH ON(T)/OFF(F)
    tracer initialisation (CPL-namelist)
  - modified files: messy_main_tracer_bi.f90
		    messy_main_control_e5.f90

CHANGES by Klaus-Dirk Gottschaldt:
- PSC: additional diagnostic output

CHANGES by Susannah Burrows:
- ONLEM: bio-aerosol emissions revised

******************************************************************************

echam5.3.01_messy_1.8.1f (08 Jan 2010)

CHANGES by Patrick Joeckel:
- PSC: all PSC region parameters are now in CPL-namelist

CHANGES by Christoph Bruehl:
- PSC: bug fixes for calculation of lower boundary of psc
  region in messy_psc_e5.f90 (wrong units in call of T_ice and T_nat corrected)

CHANGES by Rudolf Deckert:
- PSC:
  - new mode for decoupled simulations implemented (via CPL-namelist
    switch l_feedback in psc.nml);
  - messy_psc_e5.f9: new entry point psc_init_coupling for import of
    HNO3 climatology via offlem

******************************************************************************

echam5.3.01_messy_1.8.1e (07 Jan 2010)

CHANGES by Patrick Joeckel:
- WARNINGS updated

CHANGES by Benedikt Steil:
- CUBO: new submodel
- SALOT: new submodel
- messy_main_bmluse_bi.f90: netcdf and I/O information included
- messy_main_control_e5.f90: new entry point messy_b4output for
  submodels CUBO and SALOT
- stepon.f90: new entry point messy_b4output for submodels CUBO and SALOT

******************************************************************************

echam5.3.01_messy_1.8.1d (07 Jan 2010)

CHANGES by Klaus-Dirk Gottschaldt, Volker Grewe and Patrick Joeckel:
- MECCA1: upper boundary parameterisation for L41DLR
  - modified files (active):
     messy_mecca1_e5.f90, gas.eqn, gas.spc, tracdef.tex, mecca1.nml,
     messy_mecca1.f90,
     vector/sedsolve_ros2, vector/sedsolve_ros3,
     vector/smcl/messy_mecca1_vec.f90, vector/smil/messy_mecca1_vec_e5.f90,
     vector/xvector,
  - modified files (comments):
     diagtrac.tex
  - new files:
     rpl/L41_ubp.rpl, messy_mecca1_ubp_dec.inc, messy_mecca1_ubp_op.inc,
     vector/smcl/messy_mecca1_vec_ubp_dec.inc,
     vector/smcl/messy_mecca1_vec_ubp_op.inc
  - new links:
     boxmodel/messy_mecca1_ubp_dec.inc,
     boxmodel/messy_mecca1_ubp_op.inc

CHANGES by Patrick Joeckel:
- MECCA1: bug-fixes in substitute.awk and replace1.awk

******************************************************************************

echam5.3.01_messy_1.8.1c (17 Dec 2009)

CHANGES by Susannah Burrows:
- ONLEM: bio-aerosol emissions included

CHANGES by Patrick Joeckel:
- DRADON: new submodel
- MECCA1: bug-fixes in substitute.awk and replace1.awk

******************************************************************************

echam5.3.01_messy_1.8.1b (04 Dec 2009)

CHANGES by Holger Tost (thanks to Simone Dietmueller):
- SCAV: bug fix in messy_scav.f90, subroutine SCAV_EASY_L3

CHANGES by Patrick Joeckel:
- config/config.guess,config.sub,install-sh: update for IBM pSeries, AIX 6.1
- kpp1: Makefile.defs.AIX: changed gcc to xlc_r
  (gcc does not work any longer after update to AIX 6.1)
- MYTOY: complete sample solution according to workshop tasks
- messy/util/efchk: updates

******************************************************************************

echam5.3.01_messy_1.8.1 (27 Oct 2009)

CHANGES by Patrick Joeckel:
- new submodel MYTOY, basically empty as a eference for the overall
  SM structure
- configure.in (configure), mh-*, efchk, Makefile.in:
  update for forcheck-libraries

******************************************************************************

echam5.3.01_messy_1.8b (26 Oct 2009)

CHANGES by Christoph Bruehl:
- JVAL: alternative subroutine jval_cal_cl2o2_new based on Burkholder 90
  Chen 2009 (currently commented out)
- MECCA1 (gas.eqn): comment to remove factor 1.4 on Cl2O2 photolysis channel
  in case alternative jval_cal_cl2o2_new is used

CHANGES by Patrick Joeckel:
- MECCA1/kpp1: enable creation of mechanisms on IBM Power6 (AIX);
  modified files: replace1.awk, substitute.awk, xmecca1
- xecham: extensions for IBM AIX
- update of messy/tools/kpp1/Makefile.defs.AIX to allow compilation on AIX
- HETCHEM (messy_main_hetchem_e5.f90): het_n2o5 reduced from rank 5 to rank 3
  (ngpblks,1 dimensions not required, since only used in hetchem_physc)
- SCAV:
  - xdecomp*: remove always if-statements
  - xscav*: remove indirect indexing as default
- MECCA1:
  - rpl/scout*.rpl: SF6AGE removed
  - xdecomp: remove always if-statements
  - xmecca1: remove indirect indexing as default
- ONLEM: bug-fix for ngpblks>1
- TOOLS:
  - messy_main_tools.f90:
    new subroutine time_span_d to calculate the time difference in days
    as REAL(DP);
    Note: Due to rounding / conversion errors (between INTEGER and DP)
    INTEGER is insufficient for delta_T > 24855 days
- NCREGRID (messy_ncregrid_interface.f90):
  - time_span_s replaced by time_span_d
- PSC:
  - lower boundary of PSC region [hPa] as CPL-namelist parameter r_lb
  - bug fix (potential division by zero removed)
- mo_mpi.f90: special treatment for OpenMPI
- mh-aix: updates for blizzard at DKRZ
- mh-linux: updates for lx* at DLR
- mh-linux-64: updates for LRZ (hlrb2)
- xmessy:
  - updates for blizzard at DKRZ
  - updates for lx* at DLR
  - updates for LRZ
- mchlog: update

******************************************************************************

echam5.3.01_messy_1.8 (19 May 2009)

CHANGES by Holger Tost:
- SCAV:
  - xscav_i: option for vectorized code deactivated
  - messy/src/specific.mk updates for scav-code on NEC-SX6

Changes by Kirsty Pringle:
- SCAV:
  - specifik.mk and messy/src/specific.mk: updates for NEC-SX6

CHANGES by Patrick Joeckel:
- locate_f90.sh(.in): update
- SCAV (messy_scav_e5.f90):
  - bug-fix; doubled use-statements removed
- TRACER:
  - messy_main_tracer.f90: subroutine get_tracer overloaded to retrieve
    tracer information either by tracer name (as before) or by tracer id (new)

******************************************************************************

echam5.3.01_messy_1.7.1c (06 May 2009)

CHANGES by Rolf Sander:
- MECCA1: updated G2105 and G2108abc

CHANGES by Benedikt Steil:
- xmecca1, xscav_i, xscav_l: set KPP_HOME to relative path to workaround
  C (getenv) string length limitation for long paths

CHANGES by Holger Tost:
- SCAV
  - messy_scav_ice.f90, messy_scav_liq.f90, messy_scav.f90:
    (case sensitive) correction of SCAV_VECTOR preprocessor directive
  - messy_scav_ice.f90, messy_scav_liq.f90: bug-fixes for vector code

CHANGES by Joerg Steinkamp:
- ONLEM:
  - set l_veg_mlay = .false.
    NOTE: this change alters the total soil-NOx emissions
- mh-linux.i, xmessy: updates for GWDG environment
- nudge.nml: optional settings for L31ECMWF
- messy_ncregrid_control.f90, mo_transpose.f90: intel (version 11) compiler
  bug workarounds (in __INTEL_v11 preprocesor directive)

******************************************************************************

echam5.3.01_messy_1.7.1b (30 Jan 2009)

CHANGES by Rolf Sander:
- JVAL: cosmetic changes

******************************************************************************

echam5.3.01_messy_1.7.1 (08 Jan 2009)

CHANGES by Holger Tost:
- messy_main_control_e5.f90: modifications for modified SCAV
- SCAV: complete revision with new features (ice-scavenging for gas-phase,
	release of scavenged cloud species at the end of the time step)
- CLOUD: added new stream elements for coupling to SCAV

******************************************************************************

echam5.3.01_messy_1.7 (16 Dec 2008)

CHANGES by Patrick Joeckel:
- messy/src/specific.mk: compile messy_cloud_ori.f90 with -qnohot on IBM
- messy/mbm/mecca1/rpl/MIMcor.rpl added

Changes by Joerg Steinkamp:
- ONLEM: alternative NO soil emission algorithm (untested)

******************************************************************************

echam5.3.01_messy_1.6c (17 Sep 2008)

Changes by Klaus Dirk Gottschaldt:
- xmessy: ESH_PENV=mpiexec_hlrb2 for hlrb2

Changes by Joerg Steinkamp:
- ONLEM: alternative NO soil emission algorithm (untested)

Changes by Mauro Dall'Amico and Winfried Beer:
- xmessy: bug fix in test for core-files

******************************************************************************

echam5.3.01_messy_1.6b (17 Sep 2008)

CHANGES by Patrick Joeckel:
- messy_jval.f90 (jval_read_nml_ctrl): interval check
- config/mh-aix: updated for vip at RZG
- xmessy: updated for vip at RZG
- NCREGRID (messy_ncregrid_base.f90, messy_ncregid_control.f90):
  write ERROR.ncregrid<.[rank]> file on error
- TRACER (messy_main_tracer_bi.f90) and
  NCREGRID (messy_main_ncregrid_control.f90):
  bug-fix for parallel-NCREGRID tracer_init, re-set save variable for
  multiple calls
- MECCA1: bug fix in xmecca1 (adding diagnostic tracers)
- messy/mbm/ncregrid/Makefile.in: bug fix LIBS -> LLIBS

CHANGES by Rolf Sander:
- JVAL: set default solar timer to constant/170

******************************************************************************

echam5.3.01_messy_1.6 (26 May 2008)

******************************************************************************

echam5.3.01_messy_1.5f (13 May 2008)

CHANGES by Andreas Baumgaertner and Christoph Bruehl:
- MECCA1: replacement file for updated JPL2006 reaction rates for H2O included
- SPACENOX: now applied also in the NH

CHANGES by Andreas Baumgaertner
 - SPE: now also reads and applies externally calculated ionization rates
 - MECCA1: renamed scout replacement files
 - config/mh-aix: added jump@Juelich

CHANGES by Katja Matthes:
 - FUBRAD : bugfix messy_rad4all_fubrad.f90

CHANGES by Patrick Joeckel (thanks to Anne Kubin):
- messy_main_tools.f90: bug fix in interpolation of tseries
  (subroutine get_tseries_data_ipo)

CHANGES by Rolf Sander:
- MECCA1: check_conservation.pl(.in) renamed to check_conservation1.pl(.in)

******************************************************************************

echam5.3.01_messy_1.5e (09 May 2008)

CHANGES by Patrick Joeckel:
- config/mh-linux-64: new entries for host mars
- xmessy: new entries for host mars
- messy/util/locate_f90.sh.in improved

CHANGES by Rolf Sander:
- MECCA: bug fix in Makefile (LLIBS and LINCLUDES)

CHANGES by Tim Butler:
- MECCA: check_conservation.pl(.in), new perl script that analyzes
  the mass balance of the chemical reactions in gas.eqn

CHANGES by Christoph Bruehl and Rolf Sander:
- MECCA (gas.eqn):
  - second pathway added for N2O5 and ClNO3 photolysis (see below)
  - troposphere label "Tr" added to J1000: O2 + hv (use JO2.rpl if you
    don't want this)
  - J4103: CH4 + hv
- JVAL:
  - JPL2006 update for NO3 and NO2
  - second pathway added:
    N2O5 + hv  --> NO2 + NO3
	       --> NO + O + NO3
    ClNO3 + hv --> Cl + NO3
	       --> ClO + NO2
  - new: MACR MVK GLYOX HOCH2CHO (not in MECCA yet)
  - new: Ly-alpha photolysis of CH4
  - Ly-alpha photolysis of CO2 reduced
  - obsolete (and already commented) line "vinit = 1.e-35" deleted

CHANGES by Astrid Kerkweg and Patrick Joeckel:
- messy_mecca1_vec_e5.f90: _e5 -> _bi

******************************************************************************

echam5.3.01_messy_1.5d (27 Mar 2008)

CHANGES by Astrid Kerkweg and Patrick Joeckel:
- messy_main_tools.f90: new subroutines/functions time_span_s, gregor2julian
- messy/util/messy_check_* update
- redefinition of BMIL (to be shared between ECHAM5 and COSMO !):
    mv messy_main_data_e5.f90           messy_main_data_bi.f90
    mv messy_main_echam5_e5.f90         messy_main_bmluse_bi.f90
    mv messy_main_transform_e5.f90      messy_main_transform_bi.f90
    mv messy_main_switch_e5.f90         messy_main_switch_bi.f90
    mv messy_main_tools_e5.f90          messy_main_tools_bi.f90
    mv messy_main_tracer_e5.f90         messy_main_tracer_bi.f90
    mv messy_main_tracer_family_e5.f90  messy_main_tracer_family_bi.f90
    mv messy_main_tracer_mem_e5.f90     messy_main_tracer_mem_bi.f90
    mv messy_main_tracer_pdef_e5.f90    messy_main_tracer_pdef_bi.f90
- messy_main_data_e5.f90, messy_ncregrid_interface_e5.f90:
  - time/date related routines from echam5 replaced by MESSy routines and
    variables
- messy_main_echam5_e5.f90: removed unused routines/variables
- TRACER: updates for box-model
- messy_main_mpi_e5 renamed to messy_main_mpi_bi (BMIL) since now
  shared between basemodels ECHAM5 and COSMO

CHANGES by Patrick Joeckel:
- NCREGRID: bug fixes for parallel-NCREGRID, now with preprocessor directive
  PNCREGRID (Makefile.in, messy/src/Makefile.in)

******************************************************************************

echam5.3.01_messy_1.5c (18 Mar 2008)

CHANGES by Klaus Ketelsen and Patrick Joeckel:
- TRACER: parallel NCREGRID for tracer initialisation;
  - changed files: messy_main_tracer_e5.f90, messy_main_mpi_e5.f90
- NCREGRID (MPI parallelisation; distribute variables)
  - changed files: messy_ncregrid_control.f90, ncregrid.f90

CHANGES by Holger Tost:
- RAD4ALL: bug fix; O3_pre put to rerun files for availability in photolysis
	   calculations

CHANGES by Patrick Joeckel:
- CONVECT: changes made for 1.5b removed (coupling to H2O and humid. conv.)
- JVAL: bug fix in solar time control

******************************************************************************

echam5.3.01_messy_1.5b (02 Feb 2008)

CHANGES by Sabine Brinkop, Holger Tost and Patrick Joeckel:
- CONVECT:
  - new parameter for calculation of humidity convergence
  - preparations for coupling to H2O (LG)
- H2O: modified for Lagrangian H2O-Tracer and feedback

CHANGES by Holger Tost, Andreas Baumgaertner:
- SCAV:
  - bug fix for super vectorisation
  - bug fix for rain liquid water content

CHANGES by Holger Tost, Andreas Baumgaertner and Patrick Joeckel:
- mo_tpcore.f90:
  - SUBROUTINE update_ps modified to achieve decomposition independent
    results; add. preprocessor directive FAST_BUT_DECOMPDEP
  - bug fix (k>3) in mass-wind inconsistency fixer

******************************************************************************

echam5.3.01_messy_1.5 (18 Dec 2007)

******************************************************************************

echam5.3.01_messy_1.4.1m (17 Dec 2007)

CHANGES by Holger Tost, Andreas Baumgaertner and Patrick Joeckel:
- CONVECT (messy_convect_tiedtke.f90): several bug fixes;
  goto-statements (for which the condition was dependent on the
  decomposition/vectorisation (nproma)) have been removed

CHANGES by Patrick Joeckel:
- SCAV, MECCA1: seddecomp*: prepend locate_f90.sh with "./"
- JVAL: bug fix for box model ((de)allocate fhuv_3d, fhuvdna_3d)

CHANGES by Rolf Sander:
- JVAL: dp for time-series data

CHANGES by Astrid Kerkweg:
- MECCA1: bugfix in replace1.awk
- mo_memory_g3b.f90: lrerun=.FALSE. for new stream elements
		     (trfll, trflw, trfli, sofll, soflw, sofli)

******************************************************************************

echam5.3.01_messy_1.4.1l (06 Dec 2007)

CHANGES by Astrid Kerkweg:
- MECCA1:
  - bromo-carbons moved to aero.rpl
  - diagtrac.tex, gas.spc, tracdef.tex: new species

******************************************************************************

echam5.3.01_messy_1.4.1k (06 Dec 2007)

CHANGES by Andreas Baumgaertner and Patrick Joeckel:
- RAD4ALL: bug fix; local fields in physc.f90 need to be shared between
    ECHAM5 radiation (isw_rad4all=1) and RAD4ALL (isw_rad4all=2):
  - mo_memory_g3b.f90: new stream elements for trfll, trflw, trfli, sofll,
    soflw, sofli
  - physc.f90: use of new stream elements
  - messy_radall_e5.f90: references to new stream elements
- mo_constants.f90:
  - harmonisation of molar masses with messy_main_constants.f90
  - unused constants removed

CHANGES by Patrick Joeckel:
- JVAL:
   - bug fix: orbital parameter cdisse must be used to scale the solar
	      data; parameter used in jval_solar_time_control
   - box model updated accordingly (cdisse = 1.0)
- messy_main_control_e5.f90: jval_global_start is now called after
  rad4all_global_start
- messy_main_data_e5.f90:
  - new stream elements srfl_physc and zi0 used for
    the separation of RAD4ALL from the original ECHAM5 radiation
  - new orbit parameters cdisse and cdissem to be shared between RAD4ALL
    and the original ECHAM5 radiation
- RAD4ALL:
  - bug fix: iclw -> icli
  - no more direct connection to original ECHAM5 radiation
    - *_e5 pointers and stream elemnts of geoloc removed
    - zi0_2d and srfl_2d used from messy_main_data_e5.f90 and calculated
      as in the original ECHAM5 radiation
    - cdisse and cdissem now used via messy_main_data_e5.f90
  - use of orbital parameters (cdisse and cdissem) between RAD4ALL
    and RAD4ALL_fubrad harmonised
  - messy_rad4all_orbit_e5.f90: cdisse and cdissem used from
    messy_main_data_e5.f90
- RAD4ALL_FUBRAD:
  - new subroutine rad4all_fubrad_global_start to set orbital parameter
    (cdisse) for FUBRAD and to provide revised total solar irradiance
    (i.e., at 1 AU) from data file to RAD4ALL
  - unused code removed
  - new parameter cdisse_fubrad for internal use (set by
    fubrad_solar_time_control)
- ECHAM5 radiation decoupled from RAD4ALL (#ifdef MESSY ... #endif):
  - mo_tmp_buffer.f90: srfl converted to pointer
  - physc.f90:
    - srfl is now pointer to srfl_2d from messy_main_data_e5.f90
    - zi0 is now pointer to zi0_2d from messy_main_data_e5.f90
    - cdisse is now used from messy_main_data_e5.f90
    - lrad (from mo_param_switches.f90) used to switch on/off the
      radiation calulations (radiation + zi0,srfl, radheat) in case
      of RAD4ALL is used with isw_rad4all=1/2
    - initialisation of ztrfll etc. moved from radheat.f90 to physc.f90
      in case lrad=.false. (iswrad4all=2)
  - prerad.f90:
    - cdisse, cdissem are now used from messy_main_data_e5.f90
  - radheat.f90:
    - use of lrad removed (now in physc.f90)
    - initialisation of ptrfll etc. moved from radheat.f90 to physc.f90
  - radiation.f90:
    - cdisse is now used from messy_main_data_e5.f90
  - scan1.f90:
    - call of pread only for lrad=.true.

******************************************************************************

echam5.3.01_messy_1.4.1j (03 Dec 2007)

CHANGES by Patrick Joeckel:
- messy/util/locate.sh.in: de-wrap (mpi-wrapper) F90 compiler
- WARNINGS updated
- tools/kpp1: Makefile.m, Makefile, src/Makefile, Makefile.def.$(SYSTEM),
	      examples/Makefile
- mbm/onlem, mbm/tracer:
  - added $(F90FLAGS) in main.mk
  - added -D_alpha to CFLAGS for OSF1
- JVAL: bug fix in MAX-statement

******************************************************************************

echam5.3.01_messy_1.4.1i (28 Nov 2007)

CHANGES by Andreas Baumgaertner and Patrick Joeckel:
- RAD4ALL:
  - messy_rad4all_e5.f90, messy_rad4all_orbit_e5.f90: bug fix in time control
  - output of g3b stream elements supressed, if RAD4ALL is used with
    option isw_rad4all=2

CHANGES by Patrick Joeckel:
- mo_memory_base.f90: allow string lengths of 16 characters for stream names
- mo_linked_list.f90: length of post_suf, rest_suf, init_suf increased
		      from 16 to 18
- mo_grib.f90: increased file-length from +16 to +18
- messy_main_data_e5.f90, mo_midatm.f90:
  gravity wave drag componentes saved for output

CHANGES by Christoph Bruehl and Patrick Joeckel:
- JVAL: additional UV-B diagnostic stream element

******************************************************************************

echam5.3.01_messy_1.4.1h (20 Nov 07)

CHANGES by Patrick Joeckel:
- config/mh-linux.x: hosts lusaka and etosha included

******************************************************************************

echam5.3.01_messy_1.4.1g (20 Nov 07)

CHANGES by Holger Tost:
- SCAV: bug fix (prerequisite for status check of get_tracer)

CHANGES by Patrick Joeckel:
- TRACER_PDEF: bug-fix
- OFFLEM: updates
- TRACER: bug fix in messy_main_tracer_e5.f90 for tracer sets with only
	  one time instance
- QBO: write statements in add_mem removed
- PSC: bug fix (array boundaries)
- MECCA1: bug fix in photolysis rate loop for super-vectorisation
- config/mh-nec:
  - -Ep (preprocessor) option added to compiler specification
- xecham:
  - hydra removed
  - allow cross compilation for SX6 on ds8

******************************************************************************

echam5.3.01_messy_1.4.1f (13 Nov 07)

CHANGES by Patrick Joeckel:
- FUBRAD: modified for usage of external (ASCII) spectral data with
	  high resolution
	  - modified files: messy_rad4all_fubrad_e5.f90,
	    messy_rad4all_fubrad.f90, rad4all.nml
- RAD4ALL (another step towards MESSy conformity):
  - messy_rad4all_e5.f90: pass cdisse, cdissem via parameter list to FUBRAD

CHANGES by Andreas Baumgaertner:
- messy_d14co.f90, messy_main_tracer_family.f90, messy_offlem.f90,
  messy_onlem.f90: added compiler directive __INTEL_COMPILER
  (like __ibm__) for alternative code (string array pointers)

CHANGES by Holger Tost (thanks to Andreas Baumgaertner):
- SCAV (messy_scav_e5.f90): bug fix for special case

******************************************************************************

echam5.3.01_messy_1.4.1e (06 Nov 07)

CHANGES by Benedikt Steil:
- ONLEM: limit DMS emission to 35 degC
- intera/mo_grib_handling.f90: GBUF_SIZE_ZSEC4 increased

CHANGES by Patrick Joeckel:
- TOOLS: I4, I8, SP removed
- D14CO: I4 removed

CHANGES by Jens-Olaf Beismann (NEC):
- messy_ncregrid_base.f90: revised alternative code for NEC-SX
- config/mh-nec, all specific.mk (SX): revised
- mo_transpose.f90: alternative code for better performance on NEC-SX
- mo_tpcore.f90: alternative code for better performance on NEC-SX
- mo_mpi.f90: alternative subroutine p_inc_request for _SX
- messy_ncregrid_tools_e5.f90: status checks of (DE)ALLOCATE statements removed
- correct initialisation ( => NULL() ) of several pointers in the following
  submodels: ONLEM, OFFLEM, TRACER_FAMILY, D14CO, SCAV, JVAL, DRYDEP
  NOTE: According to ISO/IEC 1539-1 standard ASSOCIATED(pointer) is undefined,
	if the pointer is neither nullified (NULL()), nor associated
	(ALLOCATE)!

******************************************************************************

echam5.3.01_messy_1.4.1d (06 Nov 07)

CHANGES by Andreas Baumgaertner:
- SPACENOX: new submodel
- SPE: submodel revised

CHANGES by Holger Tost:
- GM7, EQSAM: non-f90 standard conform statements corrected

******************************************************************************

echam5.3.01_messy_1.4.1c (05 Nov 07)

CHANGES by Patrick Joeckel:
- JVAL: implementation for solar cycle data with 16 parameters

CHANGES by Holger Tost and Rolf Sander:
- MECCA1: new replacement files for OCS, ATF, NHx

CHANGES by Holger Tost and Astrid Kerkweg:
- DRYDEP: bug fix for non-aerosol tracers defined by aerosol models
- SCAV: update in vector_exp

CHANGES by Holger Tost, Swen Metzger, Benedikt Steil:
- updates for GM7 and EQSAM including box models
- start of implementation of simplified cloud routine based on EQSAM
  output (not working yet)
- messy_main_control_e5.f90: scav_new_tracer called last
- messy_main_echam5_e5.f90: adding ltrigfile
- CLOUD:
  - parameterisations for calculation of cloud droplet number concentrations
    added ; switch in cloud namelist (namelist modified in nml/cloud.nml);
    default is switched off; can be coupled to ECHAM5, default is no feedback
    modifications in messy_cloud_e5.f90, messy_cloud.f90 ; new file:
    messy_cloud_droplet.f90
- new configuration file mh/config.mac
- configure(.in): powerpc (mac) added

******************************************************************************

echam5.3.01_messy_1.4.1b (30 Oct 07)

CHANGES by Patrick Joeckel:
- QBO: time_control, time series handling modified with use of new
       types/subroutines in tools
- JVAL: time_control, time series handling modified with use of new
	types/subroutines in tools
	- messy/mbm/jval/messy_jval_box.f90:
	  modifications for time series handling
	- messy_jval.f90: modifications for time series handling
- TOOLS:
  - SMCL:
    - new type T_TIME_SERIES for the handling of time series data
      - subroutine read_tseries_data: read time series from ASCII file
      - subroutine clean_tseries_data: clean memory of time series structure
      - subroutine get_tseries_data: get current value of time series
    - type T_TIME_CONTROL modified
  - SMIL:
    - subroutine p_bcast_time_control for broadcasting time control data
    - subroutine read_tseries: read time series from ASCII file in parallel
      environment
- TRACER: updates for box-model

******************************************************************************

echam5.3.01_messy_1.4.1 (10 Oct 07)

CHANGES by Holger Tost:
- CVTRANS: bug fix

CHANGES by Patrick Joeckel:
- Makefile.in: workaround for 'Arg list too long' error when packing library
  on IBM
- messy/mbm/made/messy_made_box.f90: bug fix in logical operator

******************************************************************************

echam5.3.01_messy_1.4h (14 Sep 07)

******************************************************************************

echam5.3.01_messy_1.4g (11 Sep 07)

CHANGES by Patrick Joeckel:
- xmessy: updates for LSF scheduling at RZG

CHANGES by Rolf Sander:
- JVAL:
  - some unused constants deleted
  - bug fixes as suggested by forcheck

******************************************************************************

echam5.3.01_messy_1.4f ( Sep 07)

CHANGES by Andreas Baumgaertner:
- Makefile.in: some fixes for new subdirectory structure
- JVAL: bug fix for SF6 photolysis rate
- config/mh-linux.i: updates for GWDG

CHANGES by Holger Tost:
- CVTRANS: revised e5 file, one efficient code for both scalar and
	   vector machines, modified namelist
- CONVECT: additional convection schemes implemented (ECMWF,
	   Zhang-McFarlane-Hack, Bechtold, Emmanuel), modified namelist

CHANGES by Patrick Joeckel:
- xmessy: updates for LRZ and GWDG
- include/substeps_cl.f90 deleted

CHANGES by Holger Tost:
- xmessy: bug-fix in case-construct

******************************************************************************

echam5.3.01_messy_1.4e (04 Sep 07)

CHANGES by Christian Kurz, Andreas Baumgaertner and Patrick Joeckel:
- config/mh-linux.i: case-constructions for RZG, LRZ, GWDG
- xmessy: LSF queuing system at LRZ

CHANGES by Christian Kurz:
  messy_convect_tiedtke_param.f90: cmfctop = 0.22_dp for T42L41DLR

CHANGES by Andreas Baumgaertner and Patrick Joeckel:
- xmecca1: choice of replacement files, if present in rpl subdirectory

CHANGES by Andreas Baumgaertner:
- new submodel VAHR for volcanic aerosol heating rates
- RAD4ALL: volcanic aerosol heating rates removed
- config/mh-linux.i: new settings for GWDG
- messy_main_tracer_mem_e5.f90: bug fix (declaration moved after IMPLICIT NONE)
- RAD4ALL_FUBRAD: bug-fix; no more undefined values of diagnostic fields
  (messy_rad4all_short.f90)
- JVAL: bug fix for SF6 photolysis rate
- xmessy: new queuing system LSF (at GWDG)

******************************************************************************

echam5.3.01_messy_1.4d (03 Sep 07)

CHANGES by Rolf Sander and Patrick Joeckel:
- messy/box renamed to messy/mbm
- MECCA1: jname moved from messy_mecca1_e5.f90 to gas.eqn
- JVAL:
  - box model updated
  - j_*(:,:,:) replaced by jval_gp(ip_*)%ptr(:,:,:)

CHANGES by Rolf Sander:
- JVAL:
  - SF6 photolysis in boxmodel
- MECCA1:
  - correction of molar masses (MEKO2, MEKOOH) in gas.spc, tracdef.tex

******************************************************************************

echam5.3.01_messy_1.4c (24 Aug 07)

CHANGES by Rolf Sander and Patrick Joeckel:
- MECCA1: update to new new_tracer/set_tracer
  (tracdef.awk, tracdef.tex, messy_mecca1_[vec_]e5.f90)

CHANGES by Rolf Sander, Andrea Pozzer and Patrick Joeckel:
- JVAL: double code (#ifndef _SX) for acetone-photolysis removed

CHANGES by Rolf Sander, Andreas Baumgaertner and Patrick Joeckel:
- MECCA1:
  - extended sulfur chemistry as comments in gas.eqn
  - new sulfur species in gas.spc, tracdef.tex

CHANGES by Rolf Sander:
- MECCA1: replacement feature

******************************************************************************

echam5.3.01_messy_1.4b (23 Aug 07)

CHANGES by Andreas Baumgaertner, Christoph Bruehl and Benedikt Steil:
- JVAL: photolysis rate of SF6
- SPE: updated
- mo_io.f90: bug-fix, status was uninitialised
- MECCA1: ros2-log9.k integrator setup added
- RAD4ALL
  - messy_rad4all_e5.f90: volcanic heating rates
- xmessy: update

CHANGES by Andreas Baumgaertner and Patrick Joeckel:
- RAD4ALL_FUBRAD:
  - messy_rad4all_fubrad.f90: ascii-data input changed
    (now data format as in jval and qbo)

CHANGES by Patrick Joeckel and Astrid Kerkweg:
- MECCA renamed to MECCA1 and updated
- SCAV: minor changes for application of kpp1 (info etc.)

CHANGES by Patrick Joeckel:
- WARNINGS updated
- D14CO: tracers renamed for easier postprocessing
- ALL BOXMODELS: executables are moved/copied to ./bin; messy/bin removed
- ALL SUBMODELS: string-length now USEd from messy_main_constants_mem.f90
- PTRAC: completely revised
- TRACER: new box-model
- new subdirectory messy/tools;
  - new make targets: tools, toolsclean, toolsdistclean
  - edgar2nc and ncdx moved from messy/box to messy/tools
  - kpp1 added to messy/tools

CHANGES by Patrick Joeckel and Astrid Kerkweg:
- TRACER, specifically TRACER_FAMILY: concept completely revised and simplified
  (changes also in scan1.f90, stepon.f90 and messy_main_control_e5.f90)

CHANGES by Patrick Joeckel (thanks to Tim Butler):
- mo_time_control.f90, stepon.f90: new event trigger for correct update
  of SST/ICE data in case of transient AMIP2 simulations

CHANGES by Laurens Ganzeveld (thanks to Joerg Steinkamp)
- EMDEP (messy_emdep_emis.f90): bug fix for definition of 5 driest months

CHANGES by Astrid Kerkweg (thanks to Joerg Steinkamp)
- ONLEM (messy_onlem_e5.f90): bug fix for definition of 5 driest months

CHANGES by Andreas Baumgaertner and Astrid Kerkweg:
- messy_main_data_e5.f90: set lrerun=.FALSE. for pxtems

CHANGES by Katrin Nissen:
- RAD4ALL_FUBRAD:
    - messy_rad4all_fubrad.f90
    - messy_rad4all_fubrad_e5.f90
  - modified files (!):
    - messy_rad4all_e5.f90
    - messy_rad4all.f90
    - messy_rad4all_short.f90

CHANGES by Anne Kubin:
- mh-aix: added host berni1-en0

******************************************************************************

echam5.3.01_messy_1.4 (15 May 07)

CHANGES by Patrick Joeckel:
- TROPOP: bug-fix in the (now default) FAST_BUT_UGLY branch
- LNOX: finding of tracers revised

CHANGES by Benedikt Steil:
- config/mh-nec, messy/src/specific.mk, specific.mk:
  updates for NEC-SX6 compiler
- MECCA:
  - messy/mecca/integr/ros3-autonom.k: new integrator,
     forcing the model to use the autonomous branch in subroutine ROS3
  - messy/mecca/vector/xvector: /ros3-autonom.k added
  - messy_mecca_kpp_ros3_vecc.f90: update to avoid a sum-operation

CHANGES by Benedikt Steil and Astrid Kerkweg:
- M7:
  - messy_m7.f90: preprocessor directives, in subroutine dgas minimum radius
    changed
  - messy_m7_e5.f90: case-construct for scaling factor moved outside loops

CHANGES by Benedikt Steil and Holger Tost:
- SCAV:
  - xscav: new option for hyper-vectorisation
  - new subdirectory vector_exp with experimental hyper-vectorisation
  - new intgrator ros3-autonom.k
  - messy_scav_aer.f90, messy_scav_e5.f90: compiler directives and explicit
    loops

CHANGES by Patrick Joeckel:
- SPE: tracer coupling moved to (new) subroutine spe_init_coupling
       with new routine get_tracer_list
- TRACER: new subroutine get_tracer_list to get indices and (optionally)
	  subnames of all tracers with the same basename
- PSC: double code (FORALL/WHERE vs. DO/IF) removed
       NOTE: according to R. Hatzky, RZG, there was a F90-standard inconform
	     coding at the position WHERE(lCalcChemArray) ...; the standard
	     requires that all fields within the WHERE-construct need to
	     have the same shape as the logical array in the WHERE statement;
	     this was not the case, since the pointers were not associated
	     in case lCalcChem = .FALSE.; Since IF-statements are not allowed
	     within WHERE constructs, another doubling of the code would have
	     been the fix ...

CHANGES by Astrid Kerkweg:
- JVAL: H2O photolysis is also required, if no H2O tracer is present
	(specific humidity is then used for chemistry ...)

CHANGES by Andreas Baumgaertner:
- new submodel SPE: messy_spe.f90, messy_spe_e5.f90, spe.nml

CHANGES by Patrick Joeckel:
- mo_tpcore.f90, runctl.inc, inictl.f90, mo_advection.f90, ECHAM5*.nml:
  new namelist (RUNCTL) parameter 'nmwicfi' for the number of mass-wind-
  inconsistency fixer iterations (default: 0 (as in original ECHAM5))

CHANGES by Klaus Ketelsen:
- mo_tpcore.f90: mass-wind-inconsistency fixer repaired for NPROCB > 1

CHANGES by Holger Tost:
- SCAV:
  - addition and reordering of henry coefficients, their temperature
    dependencies and mean velocity
  - replacement of hardcoded dg values by parameterisation using vmean
  - EASY scavenging extended: fixed values, absolute henry, effective
    henry: selectable via namelist switch (required changes in
    messy_scav.f90, messy_scav_mem.f90, messy_scav_base.f90,
    messy_scav_e5.f90, scav.nml

******************************************************************************

echam5.3.01_messy_1.3.1d (27 Mar 07)

CHANGES by Patrick Joeckel:
- NCREGRID: bug-fix in messy_main_ncregrid_base.f90 (thanks to Holger Tost);
  the recursive sort-routines had been destroyed by previous changes
- Optimizations according to J. O. Beismann:
  - messy_main_tools.f90: iso2ind and ind2val overlayed for 1d (original) and
    2d (vector)
  - messy_tropop.f90: calc_PV and pblindex overlayed for 1d (orignal) and
    2d (vector)
  - messy_tropop_e5.f90: new preprocessor directive
    (#define FAST_BUT_UGLY) for usage of alternative vector-routines,
    which are not MESSy-standard conform, since they are NOT coded for the
    smallest possible entity (i.e. a column), and compilers are too stupid
    to inline/recognize this automatically

******************************************************************************

echam5.3.01_messy_1.3.1c (23 Mar 07)

CHANGES by Holger Tost and Benedikt Steil:
- SCAV:
  - messy_scav_e5.f90: improved vectorisation
    messy_scav_aer.f90, messy_scav_base.f90: improved vectorisation
  - specific.mk: inlining rules for NEC-SX6

CHANGES by Joerg Steinkamp (+ Astrid Kerkweg):
- ONLEM_ messy_onlem.f90: change calculations for tropical fraction (bug fix)

CHANGES by Astrid Kerkweg (thanks to Axel Lauer):
- DRYDEP: bug fix for aerosol deposition

CHANGES by Patrick Joeckel:
- messy_convect_e5.f90:
  - additional pointer zpqtec
  - call to tiedtke_cumastr* changed for vectorisation with
    compiler problem workaround for rs6000

******************************************************************************

echam5.3.01_messy_1.3.1b (08 Mar 07)

CHANGES by Astrid Kerkweg and Patrick Joeckel:
- SEDI: fixing SEDI boxmodel after Benedikts changes

CHANGES by Benedikt Steil:
- SEDI: code transmogrified for improved performance on NEC-SX6
  modified files: specific.mk, messy_sedi.f90, messy_sedi_e5.f90
- PSC: code transmogrified for improved performance on NEC-SX6
  modified files: specific.mk, messy_psc.f90, messy_psc_e5.f90

CHANGES by Patrick Joeckel:
- Optimizations according to J. O. Beismann:
  - messy_main_tracer_family_e5.f90: loop sequence changed
  - NCREGRID:
     - function QTYPE_NARRAY eliminated and replaced by
       additional type information in narray-structure
       NOTE: The alternative NEC-SX6 code in between
	     #ifndef _SX ... #else ... #endif does currently NOT work.
- Optimizations according to Klaus Ketelsen:
  - RAD4ALL:
    - messy_rad4all_long_e5.f90, messy_rad4all_long.f90,
      messy_rad4all_long_mem.f90
      modified: quick-and-dirty workaround for a bug in the NEC-SX6 compiler
  - specific.mk: special inlining rule for messy_convect_e5.f90 /
    messy_convect.f90
  - messy_convect.f90: ilab and pqtec with (:,:) for NEC-SX6 compiler
  - mh-config: alternative netCDF library (only as comment)
  - mo_netcdf.f90: increased initialsize and chunksize to 1MB
  - config/mh-aix: -lmass added to SPEC_LIB

******************************************************************************

echam5.3.01_messy_1.3.1 (08 Feb 07)

CHANGES by Patrick Joeckel:
- benchmarking setup included: nml.bench, xmessy.bench
- SCAV (xscav): 'sed' replaced by 'cat >>'
- xmessy: default paths updated (/data/projects/modeldata/...)
- JVAL, PHOTO: bug fix in jval_init_coupling for coupling to O3 tracer
	       (thanks to Jianzhong Ma and Rolf Sander)

CHANGES by Holger Tost:
- SCAV:
  - messy_scav_e5.f90:
   - bugfix that convective scavenging is now active
   - correct use of rain and snow formation rate, which are grid
     box average values (now rescaled to cloud fraction)
- CONVECT:
  - messy_convect_e5.f90:
   - bug fix of potential memory leak
   - bugfix for TOPMAX (ECHAM5 quantity)
   - new stream element cth, for convective cloud top height
   - workaround for xlf95 compiler
- CVTRANS:
  - messy_cvtrans_e5.f90:
   - negative values are no longer transported

CHANGES by Astrid Kerkweg:
- messy_drydep.f90, messy_drydep_e5.f90:
   -  bugfix for H2SO4
   -  do not generate ddepfluxsum for l_diagflux = F and l_fluxout = T

CHANGES by Rolf Sander:
- JVAL: bug fix in boxmodel

******************************************************************************

echam5.3.01_messy_1.3 (07 Nov 06)

CHANGES by Patrick Joeckel:
- WARNINGS updated
- PTRAC: aerosol related field names changed for automatic coupling to
	 DRYDEP, SEDI

******************************************************************************

echam5.3.01_messy_1.2g (31 Oct 06)

CHANGES by Holger Tost:
- SCAV:
  - complete revision of the code
  - vectorisation of the code
  - solver ROS3 can be used in vectorised form
  - box model revised
  - bugfix concerning solubility of aerosol tracers
  - correct use of cloud and precipitation cover (Thanks to Axel Lauer)
  - correct use of large-scale precipitation and snow formation rate
- CLOUD:
  - correction of large-scale precipitation and snow formation rate
    stream element description
- CONVECT:
  - Changes caused by modified scavenging code

******************************************************************************

echam5.3.01_messy_1.2f (25 Oct 06)

CHANGES by Astrid Kerkweg:
- MECCA_AERO: (messy_mecca_aero_e5.f90) bugfix for LWC calculation
- M7:         (messy_m7_e5.f90; m7.nml) bugfix for sulphate coupling

CHANGES by Patrick Joeckel:
- configure.in, configure, config/mh-nec: using mpi-wrapper scripts for
  cross-compilation

******************************************************************************

echam5.3.01_messy_1.2e (23 Oct 06)

CHANGES by Andrea Pozzer:
- AIRSEA: completely revised

CHANGES by Holger Tost:
- PSC: nwetdep=OFF, ndrydep=OFF, nscav=OFF for HNO3_nat

******************************************************************************

echam5.3.01_messy_1.2d (16 Oct 06)

CHANGES by Patrick Joeckel:
- JVAL: solar cycle included
- messy_main_tools: new
	- type:      T_TIME_CONTROL
	- function:  JulianMonthLength
- messy_ncregrid_tools_e5.f90: subroutine RGTEVENT_INIT_ONL added

CHANGES by Astrid Kerkweg:
- JVAL/PHOTO: add photolysis rates for CHCl2Br, CHClBr2, CH2ClBr, CH2Br2, CHBr3
- MECCA_AERO: (messy_mecca_aero_e5.f90) update of mecca_aero_vdiff
- rename MECCA_MBL to MECCA_AERO
- update DRYDEP:
  - new box model
  - automatical detection of aerosol models
  - lout_flux: possibility to put individual tracers into stream
- update SEDI:
  - automatical detection of aerosol models
  - new box model

******************************************************************************

echam5.3.01_messy_1.2c (16 Oct 06)

CHANGES by Christian Kurz:
- messy_cloud_ori.f90: cauloc = 3.0_dp for T42, nlev > 31, lmidatm=.FALSE.

CHANGES by Patrick Joeckel and Andrea Pozzer:
- vdiff.f90: rinum_3d/zri and fws/zsoil as copy instead of pointer
  (for performance reasons; thanks to Klaus Ketelsen)
- H2O: modified in preparation for Lagrangian representation
    NOTES: For consistency the feedback H2O -> q has been moved from
	   local_end to global_end, since in the Lagrangian case, this
	   feedback has to be applied after the local loop is completed.
	   Since with this change the following order
	     H2O feedback (local_end) -> TRACER_PDEF correction (local_end)
	   changed into
	     TRACER_PDEF correction (local_end) -> H2O feedback (global_end)
	   binary identical results compared to previous versions cannot
	   be expected, since now the H2O tracer is first corrected for
	   negatives (by TRACER_PDEF) before it is feed back into q of the
	   basemodel. This increases, however, consistency.

CHANGES by Patrick Joeckel:
- physc.f90: locond=.false. and loconv=.false. for lstart
- scan1.f90:
  - local (jrow) loop closed before timefilter (si1 ...)
  - messy_global_end moved after first local loop
  - timefilter (si1 ...) called after messy_global_end
- TROPOP: force rerun file (e.g. pblh)

CHANGES by Astrid Kerkweg und Patrick Joeckel:
- mo_transpose.f90: bug fix of very subtle misconception:
  The SAVE-construction to omit the p_bcast, in case
  consecutive fields are in the same representation does not work!
  Reason: The dimensions of local fields are not one-to-one related to the
	  dimensions of the global fields, or in other words, two different
	  (global) representations can yield the same local field dimensions.
	  Example:
	    rank-3 stream (GAUSSIAN) element with klev=1 and
	    rank-2 stream (GAUSSIAN) element
	    result in the same local field dimensions, if
		   (NLON * NLAT) / (NCPUS * NPROMA) == 1
	  If the output sequence contains one of each field following one
	  another, a boundary violation in the gather-routines occurs.

CHANGES by Patrick Joeckel:
- JVAL (messy_jval.f90):
  - pointer assignment in assign_j_xyz_3d is now f90-standard conform for
    non-associated pointers
  - !OPTION! -O nomove for NEC-SX6
  - IR photolysis for HNO4 activated
- PHOTO: IR photolysis for HNO4 activated
- xmessy: -print added to (AMIPII) find commands
- messy_d14co.f90, messy_offlem.f90, messy_onlem.f90:
  bug fix (after strcrack)
- messy_h2o_e5.f90: init with MAX(h2o(:,:,:), 1.0E-40_DP)
- mo_netcdfstream.f90: bug fix in case info%ndim = 0 (SCALAR)
- messy/e5/messy_scav_e5.f90: allocate arrays with (0:ntrac)
- messy/e5/messy_offlem_e5.f90: two more cycle conditions
- messy/src/specific.mk and messy/box/ncregrid/specific.mk:
  messy_ncregrid_netcdf with -Cvsafe on NEC-SX6
- messy_ncregrid_tools_e5.f90: simpler handling of lok with less p_bcasts
- JVAL: IR photolysis for HNO4 activated
- WARNINGS updated
- messy_main_data_e5.f90: next_date added
- messy_main_tools.f90:
  - new subroutines nn_index, bilin_weight
  - new function julian_day
- TRACER:
  - new subroutine full2base_sub
  - bug fix in tracer_init (for tracers with subname)
- new submodel TIMEPOS for handling of 'timepos'-files
  (http://www.megdb.ethz.ch/dbstrategy.php) for model evaluation
  - new: messy_timepos.f90, messy_timepos_e5.f90, timepos.nml
  - modified: messy_main_switch.f90, messy_main_switch_e5.f90,
	      messy_main_control_e5.f90, xmessy

CHANGES by Astrid Kerkweg and Patrick Joeckel:
- TRACER_FAMILY: TYPE-2 tracers

CHANGES by Patrick Joeckel and Peter Hoor:
- MECCA
  - tracdef.tex, gas.spc, gas.eqn: diagnostic tracers Rn_01,10,30 and
    CH3I_01,10,30 (QUANTIFY)

CHANGES by Volker Grewe:
- MECCA: new dignostic tracers ProdO3, LossO3
  in preparation for submodel O3ORIG
  (gas.spc, tracdef.tex, diagtrac.tex)

******************************************************************************

echam5.3.01_messy_1.2b (16 Oct 06)

CHANGES by Katrin Nissen and Klaus Ketelsen:
- Including the radiation code from FUB:
  - modified files: messy_rad4all_e5.f90, rad4all.nml, messy_rad4all_long.f90,
    messy_rad4all_short.f90,
  - new files: messy_rad4all_fubrad_e5.f90, messy_rad4all_fubrad.f90

******************************************************************************

echam5.3.01_messy_1.2 (2 June 06)

CHANGES by Holger Tost:
- SCAV: bug-fixes for aerosol scavenging
- M7: bug-fixes for stabilisation

CHANGES by Patrick Joeckel:
- TRACER_FAMILY: max. number of tracer families increased from 10 to 30
- gm7.nml: lines with eqsam removed and lines with gm7 activated
	   (as requested by Swen Metzger)
- ONLEM: new feature of aircraft NOx with diurnal cycle removed

CHANGES by Astrid Kerkweg and Patrick Joeckel:
- TNUDGE: bug-fix; initialize flux with zero
- RAD4ALL: write amu0m, rdaylm into rerun file
- MECCA (messy_mecca_e5.f90, messy_mecca_vec_e5.f90):
	MERGE statements replaced by MAX statements

******************************************************************************

echam5.3.01_messy_1.1h (1 June 06)

CHANGES by Axel Lauer:
- bug fixes in MADE (core, e5, and nml)
- comments added to offlem.nml

CHANGES by Swen Metzger and Astrid Kerkweg:
- enabled consideration of EQSAM and GM7 in DRYDEP and SEDI

CHANGES by Swen Metzger:
- bug fixes in EQSAM and GM7 (core, e5, and nml)
- added revised box models for EQSAM and GM7
- added required tracer definitions and families (commented) to ptrac.nml
  and tracer.nml
- comments added to indicate inclusion of EQSAM and GM7 (WARNINGS,
  messy_main_control_e5.f90, emdep.nml, scav.nml)

******************************************************************************

echam5.3.01_messy_1.1g (24 May 06)

CHANGES by Patrick Joeckel:
- SCAV (gas.spc): comment syntax corrected (thanks to Rolf Sander)
- box models GM7 and EQSAM removed
- WARNINGS updated
- xmessy: MADE included
- xecham: bug-fix: 'gmake veryclean' is skipped for SX-6 cross compilation
	  in order to save links to vectorized files
- xmecca: (undocumented) message for SX6-cross compilation removed
	  (obsolete, due to change in xecham)
- tracdef.tex: (undocumented) changes in H2SO4 drydep - parameters
	       removed (these are obsolete and misleading,
	       due to the DRYDEP bugfix in echam5.3.01_messy_1.1b)

******************************************************************************

echam5.3.01_messy_1.1f (22 May 06)

CHANGES by Mark Lawrence (mz_ml_...):
- in gas.eqn added the new experimental pathway NO + HO2 -> HNO3,
  currently commented out as an option

CHANGES by Swen Metzger:
- re-implemented box models EQSAM and GM7 (with major 'src'-updates).
  both box-models include run scripts with automatic plot generation.
- re-implemented submodels  EQSAM and GM7 (with major  'e5'-updates)
  - New directories (and everything included):
    - messy/box/gm7
    - messy/box/eqsam
  - New files
    - messy/src/messy_gm7.f90
    - messy/src/messy_eqsam.f90
    - messy/e5/messy_gm7_e5.f90
    - messy/e5/messy_eqsam_e5.f90
    - messy/nml/gm7.nml
    - messy/nml/eqsam.nml
  - modified files: xmessy, WARNINGS, e5/messy_main_control_e5.f90,
      e5/messy_main_data_e5.f90, e5/messy_main_switch_e5.f90,
      src/messy_main_switch.f90
- modifications to PTRAC, added option for output switch (loutput)
- modifications to MECCA
  - gas.eqn/gas.spc: included NH2 reactions (as commented options for
    a future version)
  - tracdef.tex: added new column for loutput (to allow individual
    tracers to be turned off in the output of mecca)
  - tracdef.awk: added loutput

******************************************************************************

echam5.3.01_messy_1.1e (16 May 06)

CHANGES by Andrea Pozzer:
- bug-fix in JVAL for acetone

CHANGES by Christoph Bruehl:
- added option (currently commented out) of IR photolysis for HNO4 in JVAL

******************************************************************************

echam5.3.01_messy_1.1d (12 May 06)

CHANGES by Anne Kubin and Patrick Joeckel:
- new submodel MMFORCE

******************************************************************************

echam5.3.01_messy_1.1c (12 May 06)

CHANGES by Axel Lauer (op_al_...):
- new submodel MADE:
  - box model box/made/* (the command make creates the executable
    made.exe, which can be started without any parameters or namelists
    in the directory box/made)
  - new files: nml/made.nml, e5/messy_made_e5.f90, src/messy_made.f90
  - new emission namelist files in nml/offlem/emis_*.nml:
    emis_BC.nml    ! black carbon
    emis_DMS.nml   ! DMS
    emis_DU.nml    ! mineral dust
    emis_Num.nml   ! particle number concentration
    emis_POM.nml   ! particulate organic matter
    emis_SO2.nml   ! AeroCom SO2 emissions
    emis_SO4.nml   ! primary sulfate (2.5% of AeroCom SO2 emissions)
    emis_SOA.nml   ! secondary organic aerosol
    emis_SS.nml    ! sea salt
  - new emission data files: aerocom2000_bc.nc, aerocom2000_dust.nc,
    aerocom2000_num.nc, aerocom2000_pom.nc, aerocom2000_so2.nc,
    aerocom2000_so4.nc
  - modified files:
    - MESSy: xmessy, e5/messy_main_control_e5.f90,
      e5/messy_main_data_e5.f90, e5/messy_main_switch_e5.f90,
      src/messy_main_switch.f90
    - DRYDEP: e5/messy_drydep_e5.f90
    - SCAV: e5/messy_scav_e5.f90, src/messy_scav_aer.f90,
      src/messy_scav.f90, src/messy_scav_inter.f90,
      box/scav/mechanism/create_scav_auto, box/scav/mechanism/xscav
    - SEDI: e5/messy_sedi_e5.f90

******************************************************************************

echam5.3.01_messy_1.1b (9 May 06)

CHANGES by Patrick Joeckel:
- TRACER:
  - new subroutine full2base_sub
  - bug fix in tracer_init (for tracers with subname)
- xmessy: update for SX6 setup

CHANGES by Benedikt Steil and Patrick Joeckel:
- PSC:
  - set REALZERO = 1.0E-40_dp ON NEC-SX6 and 0.0_dp elsewhere
  - upper boundary of region reduced to 20hPa

CHANGES by Astrid Kerkweg:
- ONLEM: bug fix for 3d/2d
- DRYDEP: bug fix for H2SO4 calculation

CHANGES by Holger Tost:
- M7:
  - m_aerosol_nsol=OFF for insoluble tracers
- SCAV:
  - precipitation LWC corrected
  - coupling to JVAL changed
  - minor updates and bug-fixes

CHANGES by Holger Tost and Patrick Joeckel:
- MECCA:
  - diagnostic tracer (Prod* and Loss*) handling completely revised
    changed files: xmecca, gas.eqn
    new files: diagtrac.tex with list of additional diagnostic tracers
  - bug fix in naming of diagnostic tracers (LossOH, LossHO2)

CHANGES by Patrick Joeckel:
- modules/mo_tpcore.f90: replaced 2x '-wp' by '_wp'
- D14CO submodel included
- CONVECT
  - bug fix in messy_convect.f90 (thanks to Axel Lauer and Holger Tost)

CHANGES by Astrid Kerkweg and Patrick Joeckel:
- ONLEM:
  - 3D online emissions now included
  - type AIRCNOx for diurnal cycle of aircraft emissions implemented
  - bug fix (landfrac) for sea salt emissions
  - bug-fix for NO pulsing

******************************************************************************

echam5.3.01_messy_1.1 (13 Jan 06)

CHANGES by Patrick Joeckel:
- update of WARNINGS

CHANGES by Rolf Sander:
- validate: update

CHANGES by Benedikt Steil:
- mo_exception.f90: bug fix in format-string for NEC-SX6
- MECCA:
  - messy_mecca_vec_e5.f90: force positive results also for solvers
    WITHOUT automatic time stepping
- PSC:
  - messy_psc_e5.f90:
    The code that has been used on the LINUX-Cluster and on the MAC is
    now also used on the SX6.
  - messy_psc.f90: changes for vectorization on NEC-SX6
- RAD4ALL:
  - messy_rad4all.f90 bugfix (from ECHAM5.3.2) for GADS aerosol
  - messy_rad4all_e5.f90: alternative code for NEC-SX6 (vectorization)
  - messy_rad4all_long_mem.f90: !CDIR DUPLICATE deactivated
- JVAL:
  messy_jval.f90:
  - alternative code for NEC-SX6 (vectorization)
- messy/smcl/specific.mk:
  - bug-fix for NEC-SX6 ($(F90DEFS) added)
- messy/echam5/smil/specific.mk:
  - bug-fix for NEC-SX6 ($(F90DEFS) added)
  - new entry for messy_psc_e5.f90 on NEC-SX6

CHANGES by Patrick Joeckel:
- messy_convect_tiedtke_param.f90: bug fix in calculation of cprcon for
  non-MA resolutions
- submodels GM7 and EQSAM removed (according to the decision of the
  group-meeting on Dec 19, 2005)

CHANGES by Astrid Kerkweg:
- DRYDEP, M7, MECCA, ONLEM, SEDI: updated default-namelists

CHANGES by Laurens Ganzeveld:
- EMDEP:
  - messy_emdep_xtsurf_e5: Distinguishing four canopy layers for calculation
    of canopy radiation and VOC emissions
  - messy_emdep_emis.f90: Use of the accumulated precipitation to distinguish
    between dry and wet season in tropics, relevant to soil NO emissions

CHANGES by Holger Tost:
- xmessy: bug fix for amipII-links

******************************************************************************

echam5.3.01_messy_1.0.9 (04 Oct 05)

CHANGES by Astrid Kerkweg:
- MECCA (gas.eqn): additional Diag,C,N labels for diag-equations

CHANGES by Benedikt Steil:
- HETCHEM:
  - messy_hetchem_e5.f90: bug fix for tracer tendency
    calculation in the troposphere
  - messy_hetchem.f90: changes for vectorization
- NCREGRID: alternative code for vectorization (see NCREGRID-CHANGELOG)

CHANGES by Christoph Bruehl:
- PHOTO, JVAL:
  - O2-photolysis rate scaled by 0.95
  - new parameter for continuous solar cycle conditions

CHANGES by Patrick Joeckel:
- xmessy: new option for AMIPII data directory
- mo_sst.f90: automatic reordering of latitudes (from S->N to N->S) for
  sst and sea-ice (AMIPII)
- NCREGRID: bug-fix (see NCREGRID-CHANGELOG)
- mo_grib.f90: memory leak fixed (ouput of SCALAR, ARRAY1D, and COLUMN)

CHANGES by Holger Tost:
- SCAV: new parameterization for scavenging in super-cooled water
- CVTRANS: bug fix for mass conservation
- MECCA (gas.spc): bug fix in notation

******************************************************************************

echam5.3.01_messy_1.0.8 (23 Sep 05)

CHANGES by Patrick Joeckel and Holger Tost:
- config/mh-aix: settings for ECMWF (thanks to Axel Lauer)
- TRACER_PDEF completely revised
- vdiff.f90: cutting of tendencies (force positive definiteness) only
  for positive start values

CHANGES by Benedikt Steil:
- MECCA (messy/mecca/vector/e5/messy_mecca_vec_e5.f90,
  messy/mecca/vector/sedsolve_ros2,3): update for vectorized solvers

******************************************************************************

echam5.3.01_messy_1.0.7 (12 Sep 05)

CHANGES by Patrick Joeckel:
- stepon.f90, iorestart.f90, messy_ncregrid_tool_e5.f90,
  messy_main_control_e5.f90, messy_ncregrid_tools_e5.f90, xmessy:
  restart handling of rgt-event counters renewed
- H2O: tracer definition completed
- new sub-submodel TRACER_PDEF to force positive tracers, i.e., to compensate
  for numerically produced negatives
- TRACER, TRACER_FAMILY:
  - l_family moved to CPL namelist
  - mass diagnostics also for family members
- EDGAR2NC: update (increased string length)
- eval.nml/ptrac.nml: aerosol density of SO4_cs set to 1841.0
  (thanks to S. Metzger)

CHANGES by Rolf Sander:
- MECCA: O3 budgeting added
- messy_mecca_mbl.f90: density calculation corrected

CHANGES by Holger Tost:
- SCAV: bug fix for evaporation
- messy_main_constants_mem.f90:
  - dependent constants re-defined
  - molar mass of water corrected
- CLOUD, CONVECT, messy_main_tools.f90, TROPOP, mo_constants.f90:
  constants used from messy_main_constants_mem.f90
- messy_main_data_e5.f90: lrerun=(ntrac_gp > 0) for pxtems
- MECCA (xmecca), SCAV (xscav):
  force positive results for mecca (solvers with automatic time stepping)
- LNOX: correct output of total NOx production per column

CHANGES by Christoph Bruehl:
- MECCA:
  - gas.eqn: scaling of J_Cl2O2
  - gas.eqn, literat.bib, meccanism.tex, messy_mecca_func.f90:
    update of ClO+ClO reaction coefficient
- JVAL,PHOTO:
  - solar zenith angle for day/night switch (u0lim)
    now at 94.5 degrees (instead of 93.0) to allow for more realistic
    onset of ozone hole
  - vinit set to zero

******************************************************************************

echam5.3.01_messy_1.0.6 (12 Aug 05)

CHANGES by Patrick Joeckel and Christoph Bruehl:
- HETCHEM: calculations of khet_23_S,_24_S,_25_S,_27_S,_28_S,_29_S
  limited to PSC region
- hetchem.nml: i_hyar    = 0.5,350., for H2SO4 climatology

CHANGES by Patrick Joeckel and Astrid Kerkweg:
- correct all &regrid namlists (remove i_lonr where not applicable)

CHANGES by Patrick Joeckel:
- hetchem.nml, psc.nml: updated &regrid-namelist for H2SO4
- NCREGRID: improvement for pre-regridding (see NCREGRID-CHANGELOG)

******************************************************************************

echam5.3.01_messy_1.0.5 (08 Aug 05)

CHANGES by Patrick Joeckel:
- MECCA, EQSAM: bug-fixes in box-models
- HETCHEM, RAD4ALL: WRITE(*,*) only on p_io
- xmessy: 'save' directories for reruns
  are now completely self-consistent
- AIRSEA, DRYDEP, EMDEP, H2O, JVAL, LNOX, MECCA_MBL, OFFLEM, PHOTO,
  PSC, PTRAC, QBO, SEDI, TNUDGE:
  - contnorest=.TRUE. as stream-default
- TNUDGE: bug fix for 'hard nudging' coefficient
- MECCA (messy_mecca_e5.f90, messy_mecca_vec_e5):
  finish, if khet* is/are not available
- messy_main_data_e5.f90:
  - lrerun=.TRUE. as default for messy-stream (for testing)
  - lrerun=.TRUE. for geopoti
- SCAV: bug fix in string parsing (! mz_pj_20050803)
- HETCHEM: switch for H2O coupling
- RAD4ALL:
  - (messy_rad4all.f90): bug-fix;  vertical dimension of pflxs, pflxt
  - (messy_rad4all.f90, messy_rad4all_short.f90): bug-fix;
    CO2-coupling (short-wave radiation) for non-homogeneous CO2 has been
    dependent on decomposition: zcardi=pco2(1,1)
- nc2mc, nc2dxmc: update
- EDGAR2NC: update
- TROPOP: correction in p_bcast(r_press_range_PV(:), p_io)
- OFFLEM, QBO, PTRAC, LNOX, CLOUD, CVTRANS, JVAL, PHOTO, AIRSEA, DRYDEP,
  H2O, HETCHEM, ONLEM, RAD4ALL, SCAV, SEDI, TNUDGE, MECCA_MBL:
  - new_stream(..., lrerun=.false.) to avoid output of empty rerun files
    NOTE: In case a stream element is required in the rerun files, this
    is automatically fixed (i.e., made consistent) in mo_memory_streams.f90
    (SUBROUTINE check_streams).
- NCREGRID: update to version 1.4b (see messy/box/ncregrid/CHANGELOG)

CHANGES by Holger Tost:
- SEDI: create stream elements only for sedimenting aerosol tracers
- SCAV:
   - de-indexing for kpp solver
   - terminate model, in case number of modes is < 4 and local scav-tracers
     are used

CHANGES by Swen Metzger:
- EQSAM, GM7: updates

CHANGES by Laurens Ganzeveld:
- ONLEM: VOC emission calculation with 4 layers

CHANGES by Benedikt Steil:
- messy_mecca_vec_e5.f90: bug-fix in vector-length initialization
- TROPOP:
  - change search algorithm for PV tropopause to lrev = .false.
  - update tropop.nml

******************************************************************************

echam5.3.01_messy_1.0.4 (21 Jul 05)

CHANGES by Patrick Joeckel:
- mo_nudging_buffer.f90: bug-fix (occurs, if NPROCB/=1)
- TROPOP: bug-fix (missing p_bcast)
- zip.sh: exclude mecca-vector files from packing
- Makefile.in: remove temporary mecca-vector files with target 'distclean'

CHANGES by Patrick Joeckel and Christoph Bruehl:
- JVAL, PHOTO: optimization switched off on rs6000 in both specific.mk

CHANGES by Patrick Joeckel and Benedikt Steil:
- RAD4ALL: CO2_pre as 3D stream element
- messy_mecca_e5.f90, messy_rad4all_aero_tanre_e5.f90, messy_rad4all_e5.f90,
  messy_rad4all.f90, messy_rad4all_orbit.f90: some dp added
- TNUDGE: bug-fixes if tracer and/or tropopause is not available

CHANGES by Benedikt Steil:
- MECCA:
  - check_range deactivated (performance !)
  - vectorisation of mecca is added:
    a) new subdirectory named vector in messy/mecca
    b) script xmecca is modified
    c) messy_mecca_e5.f90, modified with dummy subroutine mecca_free_memory
    d) messy_main_control_e5.f90, call to mecca_free_memory is added
    e) messy/src/specific.mk is modified to allow inlining
    f) config/mh-nec, option -pvctl fullmsg is added
    h) locate_f90.sh is used to set the Fortran compiler in the
       vectorization script
- decomp: seddecomp_ros3, seddecomp_ros2 further optimized

CHANGES by Christoph Bruehl:
- PSC: output switches updated

CHANGES by Holger Tost:
- messy_main_data_e5.f90: remove redundant output
- CLOUD, CVTRANS, CONVECT, SCAV:  set output flags

CHANGES by Astrid Kerkweg and Patrick Joeckel:
- TRACER_FAMILY: (stepon.f90, messy_main_tracer_e5.f90,
  messy_main_tracer_family_e5.f90): convert output to tracers instead of
  families + fraction
- DRYDEP: changed units of drydep flux
- ONLEM, DRYDEP, SEDI: set output flags for fluxes

******************************************************************************

echam5.3.01_messy_1.0.3 (14 Jul 05)

CHANGES by Andrea Pozzer, Rolf Sander:
- JVAL:
  - reduced output
  - acetone photolysis calculation speed up

CHANGES by Christoph Bruehl:
- PHOTO: reduced output

CHANGES by Benedikt Steil, Holger Tost:
- PSC:
  - logical scalar replaced by logical array in WHERE statements
  - FORALL loop replaced by DO loop (all architectures, not only SX)

CHANGES by Andrea Pozzer:
- DRYDEP:
   - resistance over snow changed

CHANGES by Patrick Joeckel:
- mo_nudging.f90: bug-fix for snsp=0 (occurs, if NPROCB/=1)

******************************************************************************

echam5.3.01_messy_1.0.2 (11 Jul 05)

CHANGES by Patrick Joeckel, Holger Tost:
- RAD4ALL: bug-fix (pdiga24,25)
- CVTRANS: vector and scalar version distinguished
- TRACER, TRACER_FAMILY (messy_main_tracer_e5.f90): tracer_set_gp_streams
  moved to main_tracer_init_memory(2)
- MECCA
  - removal of indirect indexing for ros3, ros2 re-activated
  - scaling option for ros2 removed
  - tracdef.tex, tracdef.awk: t_med_aerosol%nsol
- TRACER: new switch t_med_aerosol%nsol = ON for soluble aerosol

CHANGES by Patrick Joeckel:
- xmessy*: updates for AIX
- init_decomposition.f90: lfull_m = lnmi .AND. (nprocb /= 1)
- xmessy: bug-fix for USE_PREREGRID_MESSY=.TRUE.
- TRACER_FAMILY (messy_main_control_e5.f90, messy_main_tracer_e5.f90,
  messy_main_tracer_family_e5.f90): bug-fix affecting advection

******************************************************************************

echam5.3.01_messy_1.0.1 (05 Jul 05)

CHANGES by Patrick Joeckel:
- MECCA (tracdef.tex):
  - nintegrate = ntimefilter = default (ON) for LO3s
- messy_main_control_e5.f90, control.f90:
  messy_init_coupling moved before messy_main_read_restart AND
  messy_init_tracer
- TNUDGE: bug-fix for vertical range
- EQSAM:
  - diagnostic output in time loop commented out
  - bug-fix for box model (did not compile)

CHANGES by Patrick Joeckel, Holger Tost, and Benedikt Steil:
- DRYDEP: message improved
- TROPOP: geopot removed from calc_PV
- HETCHEM: bug-fixes

CHANGES by Patrick Joeckel:
- physc.f90: bug-fix (variables initialized)
- prerad.f90: bug-fix (init_diag_radiation needs to be called also if
  l_diagrad = .FALSE., since otherwise diag_rad1 is not ALLOCATED in physc.f90)
- control.f90: NPROMA-lnudge test deactivated
- mo_nudging_constants.f90: nmaxc increased from 80 to 200

CHANGES by Holger Tost and Patrick Joeckel:
- CONVECT:
  - save midlevel convection into stream elements
- LNOX:
  - optional coupling to midlevel convection
  - Grewe-scaling adapted to r_scal_ff
  - new scaling factor r_scal_ff for flash frequency in namelist

CHANGES by Patrick Joeckel:
- config/mh-linx.lf: -DLF added for Lahey/Fujitsu Compiler
- mo_tropopause.f90: bug fixes for uninitialized variables
- updated to echam5.3.01
- TRACER_FAMILY: resetting of tracer attributes (f2t) moved from
  tracer_family_init_memory to tracer_family_init_coupling,
  in order to guarantee correct attributes for tracers AND families
  during initialization phase
- TNUDGE, messy_main_control_e5.f90: tnudge_init_memory for
  flux diagnostics
- H2O: additional switch L_MODINI_QZAV = T to
  MODULATE the 2D INITIAL H2O CLIMATOLOGY WITH Q/Q(zonal av.)

CHANGES by Swen Metzger and Benedikt Steil:
- HETCHEM, GM7, EQSAM:
  - mh-mac: changed default settings for xlf90
  - messy_eqsam.f90: minor changes and adjusted for evaluation run
    (e.g. chlorine activation and coarse mode omitted)
  - messy_eqsam_e5.f90: minor changes and  adjusted for evaluation run and
    added aerosol numbers to stream and an option to omit aerosol
    numbers tracers
  - messy_gm7_e5.f90: minor changes and
    added aerosol numbers to stream and an option to omit aerosol
    numbers tracers
  - messy_hetchem_e5.f90: changes for developer mode and
    added option to read aerosol numbers from streams instead from tracers
  - tracer.nml: tracer families defined for aerosols (EQSAM)

CHANGES by Rolf Sander and Laurens Ganzeveld:
- MECCA: tracdef.tex updated

CHANGES by Patrick Joeckel and Rolf Sander:
 - MECCA, TNUDGE: tracer O3s, LO3s for O3-STE

CHANGES by Patrick Joeckel:
 - ALL SUBMODELS: set modver = 1.1
   PLEASE USE 1.1.n (n=1,2,3,4,...,10,11,12,...) for bugfixes and updates

CHANGES by Andrea Pozzer:
 - bugs fixed for compilation in single procecessor mode (nompi)
 - AIRSEA: airsea.nml improved (you can decide there which tracer to include in
   the process)
 - DRYDEP: land-sea mask coupling introduced in the messy_drydep_e5 in order
   to have only one process of emission/deposition in the ocean
   (the emission are from file....)
 - clean DRYDEP: no needs to include any tracer for calculation;
   completely independent
   (smaller code, less namelist...)

CHANGES by Holger Tost:
- SCAV: update and bug-fixes

CHANGES by Patrick Joeckel and Benedikt Steil:
- JVAL, PHOTO: generalized O3 feedback
- RAD4ALL:
  - removed all double renaming use statements (=> .. =>) to compile
    on Compaq/Alpha
  - forcheck analysis
  - isw_rad4all = 3,4 removed
  - calculation of resolution dependent cloud parameters moved to
    rad4all_set_param (called in rad4all_initialize)
  - rad4all_interf_2 moved to SMCL
  - subsubmodel ORBIT:
    - new rad4all_orbit_read_nml_ctrl (CTRL_ORBIT) in SMCL (called from
      rad4all_initialize -> rad4all_orbit_initialize)
    - rad4all_orbit_global_start in SMIL (called from rad4all_global_start)
- radiation.f90: calculation of rhum_3d removed
- messy_main_data_e5.f90: calculation of relative humidity (rhum_3d) in
  main_data_global_start

CHANGES by Patrick Joeckel:
- RAD4ALL separation into subsubmodels
- messy_rad4all_mem_e5.f90, messy_rad4all_e5.f90, messy.nml:
  lradctl_* removed, since not used
- messy_main_data_e5.f90: tslnew
- messy_rad4all_e5.f90:
  - rad4all_interface_radheat renamed to rad4all_radheat and called from
    messy_main_control_e5 (messy_radheat) without parameters
  - rad4all_radheat renamed to rad4all_radheat_1
  - rad4all_physc renamed to rad4all_radiation
  - tslnew used from messy_main_data_e5
- messy_main_control_e5.f90, physc.f90: new entry point messy_radheat
- physc.f90:
  - unused parameters in USE messy_rad4all_e5 removed
  - overwriting lrad (mo_parameter_switches.f90) moved from physc.f90 to
    messy_rad4all_e5.f90 (rad4all_initialize)
- scan1.f90: use of lrad for radiation diagnostic to enable
  isw_rad4all = 0 (bug-fix)

******************************************************************************

echam5.2.02a_messy_1.0c (19 May 05)

CHANGES by Patrick Joeckel and Rolf Sander:
- consistent file names for submodel RAD4ALL:
  rad_sw  -> rad4all_short
  rad_lon -> rad4all_long

CHANGES by Benedikt Steil:
- new submodel RAD4ALL:
  - new in messy/e5: messy_rad4all_aero_tanre_e5.f90,
    messy_rad4all_e5.f90, messy_rad4all_mem_e5.f90,
    messy_rad4all_o3_lwb_e5.f90, messy_rad4all_o3clim_e5.f90,
    messy_rad4all_orbit_e5.f90, messy_rad4all_solang_e5.f90,
    messy_rad_lon_e5.f90, messy_rad_sw_e5.f90
  - new in messy/src: messy_rad4all.f90, messy_rad4all_aero_gads.f90,
    messy_rad4all_aero_tanre_mem.f90, messy_rad4all_aerosol_mem.f90,
    messy_rad4all_albedo.f90, messy_rad4all_solang.f90,
    messy_rad4all_vsop87.f90, messy_rad_lon.f90, messy_rad_lon_mem.f90,
    messy_rad_sw.f90, messy_rad_sw_mem.f90
  - changed files: physc.f90, radiation.f90, messy_main_control_e5.f90,
    messy_main_switch_e5.f90, messy_main_echam5_e5.f90,
    messy_main_data_e5.f90, messy_main_constants_mem.f90,
    messy_main_switch.f90
  - comment: rad4all replaces the functionality of
    - longwave part: mo_parrrtm.f90, mo_rrta_140gp.f90, mo_rrtab.f90,
      mo_rrtbg2.f90, mo_rrtftr.f90, mo_rrtrf.f90, mo_rrtwn.f90,
      rrtm_gasabs1a_140gp.f90, rrtm_rrtm_140gp.f90, rrtm_rtrn1a_140gp.f90,
      rrtm_setcoef_140gp.f90, rrtm_taumol_140gp.f90, surrta.f90,
      surrtab.f90, surrtbg2.f90, surrtftr.f90, surrtm.f90, surrtpk.f90,
      surrtrf.f90
    - short wave part: mo_sw.f90, mo_sw_clop.f90, susw.f90, sw.f90,
      sw1s.f90, swclr.f90, swde.f90, swni.f90, swr.f90, swtt.f90,
      swtt1.f90, swu.f90
    - aerosols: mo_aero_gads.f90, mo_aero_tanre.f90, mo_aero_gads.f90
    - o3-climatologies: mo_o3_lwb.f90, mo_o3clim.f90
    - namelist-switches: mo_radiation.f90
  - other stuff( like time control of radiation, astronomy, interfaces,
    initializiation etc.: prerad.f90, rad_int.f90, radheat.f90,
    radiation.f90, setrad.f90, parts of mo_time_control.f90, parts of
    mo_geoloc.f90, mo_albedo.f90, m_solang.f90, mo_vsop87.f90

******************************************************************************

echam5.2.02a_messy_1.0b (19 May 05)

CHANGES by Holger Tost:
- SCAV submodule implemented (scripts for the chemical mechanism
  creation no longer part of xmecca, but independent: xscav)
  xscav is found in messy/box/scav/mechanism/
  some changes in xecham, xmecca, messy/mecca/scav/ removed, aqueous.eqn
- PTRAC submodule checked in again
- messy_cvtrans_e5.f90, messy_cvtrans.f90: update of CVTRANS module
- CONVECT: update of CONVECT module (bugfixes only)
- CLOUD:   update of CLOUD module (bugfixes only)
- messy_drydep_e5.f90: bugfix for aerosol tracers but no aerosol module
  running
- some changes in base model (physc.f90, si1,f90, si2.f90, tf2.f90)
  subroutines according to upcoming implementation of updated and
  parallelized mo_diag_tendency (not implemented yet !!!!)
- OFFLEM: Bugfix in messy_offlem_e5.f90 for 3D emission fields
  (according to Patrick Joeckel)
- mo_netcdfstream.f90: Bugfix for tracer%info attributes in the netcdf
  files (according to Patrick Joeckel)

CHANGES by Astrid Kerkweg, Holger Tost:
- buxfixes for restarts with chemistry:
  - messy_main_data_e5.f90: extra streams to rerun files added
  - messy_mecca_e5.f90: in mecca_init_tracer, lstart test added to
    zeroing out negatives loop

******************************************************************************

echam5.2.02a_messy_1.0 (11 Mar 05)

CHANGES by Rolf Sander:
- final buxfixes and tests for version 1.0:
  - messy_main_tracer_mem_e5.f90, messy_convect_tiedtke.f90: bugfixes
  - compiled successfully on:
    - grand (lf95)
    - grand (sx cross compiler)
    - helios
  - the model was run 5 time steps with NPROMA=101, USE_CLOUD=.TRUE.,
    USE_CONVECT=.TRUE., and all other submodels switched off on grand
    (queue) and helios (background)

******************************************************************************

echam5.2.02a_messy_0.9.1j (9 Mar 05)

CHANGES by Swen Metzger:
- bugfixes in EQSAM and GM7

******************************************************************************

echam5.2.02a_messy_0.9.1i (7 Mar 05)

CHANGES by Joachim Buchholz:
- messy_psc.f90: functions mz_psc_het_liq24, mz_psc_het_liq25, p_nat, and T_ice
  now cope with H2O<=0 as input values; supersaturation as requirement for ice
  formation now namelist variable; minor bugfixes and improvements
- messy_psc_e5.f90: minimum value for H2O_t0 now set to 1.0e-10 instead of 0.0;
  broadcast for new namelist variable SupSatIce; minor improvements
- psc.nml: namelist variable SupSatIce for supersaturation as requirement for
  ice formation new in namelist CTRL
- psc_t.nml: tracers are now initialised as in mecca_t_ma.nml

******************************************************************************

echam5.2.02a_messy_0.9.1h (7 Mar 05)

CHANGES by Benedikt Steil
- messy_hetchem_e5.f90:
  - 2 bugs removed: missing broadcasts.
  - 2 additional features added:
    - If H2SO4 tracer is used to calculate aerosol surfaces,
      it is assumed that all H2SO4 is in the aerosol!
      I.e. MECCA is initialized with H2SO4 = 0. for the gas phase.
      H2SO4_liq is added on H2SO4 tracer in local_end, so that the
      mass budget is closed.
    - The climatology of stratospheric H2SO4 can now be used to
      simulate in a simple way a closed sulfur cycle. If a H2SO4
      tracer is present, it's stratospheric part can be nudged
      to observations. This even allows the simulation of vulcanic events.
- messy_hetchem.f90:
  -2 bugs removed in khet29 and khet30

******************************************************************************

echam5.2.02a_messy_0.9.1g (7 Mar 05)

CHANGES by Rolf Sander:
- JVAL 1.0:
  - switch l_solmax in CTRL namelist introduced
  - "correction functions" fc_* removed
  - with namelist settings l_force=T and l_heating=T, the submodels JVAL
    and PHOTO produce binary identical results (both for solar minimum
    and maximum)

CHANGES by Christoph Bruehl:
- PHOTO "Correction functions" for ECHAM4-bias removed in J_NO, J_N2O
  and J_F12; switch in namelist to select solar maximum or solar minimum
  conditions (default solar minimum)
- tracer.nml: set of tracer families for halogens and nitrogen oxides
  for efficient runs in the stratosphere including PSCs (allows ros2 and
  fast PSC reactions)
- xmessyl90: runscript for the 90-level version of M.Giorgetta with
  interactive QBO
- new init file:
  /modeldata/ECHAM5/echam5_ini/echam5.2.02a/T42/T42L90MA_19780101_spec.nc

******************************************************************************

echam5.2.02a_messy_0.9.1f (2 Mar 05)

CHANGES by Rolf Sander:
- JVAL 0.9.4:
  - subroutines jval_cal_* moved out of subroutine jvalues
  - new namelist CTRL switch for acetone quantum yield: qy_ch3coch3
  - jval is now completely independent of any ascii input files

******************************************************************************

echam5.2.02a_messy_0.9.1e (1 Mar 05)

CHANGES by Holger Tost:
- SCAV module removed for official version 1.0
  (unpublished and/or untested, potential bugs,unresolved issues)
- according changes in cvtrans and convect, main_control_e5
- CONVECT: experimental, preliminary convection schemes removed (Zhang,
  Bechtold)
- main_data_e5.f90: cleanup

******************************************************************************

echam5.2.02a_messy_0.9.1d (1 Mar 05)

CHANGES by Astrid Kerkweg:
- messy_main_control_e5.f90, TRACER_FAMILY: changes for saving single tracer
  attributes during initialization phase
- ONLEM 0.9.3 and M7:
  - primary SO4mm emissions for aerosols removed
  - lnox_mbl.nml, offlem_mbl.nml, scav_mbl.nml removed
- DRYDEP: bug fix

CHANGES by Patrick Joeckel:
- WARNINGS updated
- modules removed for official version 1.0
  (unpublished and/or untested, potential bugs)
  ADVECT, ATTILA, D14CO, DRADON, LGTMIX, PTRAC, SCOUT, TNUDGE, TREXP, VISO
- transformation routines removed due to unresolved issues
- H2O: subroutine 'zonal_average' replaced due to unresolved issues in
  transformation routines

******************************************************************************

echam5.2.02a_messy_0.9.1c (28 Jan 05)

CHANGES by Andrea Pozzer:
- AIRSEA:
  - transfer velocity in air for very soluble tracer

******************************************************************************

echam5.2.02a_messy_0.9.1b (12 Jan 05)

CHANGES by Holger Tost:
- SCAV 0.9.5:
  - update of all module parts, several bugfixes
  - forcheck messages removed
- CVTRANS 0.9.3:
  - update of e5 routine (now mass conserving)
  - forchck messages removed
- CLOUD 0.9.3:
  - forchck messages removed
- CONVECT 0.9.3:
  - forchck messages removed

CHANGES by Astrid Kerkweg:
- MECCA:
  - ntrac_gp in call of mecca_mbl_sulfvi_* routines deleted
  - gas.eqn: testfac_Br2Cl, testfac_BrCl2, testfac_Br2Clm: 10^5 => 10^7
  - messy_mecca_func.f90: bugfix for k_3rd added
  - messy_mecca_e5.f90: call mecca_mbl_update_physc moved to the if (mbl) block
    i.e. after mr2c
- ONLEM 0.9.2 and M7:
  - primary SO4mm emissions for aerosols and bugfixes for OC/BC number
    emission
- SEDI:
  - messy_sedi.f90: limit for sed_step in sedi_1 introduced
  - messy_sedi_e5.f90: contnorest added
  - sedi.nml: default changed from 0 to 1
- DRYDEP:
  - messy_drydep_e5.f90: contnorest added
- OFFLEM:
  - offlem_mbl.nml: path changed to relative one
- modules/mo_mpi.f90: SAVE added

******************************************************************************

echam5.2.02a_messy_0.9.1 (17 Dec 04)

CHANGES by Patrick Joeckel and Rolf Sander:
- Makefile.in, messy/util/boxtest: new target 'boxtest'
- *_read_nml_i -> *_read_nml_cpl
- *_read_nml   -> *_read_nml_ctrl
- EMDEP:
  - init_* renamed to MESSy-conform names *_read_nml*
- ONLEM:
  - bugfix in box model: alake
- EQSAM:
  - bugfix in box model: in eqsam_main ipunit removed

CHANGES by Patrick Joeckel:
- mh-linux, mh-alpha, mh-aix: updates for IMK
- messy_main_tracer_e5.f90: bug fix

CHANGES by Holger Tost:
- messy_convect_e5.f90:
  - bug fix for conv_top
  - lrerun=.TRUE. = for conv_type

CHANGES by Patrick Joeckel (thanks to Astrid Kerkweg):
- messy_main_tracer_e5.f90: bug fix
- messy_onlem_e5.f90: bug fix
- messy_main_control_e5.f90: bug fix

CHANGES by Joachim Buchholz:
- dyn.f90: minor improvements
- hdiff.f90: kind parameter dp applied throughout module
- messy_main_transform.f90: kind parameter dp applied throughout module;
  declarations of unused variables removed; INTRINSIC statements; implicit type
  conversions made explicit in subroutine set_ilon_ilat; pointers initialised
  with NULL()
- mo_buffer_fft.f90: kind parameter dp applied throughout module; global SAVE
  statement added
- mo_diag_tendency.f90: vectorisation and parallelisation
- mo_hdiff.f90: kind parameter dp applied throughout module; global SAVE
  statement added
- mo_memory_g1b.f90: global SAVE statement added
- mo_memory_g2b.f90: global SAVE statement added
- mo_nudging_utils.f90: added dimension for pdprs, INTRINSIC statement
- mo_truncation.f90: kind parameter dp applied throughout module; global SAVE
  statement added; explicit type conversion
- physc.f90: array boundary nglon replaced by nproma
- radheat.f90: kind parameter dp applied throughout module; IMPLICIT NONE
  statement added, implicit variable declarations made explicit; removed
  USE mo_start_dataset
- sccd.f90: kind parameter dp applied throughout module
- scctp.f90: new dimension for variable pdprs
- si1.f90: new dimension for variables pdsgs, pdsga; minor improvements
- si2.f90: kind parameter dp applied throughout module; USE new variables from
  mo_diag_tendency
- tf1.f90: kind parameter dp applied throughout module; nproma as array boundary
  for ptfh1, ptfh2; variable nglon removed
- tf2.f90: new dimension for variable pdsga; minor improvements

CHANGES by Christoph Bruehl and Rolf Sander:
- new mecca_t_ma.nml for initialisation of middle atmosphere version
  with family concept, together with new input file including also H2
  and more CFCs.
- corresponding changes in other mecca_t*.nml namelist files

******************************************************************************

echam5.2.02a_messy_0.9v (10 Dec 04)

CHANGES by Holger Tost:
- vdiff.f90: correct start values for time integration scheme

CHANGES by Patrick Joeckel:
- messy_jval.f90: bug-fix in line 9086 (did not compile on IBM)
- new messy_check 08: only mo_memory_base for STREAM access is allowed
  in non-generic messy/e5/*.f90 files
- messy_main_tools_pre_e5.f90:
  - deleted
  - mz_column_loc moved to mo_column.f90
    This should later be replaced by locate_in_decomp
    (messy_main_tools_e5.f90)
- messy_main_mpi_e5.f90: new file for transport of MPI information
- messy_main_echam5_e5.f90: new file for transport of ECHAM5-specific
  functions/subroutines (should be as obsolete as possible !!!)
- messy/e5/*.f90:
  - changing "USE mo_*" to "USE messy_???" (part 2)
  - *_read_nml_e5 renamed to *_read_nml_i
  - jjrow renamed to zjrow

******************************************************************************

echam5.2.02a_messy_0.9u (8 Dec 04)

CHANGES by Patrick Joeckel and Rolf Sander:
- changing "USE mo_*" to "USE messy_main_data" (part 1:
  mo_decomposition, mo_control)

******************************************************************************

echam5.2.02a_messy_0.9t (8 Dec 04)

CHANGES by Patrick Joeckel:
- configure.in, configure: update
- mh-solaris: update
- xmessy: SunOS/strat10 (FUB)
- messy_main_tracer.f90: bugfix in get_tracer (thanks to Astrid Kerkweg)
- TREXP 0.9:
  - new submodel
- SCOUT 0.9.2:
  - messy_scout_e5.f90: use locate_in_decomp from messy_main_tools_e5.f90
- messy_main_tools_e5.f90:
  - new subroutine locate_in_decomp (from messy_scout_e5.f90)
  - new subroutine time_span_s
- messy_main_tools.f90:
  - new subroutine nn_index (moved from messy_scout.f90)
- messy/src/Makefile.in, messy/src/specific.mk
  F90ALL renamed to F90NOR8 to resolve naming conflict with Makefile.in
- generic submodels SWITCH, TOOLS (incl. PRE), TRACER,
  TRACER_FAMILY, messy_attila_tools_e5, NCREGRID:
  - make as much MESSy as possible
  - NOTE: messy_main_transform_e5.f90 NOT due to circular dependency
    with messy_main_tools_e5.f90
- H2O, LGTMIX, LNOX, PTRAC, TNUDGE, QBO, OFFLEM, TROPOP, D14CO, VISO,
  SCOUT, ATTILA, ADVECT:
  - make as much MESSy as possible
- DRADON 0.9.3:
  - make as much MESSy as possible
  - messy_main_control_e5.f90: bug-fix (CALL dradon_vdiff)
- messy_main_control_e5.f90:
  - new call of main_data_initialize
  - messy_main_tools_pre_e5 replaced by messy_main_tools_e5
  - dp et al. used frome messy_main_constants_mem
- messy_main_data_e5.f90:
  - new subroutine main_data_initialize
  - through-USE of most relevant ECHAM5 parameters
  - through-USE of fields from scan_buffer (except for tracer fields)
  - USE mo_memory_gl,   ONLY: q, xl, xi
- convert scan_buffer memory management to stream:
  - mo_sc1.f90: REAL, TARGET, ALLOCATABLE -> REAL(DP), POINTER :: => NULL()
  - mo_scan_buffer.f90:
    - xtte_scb and xtte_a_scb through-USEd from messy_main_tracer_mem_e5
    - SUBROUTINE m_bufsc1 obsolete -> removed
    - REAL, ALLOCATABLE :: -> REAL(DP), POINTER, DIMENSION :: => NULL()
    - SUBROUTINE m_bufscan:
      - new_stream 'scnbuf'
      - ALLOCATE -> add_stream_element
    - SUBROUTINE cleanup_scanbuffer: DEALLOCATE -> NULLIFY
    - SUBROUTINE m_buftrow: '=' -> '=>'
  - scanf1.f90: m_bufscan, m_bufsc1 deactivated
  - mo_memory_streams.f90: m_bufscan called before messy_init_memory
- messy_main_tracer_mem_e5.f90, messy_main_tracer_e5.f90:
  added pointers for tracer, tracer tendencies, etc. for usage in local loop
  NOW ALL TRACER FIELDS CAN BE USED DIRECTLY FROM messy_main_tracer_mem_e5:
  INSIDE LOCAL LOOP:
       USE messy_main_tracer_mem_e5, ONLY: qxtm1, qxt     ! (:,:,:) GP
       USE messy_main_tracer_mem_e5, ONLY: qxtm1_a, qxt_a ! (:,:) LG
  OUTSIDE LOCAL LOOP:
       USE messy_main_tracer_mem_e5, ONLY: xtm1, xt       ! (:,:,:,:) GP
       USE messy_main_tracer_mem_e5, ONLY: qxtm1_a, qxt_a ! (:,:) LG  !!!!
- messy_main_tools_e5.f90:
   - find_next_free_unit copied from mo_filename.f90
   - finish, message USEd from mo_exception
- messy_main_tools_pre in messy_main_tools:
  - messy_convect_e5.f90, messy_cloud_cover.f90, messy_cloud_ori.f90,
    messy_convect_tiedtke.f90:
    messy_main_tools_pre replaced by messy_main_tools
  - messy_main_control_e5.f90:
    messy_main_tools_pre_e5 replaced by messy_main_tools_e5
  - moved init_convect_tables from messy_main_tools_pre.f90 to
    messy_main_tools.f90
  - moved main_tools_initialize from messy_main_tools_pre_e5.f90 to
    messy_main_tools_e5.f90
  - messy_main_tools_pre.f90 removed
- ALL SUBMODELS: mo_doctor/nout removed
- messy_m7_e5.f90, messy_advect_e5.f90, messy_advect_diag_e5:
  - mo_linked_list replaced by mo_memory_base
- messy_cvtrans_e5.f90, messy_onlem_e5.f90,
  messy_emdep_mem_e5.f90, messy_main_tools_e5.f90:
  mo_kind replaced by messy_main_constants_mem
- messy_advect_e5.f90 messy_advect_e5.f90 messy_advect_e5.f90
  messy_advect_e5.f90 messy_advect_e5.f90 messy_attila_e5.f90
  messy_attila_e5.f90 messy_convect_e5.f90 messy_d14co_e5.f90
  messy_emdep_drydep_e5.f90 messy_emdep_emis_e5.f90
  messy_emdep_mem_e5.f90 messy_h2o_e5.f90 messy_lnox_e5.f90
  messy_main_tools_pre_e5.f90 messy_ncregrid_interface.f90
  messy_photo_e5.f90 messy_photo_e5.f90 messy_statatt_e5.f90
  messy_statatt_e5.f90 messy_tropop_e5.f90:
  - mo_constants replaced by messy_main_constatnts_mem
- messy_main_constants_mem.f90: new constants added
- intera/test removed from distribution
- messy_main_tracer_family_e5.f90: bug fix for tracer families after rerun
  (thanks to J. Buchholz and Ch. Bruehl)

CHANGES by Patrick Joeckel and Michael Traub:
- INTERA: spherepack removed due to license issues
  -> configure.in, configure, intera/Makefile.in, mh-linux.lf, mh-aix,
     mh-alpha adapted

******************************************************************************

echam5.2.02a_messy_0.9s (7 Dec 04)

Changes by Benedikt Steil:
- HETCHEM v01a:
  - new submodel
  - concerning the boxmodel, please read WARNINGS

CHANGES by Rolf Sander and Holger Tost:
- messy/util/efchk-sum: list also 2-digit errors/warnings
- include/physctl: TAB deleted

******************************************************************************

echam5.2.02a_messy_0.9r (7 Dec 04)

CHANGES by Holger Tost:
- CLOUD 0.9.2:
  - now works also without CONVECT, conv_type is always 0 without the
    stream element from CONVECT
  - start/end messages in init memory
- SCAV 0.9.4:
  - update of aerosol scavenging, bug fix in nucleation scavenging
  - update of revaporation of aerosols from precipitation
  - update of coupling of gas / aerosol scavenging and precipitation chemsitry
  - implementation of aerosol scavenging by snow/ice
  - new switches in nml: scav_nuc for nucleation scavenging, scav_imp for
    impaction scavenging, scav_l for liquid scavenging, scav_i for
    snow/ice scavenging
- CONVECT 0.9.2:
  - nullify statements eliminated due to variable declaration
  - start/end messages in init memory
  - new stream element for convective snow prodcution
  - adjustments due to scav in convect_tiedtke
- physc:
  - rtype deleted in the ifdef MESSy section after convection
    and moved into a ifndef section before cover
  - use statement for conv_type deleted
- rad_int:
  - zcdnc moved into a ifdef MESSy block to avoid crashes if cloud
    module is not used
- setphys:
  - output concerning convection moved into a ifndef MESSy block
- labrun:
  - changes considering log-file output of cover and cloud

******************************************************************************

echam5.2.02a_messy_0.9q (7 Dec 04)

CHANGES by Rolf Sander and Astrid Kerkweg:
- MECCA 0.9.13:
  - see mecca/CHANGELOG for details

******************************************************************************

echam5.2.02a_messy_0.9p (7 Dec 04)

CHANGES by Astrid Kerkweg:
- DRYDEP 0.9.02:
  - GM7 and EQSAM added
  - xtsurf => surf_para, z0m => drag
- SEDI 0.9.02:
  - GM7 and EQSAM added
  - output of initialized order (sedi_initialize)
  - correction term for volumn integration changed to
    correction term for radius +  Slinn factor
- ONLEM (0.9.1):
  - xtsurf => surf_para
  - unit for OC/BC numberflux added
  - seasalt emission slf + alake >= 0.99 set to 1
    (= non sea fraction)
- M7 (0.9.02):
  - bugfix in vdiff for dust number calculation
  - calculation for aerosol density changed
  - bugfix in emissions tendency calculation

******************************************************************************

echam5.2.02a_messy_0.9o (7 Dec 04)

CHANGES by Andrea Pozzer:
- AIRSEA 0.9.02:
  - easier definition of new tracers
  - bubbles effect introduced by namelist
- JVAL 0.9.3:
  - for CH3COCH3 new quantum yield (on_line calculations)

CHANGES by Rolf Sander:
- JVAL 0.9.3:
  - renamed species PAA, ClNO3, CFCl3, and CF2Cl2 also in jval box model
  - Portland Group's Fortran compiler added to Makefile for jval box model

******************************************************************************

echam5.2.02a_messy_0.9n (7 Dec 04)

CHANGES by Swen Metzger:
- EQSAM 09:
  - new submodel
  - new nml files:
    - messy/nml/onlem_eqsam_min.nml
    - messy/nml/offlem_eqsam_min.nml
  - new input files in /modeldata:
    - /modeldata/ECHAM5/messy/raw/eqsam/README
    - /modeldata/ECHAM5/messy/raw/eqsam/TM3_p07a_1997tavg.nc
    - /modeldata/ECHAM5/messy/raw/eqsam/TM3_p07a_1997tavg.nml
  - added to WARNINGS
- GM7 0.9:
  - new submodel
  - messy/src/specific.mk
  - added to WARNINGS
- M7:
  - boxmodel updated

******************************************************************************

echam5.2.02a_messy_0.9m (7 Dec 04)

CHANGES by Joachim Buchholz:
- PSC 0.9+20041202:
  - box model: file psc.nml replaced by link to ../../messy/nml/psc.nml
  - gas.eqn: PSC reaction #PSC422 activated
  - messy_psc_e5.f90: bugfixes regarding undefined values in N_solid and A_l;
    longname for khet5 corrected
  - messy_psc.f90: default value for maxKhet now 1.0e-13_dp
  - psc.nml: default for maxKhet now 1.0e-13, default for LCalcChem now .true.

******************************************************************************

echam5.2.02a_messy_0.9l (24 Nov 04)

CHANGES by Christian Kurz:
- mh-linux.lf: NETCDFROOT at DLR
- tracer.nml: Cl-Family as example
- tnudge.nml: Cl-Family as example
- xmessy:
  - linux host lx001 at DLR
  - new variable INPUTDIR_ECHAM5_SPEC (default = $INI_HRES) for
    user-defined ECHAM5 initialisation files

CHANGES by Joachim Buchholz:
- TRACER_TFAMILY 0.9.2:
  - messy_main_tracer_family_e5.f90: use of tracer-weights in f2t- and
    t2f-conversions

CHANGES by Patrick Joeckel:
- messy/src/specifik.mk: compilation of jval without -qhot
- sfmakedep.pl.in, Makefile.in:
  included dependency on *.mod-files in messy/src (--modsearch option)
- zip.sh: added -x '*/intera/test/output/?*'
- configure.in, configure, Makefile.in, mh-linux.lf, mh-alpha, mh-aix:
  updated for intera
- intera is now in distribution (subdirectory intera)
- /soft/ECHAM5/sbin: mprenc and mprenc_all for automatic PRE-REGRIDDING
- WARNINGS: updated
- xmessy:
  - copynml() now takes care of required modifications in
    REGRID-namelists in case of USE_PREREGRID=.TRUE.:
    - i_latr, i_lonr deleted
    - :IXF converted to :INT
  - user generated END file re-enabled
- TRACER_TFAMILY 0.9.2:
  - read tracer-weights from namelist
- messy_tropop.f90: new reference
- messy_advect_e5.f90:
  - bug fix if number of tracers < number of PEs (thanks to Holger Tost)
  - 0 replaced by OFF in new_tracer
- messy_main_transform_e5.f90: additional check
- mh-linux.g: bug fix
- xmessy: MP_TASK_AFFINITY settings for AIX according to RZG information

CHANGES by Astrid Kerkweg and Rolf Sander:
- files updated in /modeldata:
  - onlem
  - drydep

******************************************************************************

echam5.2.02a_messy_0.9k (23 Nov 04)

CHANGES by Christoph Bruehl:
- (not documented)

******************************************************************************

echam5.2.02a_messy_0.9j (22 Nov 04)

CHANGES by Andrea Pozzer:
- AIRSEA 0.9-0.1:
  - new submodel

CHANGES by Rolf Sander:
- MECCA 0.9.12:
  - see mecca/CHANGELOG for details
- JVAL 0.9.2:
  - some species renamed for consistency with MECCA:
    PAH      -> PAA    (changed in JVAL)
    ClONO2   -> ClNO3  (changed in JVAL)
    CFC11    -> CFCl3  (changed in JVAL)
    CFC12    -> CF2Cl2 (changed in JVAL)
    ALD  -> CH3CHO     (changed in MECCA)
    ACET -> CH3COCH3   (changed in MECCA)
    MGLO -> CH3COCHO   (changed in MECCA)
  - with lforce=T and l_heating=T, the JVAL submodel output is binary
    identical to that from PHOTO (except for renamed variables)
  - messy_jval_e5.f90:
    - INTRINSIC declarations added
    - CALL p_bcast for lookup table variables deleted
  - messy_jval.f90:
    - attribute PUBLIC for lookup table variables deleted
    - lookup table variables sorted by species, not intervals
    - more data turned from variables into PARAMETERs
    - variables renamed consistent with Landgraf & Crutzen (1998)
    - unused variables deleted
  - box model: subroutine parameter deleted in CALL aerosol_data
- Makefile.in, Makefile: messy/src/*.inc, messy/e5/*.inc,
  messy/mecca/tracdef.tex, and messy/mecca/*.spc added to TAGS
- messy_main_data_e5.f90: meaning and units of cfncl, cfncw, cfnci added
  according to email from lg

CHANGES by Rolf Sander and Holger Tost:
- MECCA 0.9.12 and SCAV 0.9.3: kpp variables SO32m and SO42m renamed to
  SO3mm and SO4mm, respectively in these files: aqueous.eqn,
  messy_mecca_mbl_e5.f90, messy_mecca_kpp_g_mem.f90,
  messy_scav_kpp_g_mem.f90, scav_mbl.nml, scav.nml, messy_scav_e5.f90,
  messy_scav_kpp.f90, messy_scav_inter.f90, messy_scav_auto_inter.f90,
  tracer.nml, scout_mbl.nml

CHANGES by Laurens Ganzeveld:
- new readme file: /modeldata/ECHAM5/messy/raw/emdep/README

******************************************************************************

echam5.2.02a_messy_0.9i (12 Nov 04)

CHANGES by Holger Tost:
- CLOUD: bug-fixes for binary identical results
- specifik.mk: F90R8 for CLOUD (for binary identical results)

******************************************************************************

echam5.2.02a_messy_0.9h (11 Nov 04)

CHANGES by Rolf Sander:
- JVAL 0.9.1:
  - with lforce=T and l_heating=T, the JVAL submodel output is binary
    identical to that from PHOTO
  - temperature profile in box model corrected (bug found by CB)
  - lookup table and aerosol information included in code instead of
    from external file
  - inverted logic in nml switch: l_skip_lg instead of l_lg
  - lps, jval_gp, and jval_lg moved from e5 into core
  - photolysis-rate specific switches lp instead of tracer specific
    switches lj in core
  - new Makefile for box model
- new Makefile for MECCA box model

******************************************************************************

echam5.2.02a_messy_0.9g (11 Nov 04)

CHANGES by Patrick Joeckel:
- config/mh-*: case-constructs for host-specific settings
- PTRAC 0.9.1, DRADON 0.9.2, D14CO 0.9.1, LGTMIX 0.9.1, TNUDGE 0.9.1,
  QBO 0.9.1, TRACER 0.9.1, LNOX 0.9.1, ADVECT 0.9.1, ONLEM
  0.9.1(NO-pulsing !?):
  consistent use of time_step_len for initial cond. and integration
  (use of delta_time in CONVECT, DRYEP, ONLEM, SEDI is OK for accumulated
  fluxes)

CHANGES by Patrick Joeckel and Holger Tost:
- gmass, grvol moved from physc.f90 to messy_main_data.f90 (global_start)

CHANGES by Patrick Joeckel and Joachim Buchholz:
- TRACER_FAMILY 0.9.1: change of concept and bug-fixes

CHANGES by Joachim Buchholz:
- PSC 0.9+20041111:
  - messy_psc.f90: former parameters minKhet, maxKhet, r_min, N_solid_max
    now namelist variables; improved comments; major changes in
    function mz_psc_sed
  - messy_psc_e5.f90: additional optional parameters for calls to
    new_tracer; minor changes
  - psc.nml: new namelist variables in namelist CTRL

******************************************************************************

echam5.2.02a_messy_0.9f (10 Nov 04)

CHANGES by Holger Tost:
- CVTRANS 0.9.1:
  - bug fix of undefined status variable (messy_cvtrans_e5)
  - exchanged comparison of two reals with .eq.
- SCAV 0.9.2:
  - bug fixes for mass conservation
  - some changes for aerosol output field species for output can be
    specified in the out_string_aer in the nml
  - changes of coupling of parameters from cloud module
  - coupling of photolysis rates only gives warning and no longer a
    finish (in case of no stream element found, no photolysis will be
    calculated in droplets
  - bug fix for nucleation aerosol scavenging, now working fine
- CONVECT 0.9.1:
  - some elements of mo_diag_tendency now in convect_e5
  - lookup tables now from messy_main_tools
- CLOUD 0.9.1:
  - new submodel for the calculation of clouds and cloud cover
    changes in the ususal modules
  - gives binary identical results to original ECHAM routines but is
    self consistent
- messy_main_tools_pre_e5.f90:
  - main_tools_initialize for lookup tables
- messy_main_tools_pre.f90:
  - lookup tables for convect, cloud, cover moved here
  - are initialised in main_tool_initialize
- physc:
  - changes due to the new cloud routines, diag_tendency
  - new entry point: messy_radiation
- messy_main_control_e5.f90:
  - new entry point: messy_radiation
- main_data_e5:
  - stream elements from vdiff
  - deleting of messy_scav - stream
- src/iniphy.f90: CALL cuparam and CALL sucloud only ifndef MESSY

******************************************************************************

echam5.2.02a_messy_0.9e (4 Nov 04)

CHANGES by Rolf Sander:
- JVAL: $(F90R8) added in main.mk for box model

CHANGES by Holger Tost:
- messy_main_data_e5.f90: 3 new stream elements
- vdiff.f90, physc.f90
  - (some) local variables converted to stream-pointers
  - MESSY-specific parameters for subroutine calls

CHANGES by Patrick Joeckel:
- messy_main_tracer_family_e5.f90: changes due to forcheck analysis
- mh-solaris: new for SunOS
- configure.in, configure, mh-*: improved checks for MPI-library
- PTRAC: all characteristics now for each tracer individually
- messy_main_data_e5.f90, physc.f90, mo_tmp_buffer.f90:
  press_3d and pressi_3d are now calculated in main_data_global_start
  and therefore available earlier
- TRACER:
   - new CPL-switch for global tracer mass diagnostic
   - global tracer mass diagnostic
- edgar2nc: update
- config/mh-linux.lf: old netCDF version for iodine due to
  problems with gcc version
- mo_tmp_buffer.f90: some ALLOCATABLE arrays converted to POINTER
- messy_main_data_e5.f90: mark converted / unconvertible local variables
- radheat.f90, scan1.f90, dyn.f90, physc.f90:
  (some) local variables converted to stream-pointers
- mo_exception.f90, xmessy: finish for individual PEs (END)
- netcdf90/*.f90: updated to netCDF version 3.6.0b6
- Makefile.in, messy/util/messy_check_all: option verbose

CHANGES by Astrid Kerkweg:
- DRYDEP
   - introduction of diagnostic flux-streams for seasalt
   - ptrac as additional aerosol module included
   - write output into drydep stream (no more into aerosol streams)
   - update dry deposition flux calculation (regard actual xtems value
     and not only xtm1 (xtp1 respectively))
- SEDI
   - introduction of diagnostic flux-streams
   - namelist add
   - include additional sedimentation scheme (1. order)
- M7 update
- ONLEM: mv pls into case 'NO'
- MECCA-MBL:
  - calculate lwc from difference of wetradius and dry radius
    instead of wetradius, only
  - get maximum height for chemistry calculation from tropop

CHANGES by Patrick Joeckel and Astrid Kerkweg:
- SEDI:
  - update 0-order scheme
  - sedi-stream with velocities for all aerosol models and time integral
    of sedimentation loss
  - PTRAC as new pseudo-aerosol model
  - cleanup

CHANGES by Rolf Sander:
- xmecca: bugfix regarding $kppversion

CHANGES by Astrid Kerkweg and Rolf Sander:
- m7 box model: Makefile restructured

******************************************************************************

echam5.2.02a_messy_0.9d (25 Oct 04)

CHANGES by Patrick Joeckel:
- config/mh-*, box models: new netcdf library 3.6.0b6
- messy_main_control_e5.f90, messy_main_switch_e5.90:
  main_initialize renamed to messy_main_switch_initialize
- messy_check_07: testing for STOP statements
- TRACER_FAMILY:
  - bug fix (reset type to FAMILY for families); (thanks to Joachim Buchholz)
  - diagnostic output of tendencies added
- offlem.nml: bug-fixes (FILE=...); (thanks to Joachim Buchholz)
- DRADON: GP-emission method 2 added
- ONLEM, OFFLEM: use constants from messy_main_constants_mem.f90
- new box model: edgar2nc
- messy_main_tracer.f90: bug-fix (thank's to Swen Metzger)
- NCREGRID: update stand-allone and bug-fix in specific.mk
- xmessy:
  - -p option for cp commands deleted; old files on scratch-systems
    will be removed during the model simulation ...!
  - AIX: MP_TASK_AFFINITY=MCM
	 export MP_TASK_AFFINITY
  - allow NOMPI for grand and octopus (untested)

CHANGES by Michael Traub:
- messy_statatt_e5.f90: NINT(NISO_INDEX(il,jl))

CHANGES by Kleareti Tourpali:
- xmessy, mh-linux.lf: monsoon.phys.auth.gr added
- messy_main_data_e5.f90, radheat.f90: shortwave flux flxs and thermal
  flux flxt added
- viso.nml: two tests added (only as comments)

CHANGES by Rolf Sander:
- MECCA version 0.9.12:
  - mecca/boxmodel/Makefile: restructured
  - mecca/latex/literat.bib: reduced to those papers that are needed (with
    extractbib)
  - xmecca: test if correct kpp version and $KPP_HOME are used
- messy/util/validate: gmake validate does not check for changes in
  CHANGELOG anymore, because old CHANGELOG files are not readable anymore
- messy/util/validate: list also 2-digit errors/warnings
- messy/nml/tracer.nml: rename of CH3OO_## -> CH3O2_##
- xecham: hydra deleted

******************************************************************************

echam5.2.02a_messy_0.9c (21 Oct 04)

CHANGES by Holger Tost:
- CVTRANS: removal of stop statements from core routines, exchanged with
  status flag and CALL FINISH in CVTRANS_E5
- CONVECT:
  - cleaning up of the code in CONVECT_E5 (using pointers instead of
    copying variables
  - new scheme BECHTOLD implemented (new files:
    messy_convect_bechtold.f90, messy_convect_bechtold_deep.f90,
    messy_convect_bechtold_param.f90, messy_convect_bechtold_shal.f90,
    messy_convect_mem.f90),  changes in messy_convect_e5,
    messy_convect.f90, convect.nml
    needs further testing by now, not for MESSY_1.0
- SCAV:
  - major revision of all routines(now better mass conserving)
  - coupling of aerosol and gasphase scavenging enabled and accessible
    via namelist (degree of coupling)
  - new ouput choice: basic output or choose a species of KPP mechanism
    and enter it into the string in the namelist and the wet deposition flux
    (snapshot and overall sum) is written in the output
  - new files: messy_scav_inter.f90 , messy_scav_auto_inter.f90
    containing routines that are more or less e5 routines but must be
    in source because of link to convective scav in scav_cvdep called
    by tiedtke_cuflx
  - messy_scav_aqchem.f90 : deleted, routine is in messy_scav.f90
- xmecca: addition of create_scav_auto, a script that makes the
  automatic routine for scav_auto_inter, and call of tracmvscav.awk
  two new files in mecca/scav dir: create_scav_auto and tracmvscav.awk
  (needed for automatic code in the scav routines)
- aqueous.spc: new species HIO3_##, rename of CH3OO_## -> CH3O2_## to be
  more consistent
- aqueous.eqn: rename of CH3OO_## -> CH3O2_## to be more consistent
- xmessy: copying of namelists now with new timestamp
- messy_main_switch_e5: elimintation of requirement If use SCAV and not
  MECCA then finish
- messy/src/specific.mk: scav* deleted

CHANGES by Michael Traub:
- messy_statatt.f90: WRITE UBOUND deleted

CHANGES by Rolf Sander:
- bug fix in messy_check_04
- messy_mecca_mbl_e5.f90: KPP_CH3OO_## renamed to KPP_CH3O2_##

******************************************************************************

echam5.2.02a_messy_0.9b (14 Oct 04)

CHANGES by Joachim Buchholz and Christian Kurz:
- mo_cumulus_flux.f90: bug fix for vertical resolution generalization

CHANGES by Astrid Kerkweg and Patrick Joeckel:
- nc2mc, nc2dxmc: update (-x)
- EMDEP, LNOX, MECCA_MBL, messy_main_tools.f90:
  consistent use of modstr and submodstr
- ONLEM, xmessy: namelists in nml/onlem subdirectory

CHANGES by Patrick Joeckel:
- TROPOP: bug-fix in calculation of boundary layer level index
- noem_3D.nc/.nml is new in /modeldata/.../offlem; offlem.nml
- TNUDGE: nudging of tracers (1st) and families (2nd)
- Makefile.in: messy/nml/*/*.nml added to etags target
- OFFLEM, xmessy: namelists in nml/offlem subdirectory
- tnudge.nml: correction in stream-name
- messy_main_tools.f90: optional parameter submodstr removed

******************************************************************************

echam5.2.02a_messy_0.9 (4 Oct 04)

CHANGES by Rolf Sander:
- mecca/boxmodel/main.mk: bug fix in target link:

CHANGES by Patrick Joeckel:
- netcdf90: updated with netcdf-3.5.1b11+
- NCREGRID v1.3b
- messy/box/ncregrid/specific.mk new
- messy/box/ncregrid/src/Makefile includes ../specific.mk
- messy_attila.f90: '!CDIR NOVECTOR' in attila_count_cells for SX6
- Makefile.in: improved
- DRADON: bug-fix
- xmessy:
  - bc-c1: also for tests in foreground
  - hydra/SCORE removed
- all box-models: unified install, clean, distclean targets
- MECCA, JVAL:
  - Makefile.e: cp -pf instead of mv for executable
  - automatic switch of ASCII/netCDF output for box-model
- MECCA, JVAL, ONLEM, M7 (main.mk): F90FLAGS for PROG-target added ...
- JVAL: box model included for 'gmake box'
- WARNINGS updated
- configure.in: echam5.2.02a_messy0.9
- messy/util/sfmakedepend.pl.in: exclude F*.f* files (taken from Swen Metzger)

******************************************************************************

echam5.2.02a_messy_0.1zl (29 Sep 04)

CHANGES by Rolf Sander:
- messy_mecca_e5.f90: calculation of H2O from humidity corrected
  by a factor of (1.-sphum)
- messy_onlem_e5.f90: bug fix
- emdep.nml: bug fix (found by SW)

******************************************************************************

echam5.2.02a_messy_0.1zk (29 Sep 04)

CHANGES by Rolf Sander and Patrick Joeckel:
- JVAL: works also for Lagrangian tracers

CHANGES by Swen Metzger:
- messy/src/specific.mk, specific.mk: Darwin special
- xmessy: ulimits for Darwin changed

CHANGES by Rolf Sander:
- Makefile.in: m7 box model added

CHANGES by Patrick Joeckel:
- xmessy: update for USE_PREREGRID_MESSY
- TROPOP: search of PV-tropopause can now be limited to vertical
  pressure range
- new submodel QBO (from Marco Giorgetta and Maarten van Aalst)
- onlem.nml: bug fix (found by AK)

******************************************************************************

echam5.2.02a_messy_0.1zj (28 Sep 04)

CHANGES by Michael Traub and Rolf Sander:
- messy_statatt_e5.f90: obsolete, duplicate pointer statatt removed
  (found by SW)

CHANGES by Rolf Sander:
- cleanup of /modeldata:
  - moved to ECHAM5_trash/:
    - photo/haloe_O3.nc, photo/misc/haloe*.dat
    - /modeldata/ECHAM5/messy/raw/emis --> old-emis
    - /modeldata/echam5_ini --> old-echam5_ini
    - /modeldata/ECHAM5/aerosol --> old-aerosol
  - moved to ECHAM5_preliminary:
    - /modeldata/ECHAM5/messy/raw/eqsam
    - /modeldata/ECHAM5/messy/T21
    - /modeldata/ECHAM5/messy/T42
  - files made accessible: "chmod -R ug+rw *"
  - duplicate identical files replaced by links in
    /modeldata/ECHAM5/messy/raw/emdep
- messy_main_tools_pre.f90 is not used and therefore removed
- messy_main_data_e5.f90: "lpost=lpost_messy" added to
  add_stream_reference

******************************************************************************

echam5.2.02a_messy_0.1zi (26 Sep 04)

CHANGES by Rolf Sander:
- new submodel JVAL (based on photo)
  - number of pbl layers for iaer is now a parameter of call photolysis
  - with lforce=T and l_heating=T, the JVAL submodel output is binary
    identical to that from PHOTO
- PHOTO, JVAL, MECCA: all rj_* renamed to j_*
- modver of all submodels set to 0.9 (except for messy_main_constants_mem.f90)

******************************************************************************

echam5.2.02a_messy_0.1zh (25 Sep 04)

CHANGES by Swen Metzger and Laurens Ganzeveld:
- messy_emdep_emis_e5.f90, emdep.nml: use the right latitude parameter
  to calculate fertilizer seasonality, see parameter latitude, that
  replaces the use of jrow+klat), the addition of some of M7 emissions
  switches explicitly in the namelist,+ the removal of all the code to
  read in offline emissions.
- submodels gm7 and eqsam removed
- scale/sedsolve_scale: deal with possibility of a not-proper defined PATH
- mh-mac: changed
- emdep and m7 box models
- emdep: include time dependent switch for emissions (e.g. after 1 day)

CHANGES by Rolf Sander and Patrick Joeckel:
- messy_main_tracer_mem_e5.f90, nml/scout*.nml: tracer stream names
  changed to "tracer_gp" and "tracer_lg"

******************************************************************************

echam5.2.02a_messy_0.1zg (24 Sep 04)

CHANGES by Astrid Kerkweg and Patrick Joeckel:
- messy_attila_tools.f90, DRADON: lagrangian-emission methods 1-4
- SEDI: bug-fix
- OFFLEM:
  - bug fixes for lagrangian emissions
  - /modeldata/ECHAM5/messy/raw/offlem/*.nml: infile-path corrected !
- ONLEM: update (mainly including lagrangian scheme)

CHANGES by Rolf Sander:
- onlem box model:
  - sea-salt emissions (previously in aeroem) added
  - box model now has its own nml file
- aeroem box model: deleted
- xecham: submit to queue on grand with "g" (instead of "o")

******************************************************************************

echam5.2.02a_messy_0.1zf (20 Sep 04)

CHANGES by Astrid Kerkweg and Patrick Joeckel:
- submodel TFAMILY converted to generic sub-submodel TRACER_FAMILY
- messy_check_all: loop over all submodels and messy_check_06 incorporated

******************************************************************************

echam5.2.02a_messy_0.1ze (20 Sep 04)

CHANGES by Rolf Sander:
- submodel aeroem deleted
- submodel emis renamed to offlem

CHANGES by Astrid Kerkweg:
- messy_onlem/messy_aeroem*:
  - combination of these submodels to one
  - NO/O3ice/dust/OC/BC/VOC/CH4 emissions added
  - some generalizing work to make the extension for lagrangian tracers easier.
- messy_m7_e5.f90:
  - init_coupling -> improved output
  - enable OC/BC emission calculation
  - enable DUST  emission calculation
- messy_mecca_e5.f90:
  - .not. lskipkpp added to requirements
  - names of stream containing reaction rates now read in from CPL namelist
- messy_mecca_mbl*.f90:
  - lhrate now read in as CTRL namelist
  - deleted all l_scale_aerosol code

CHANGES by Joachim Buchholz:
- messy_psc_e5.f90: bugfix (HCl changed to HNO3)

******************************************************************************

the next version will be:
echam5.2.02a_messy_0.1zd (16 Sep 04)

CHANGES by Rolf Sander:
- mo_linked_list.90, mo_grib.f90, mo_memory_base.f90: names of output
  streams can now be up to 15 characters long in total (up to 7
  characters for the name of the submodel, plus optionally an underscore
  and up to 7 characters for further info, e.g. the name of the
  subsubmodel)
- messy_attila_e5.f90, messy_convect_e5.f90, messy_cvtrans_e5.f90,
  messy_emdep_emis_e5.f90, messy_m7_e5.f90, messy_mecca_e5.f90,
  messy_mecca_mbl_e5.f90, messy_photo_e5.f90, messy_psc_e5.f90,
  messy_scav_e5.f90, messy_scout_e5.f90, messy_statatt_e5.f90,
  messy_viso_e5.f90: submodels adjusted to the correct stream names
- messy_main_data_e5.f90, scav*.nml: phy_scv renamed to messy_scav
- modstr in MECCA moved from gas.eqn to messy_mecca.f90

******************************************************************************

the next version will be:
echam5.2.02a_messy_0.1zc (16 Sep 04)

CHANGES by Joachim Buchholz:
- psc.nml: new namelist switches NatFormThreshold and LAdvectIceNat; three
  input files replaced by one for H2SO4
- messy_main_control_e5.f90: subroutine call psc_vdiff replaced by subroutine
  call psc_local_start; new subroutine call psc_local_end
- messy_psc.f90: function mz_psc_xH2SO4 removed; subroutine mz_psc_SedStep
  replaced by function mz_psc_SedStep; new functions mz_psc_vel, mz_psc_liq_H2O,
  mz_psc_liq_HCl, mz_psc_liq_HOCl, mz_psc_liq_HOBr; functions mz_psc_phase,
  mz_psc_ice_H2O, mz_psc_nat_HNO3, mz_psc_N_solid, mz_psc_r_solid,
  mz_psc_liq_bH2SO4, mz_psc_liq_bHNO3, mz_psc_lq_partHBr, mz_psc_liq_partHNO3,
  mz_psc_het_liq24, mz_psc_het_liq25, mz_psc_het_liq30, mz_psc_dim_liquid,
  mz_psc_surface_liquid modified
- messy_psc_box.f90: updates following the changes in messy_psc.f90
- messy_psc_e5.f90: updates following the changes in messy_psc.f90; bugfixes;
  tracers HCl_ptcl, HOCl_ptcl, HBr_ptcl, HOBr_ptcl abolished; H2SO4 is now
  directly read in from input file; new subroutine psc_local_end; new stream
  elements A_liq and r_SurfMed

******************************************************************************

echam5.2.02a_messy_0.1zb (31 Aug 04)

CHANGES by Patrick Joeckel:
- messy_advect_diag_e5.f90: bug fix for namelist read of CPL_DIAG
  (thank's to Holger Tost)
- WARNINGS update
- nc2dxmc update
- nc2mc update (includes now Linux-specific post-processing; mc4linux
  is therefeore obsolete)
- messy_statatt_e5.f90: bug fix; t_stream used twice; compilation crashed on
  Compaq/Alpha
- xmessy: measure for Linux and OSF1

CHANGES by Rolf Sander:
- mecca/zipmecca tests for boxmodel/sfmakedepend and not for
  ../util/sfmakedepend.pl anymore
- xmecca uses new kpp version 1.1-f90-alpha12 (with correct precision
  inside MAX() function)

******************************************************************************

echam5.2.02a_messy_0.1za (19 Aug 04)

CHANGES by Rolf Sander:
- aqueous.eqn: bugfix: test_Br2m renamed to testfac_Br2m
- GPL added to all mecca files
- messy_main_data_e5.f90: lrerun=.TRUE. added for wind10_2d because it
  is calculated AFTER subroutine messy_vdiff is called
- aqueous.eqn: "see note" added to LaTeX table for all heterogeneous reactions
- mecca box model: default is ascii output in boxmodel/main.mk
- messy_mecca_box.f90:
  - model start at day 80 (like MOCCA)
  - phsyc output file renamed to messy
  - initial values 0 pmol/mol NO and 40 pmol/mol HCl (like MOCCA)
- xmecca: chemistry selections 23 and 28 changed

******************************************************************************

echam5.2.02a_messy_0.1y (12 Aug 04)

CHANGES by Joachim Buchholz:
- boxmodel psc added in directory messy/box/psc and in Makefile.in
- messy_main_control_e5.f90: call of psc_init_coupling removed
- messy_psc.f90: bugfixes; function psc_read_nml new; functions T_sat, p_sat,
  density1, mz_psc_gas_H2O, mz_psc_gas_HNO3 removed
- messy_psc_e5.f90: bugfixes; new namelist CTRL; subroutine psc_init_coupling
  and use of stream tropop removed; minor improvements
- psc.nml: namelist CTRL with variable LHomNucNAT new; variables TropopStream
  and TropopIndex removed from namelist CPL

Changes by Michael Traub:
- messy/util/inifiles.sh: sh-script for making ECHAM5 initial files with
  intera (currently only OSF1)
 - ATTILA : minor change in the traject mode
 - STATATT: bug fixes and cleaned up
 - messy_main_data_e5: units for zcdh_2d and zsenkf_2d added

CHANGES by Patrick Joeckel:
- xmessy: memory-measure mode on psi (thank's to Joachim Buchholz)
- messy_attila_tools_e5.f90: bug fixes for removing severe memory leaks
- config/mh-linux, config/mh-aix: update of NETCDFROOT at RZG
- mo_netcdfstream.f90: bug-fix to work correctly with no_cycles > 0
- messy_convect_tiedtke_param.f90: T10
- nc2dxmc: new script for generating multi-netCDF descriptor files for the
  new openDX module mc4dx
- nc2mc update
- xmessy: handling of initialization files; start date
  ($START_MONTH can be used in RGTEVENT-namelists for CYCLIC monthly events!)
- attila: T10
- D14CO: lagrange
- messy_tropop_e5.f90: bug-fix for PV-tropopause
- mo_memory_base.f90: get_stream_element_info with status flag
- configure.in, configure: update
- mo_time_control.f90, setdyn.f90, sudif.f90, mo_cumulus_flux.f90,
  mo_cloud.f90, rad_int.f90, mo_ssodrag.f90:
  added T10 for efficient code development
- /modeldata/ECHAM5/echam5_ini/echam5.2.02a/T10

CHANGES by Astrid Kerkweg:
- mo_io.f90: bugfix: fileID only on I/O-pe
	     bugfix: ALLOCATE x1,x2 only on I/O-pe
- aqueous.eqn: remove Sc-label for EQ73-75
- tracdef.tex: add drydeposition for some tracers
- xmecca: add new option for scav+halogens(MBL)
- mecca_mbl_base.f90: accelerate some A/B-EQ
- messy_scav.f90: add some IF-statements for some tracers
		  in concentration calculation
- xmessy: scav_mbl.nml added
- messy_drydep_e5.f90: diagnostic output of drydep-fluxes enabled
- messy_sedi_e5.f90: bugfix for tendency calculation
- messy_main_control_e5.f90: scav_physc and sedi_physc before mecca_physc
- messy_mecca_mbl_e5.f90: enable sea salt ionemissions without clm
- mo_memory_base.f90: maxstr increased

CHANGES by Rolf Sander:
- messy_mecca_box.f90: bug fixes:
  - CALL initialize_kpp_variables without parameters
  - same lengths for all strings in CALL open_nc_file for hrate

******************************************************************************

echam5.2.02a_messy_0.1x (15 July 04)

CHANGES by Christoph Bruehl:
- PHOTO: UV heating rates by O2 and O3 implemented

CHANGES by Patrick Joeckel:
- D14CO: completely revised
- labrun.f90: update of diagnostic output for MESSy
- LGTMIX: update; now flexible mixing layer definition, including
	  constant mixing fraction
- Makefile.in: some "-rm" replaced by "rm"

******************************************************************************

echam5.2.02a_messy_0.1w (15 July 04)

CHANGES by Rolf Sander:
- xmecca: integrator (ros2, ros3,...) is determined earlier and "scale"
  is only offered for ros2-lin and ros2-log
- mecca box model: changed links (mecca/boxmodel is now the real
  directory and box/mecca is just a link to it)
- eqn2tex.awk: no error message if reference for back reaction of
  equilibrium is missing (info is stored with the forward reaction)

CHANGES by Holger Tost and Rolf Sander:
- xecham: new option to run xmecca twice (for mecca and scav)
- xmecca: H2O_l (and other *_l) are now always in species file (not only
  for scav)

CHANGES by Holger Tost:
- SCAV module:
  - several bugfixes, concerning liquid water content and pH calculation
  - cleaning up of the code (elimination of unused variables)
  - better documentation of the code
  - renaming of messy_scav_liqcoeff.f90 to messy_scav_base.f90
  - another option for transfer reaction rates following Schwartz
    (changes in messy_scav_liqcoeff.f90, namelist, read_nml)
  - correct and consistent use of the NSCAV switch (required changes in
    tracdef.tex), moving of scav - parameter - setting from
    scav_new_tracer to scav_init_coupling
  - scavenging of acetone enabled (changes in aqueous.eqn, aqueous.spc)
  - aerosol scavenging rewritten:
    (formerly in messy_scav.f90 now in new file: messy_scav_aer.f90)
    - option 1: constant scav_values as taken from P.Stier
    - option 2: radius dependent online calculated parameters for
    impaction scavenging (from literature) and nucleation scavenging
    (estimated from observations from literature)
- CONVECT, CVTRANS modules: conv_cover renamed to cv_cover

******************************************************************************

echam5.2.02a_messy_0.1v (14 Jul 04)

CHANGES by Laurens Ganzeveld:
- messy_emdep_xtsurf.f90: introduced the use of the water aerodynamic resistance
  and friction velocity to calculate the aerosol dry deposition velocity over
  water surfaces. This has been done to avoid the calculation of large values
  along the coastline.
- Some of the defined constants (zAS, zAL, collecter size) have been changed.
- messy_emdep_emis.f90: some changes in the calculation of the pulse and its
  effect on the NO emissions dependent on the defined switch
- in the subroutine emdep_emis_vdiff the online emission flux (emisflux) is
  reset to zero. This must be done to avoid the accumulation of sea-salt (and
  other) emissions.
- the switch ndrydep, which was normally set to 2 for using the 'big leaf' dry
  deposition code is now default set to ON/OFF.
- Not only for SO2, bit also for NO and CO, 3-D emission input files are
  available to distribute the emissions over the lower two levels. The surface
  emissions of NOx are now in the form of NO and not NO2. However, the
  aircraft emissions are now in the form of NO2 and not anymore in the form of
  NO. This is done since both emissions cannot be included yet in the same
  form. This requires some restructuring of the code to read in the off-line
  emissions.

CHANGES by Astrid Kerkweg:
- drydep and tracdef.tex: updated to ndrydep is ON/OFF instead of 0/1/2
- mecca(_mbl): scaling of aerosol tracer included
- mecca: calculate tendencies from zmr at the very beginning (before all changes
	in mecca(_mbl)
- mecca_mbl: KPP_Nap_* changed to idt_Nap_*

******************************************************************************

echam5.2.02a_messy_0.1u (7 Jul 04)

CHANGES by Astrid Kerkweg and Rolf Sander:
- aeroem: slm replaced by slf
- mecca:
 - initialize_kpp_variables does not define dt anymore
 - kpp_integrate defines dt every time step
 - lnox: stream diagLNOx has contnorest=.true.

CHANGES by Astrid Kerkweg:
- xmecca: options for mbl chemistry added
- messy_mecca_mbl_base.f90 and mecca/aqueous.eqn : testfac_* for all
  acid/base equilibria added
- messy_mecca_mbl_e5.f90: bugfix for emission calculation if l_tendency
	extended for the use of emdep or aeroem emissions
- mecca/integr/ros3.k: set stepmin =1.e-37
- messy_m7_e5.f90: bugfix in m7_vdiff

CHANGES by Patrick Joeckel and Astrid Kerkweg:
- emis.nml update for SO2 and DMS in /modeldata
- EMIS: update (fullname of tracer is always used) and a lot of bug-fixes !!!
- messy_ncregrid_tools_e5.f90: bug fix in SUBROUTINE
  RGTOOL_E5_READ_NCFILE (allocation of global field
  (not scattered))

******************************************************************************

echam5.2.02a_messy_0.1t (5 Jul 04)

CHANGES by Benedikt Steil:
- mass conservation is now independent of changes in gas.eqn and gas.spc .
  exceptions:
  a) gas.eqn: N2O  + O1D      = 2 NO
	      NO   + N        = O3P + N2
	      NO2  + N        = N2 + O2
  have to look like that, because sed in
  ./messy/mecca/scale/sedcopy_scale is looking for these expressions.
  So if you intend to beautify the above reactions, please beautify
  also ./messy/mecca/scale/sedcopy_scale!!!
  b) ./messy/mecca/scale/gas.spc_scale must be changed if you introduce
  a new species in ./messy/mecca/gas.spc, see README!!!!

******************************************************************************

echam5.2.02a_messy_0.1s (5 Jul 04)

Changes by Joachim Buchholz:
- messy_psc.f90:
  - function mz_psc_xH2SO4: new cutoff values for sigma: 0.05 <= rsigma <= 30.0
  - function mz_psc_dim_liquid: radmean=rm * exp(0.5_dp * log(s)**2) instead of
    radmean=rm * exp(0.05_dp * log(s)**2)
  - function mz_psc_surface_liquid: expects now mean radius as third dummy
    parameter instead of mode radius
  - function mz_psc_sed: bugfix and cutoff of negative input values
- messy_psc_e5.f90:
  - function psc_vdiff: northern psc region border changed from 55 to 45 degree
    north
  - function psc_vdiff: lower psc region cutoff value changed from 25000.0 Pa
    to 18000.0 Pa
  - function psc_physc: solid particle number density N_s0 changed from
    0.05E6 to 0.001E6
  - function psc_physc: liquid particle number density N_l0 changed from 50.0E6
    to 10.0E6
  - function psc_physc: gas phase depletion by water uptake in liquid is now
    considered
  - function psc_physc: preprocessor directive "if defined(_rs6000)" removed
    after compiler update for rs6000
  - function psc_physc: now qte, xlte, and xite from mo_sc1 are used instead of
    qte_scb, xlte_scb, and xite_scb from mo_scan_buffer

Changes by Holger Tost:
- physc.f90, vdiff.f90: xtte now directly from mo_sc1 in vdiff
			(Note: This 'fix' is only required, since vdiff
			 is no Fortran90 Module !!!)

Changes by Michael Traub:
- VISO:
  - number of levels to skip from the top of atmosphere and the surface,
    and also the search direction (surface-top/top-surface)
    to look for iso-surfaces can be set via nml
- TROPOP:
  - absolute value of Potential Vorticity (i.e., positive in the SH)
  - skipping of level '1' and 'nlev' of PV field for searching index
    of iso-surface
- rad_int.f90:
  - adding parameter zinhomi for case(42) and nlev >= 39
    because of zero values
- messy_ncregrid_mpi.f90: bug fix

CHANGES by Patrick Joeckel:
- nc2mc: update (now one version for grand and helios ...)
- efchk: use dirname instead of path
- EMIS: multi-level emissions (Nx2D) included
- LNOX: completely updated (thank's to Holger Tost and Laurens Ganzeveld)
- BUGFIX_MZ updated
- README_MZ renamed to README_MESSY
- WARNINGS updated
- Makefile.in: workaround for updated linker on IBM/AIX
- TROPOP: climatological tropopause added
- TNUDGE: climatological tropopause is now default for tracer nudging at
	  the tropopause

******************************************************************************

echam5.2.02a_messy_0.1r (26 May 04)

CHANGES by Swen Metzger:
- messy_eqsam.f90, messy_eqsam_e5.f90, eqsam.nml:
  - new tracer interface to define tracers via namelist
  - new and consistent stream definition of the wet and dry radius,
    density and sigmas of the aerosol. Name can be defined in the
    coupling namelist to be consistent with other submodels
    (e.g. scav, emdep, eqsam, gm7).
  - code cleaned up.
- messy_gm7.f90, messy_gm7_e5.f90: code cleaned up

CHANGES by Astrid Kerkweg and Rolf Sander:
- xecham improvement for grand and octopus (jobloc and jobkill)

CHANGES by Holger Tost:
- SCAV module:
   - radius dependent aerosol scavenging implemented (the fixed
     parameter used by P.Stier no longer used)
     required changes in messy_scav_e5.f90 (scav_physc, scav_convec,
     scav_init_coupling) and messy_scav.f90 (new functions and routines
     and changes in scav_cvdep)
   - distinction of effective aerosol radius for aerosol numbers and masses
   - scavenging now available for halogen gasphase species
- xmecca:
   - new choice for scavenging: all reactions or all reactions without
     halogenes
- aqueous.eqn:
   - transfer/diss reactions for HI and HIO3 use k_exf
   - several halogen reactions labeled with Sc
- CVTRANS module:
   - further use of _dp, making the code more positive definite due to
     machine precision, changing the max value of fle, limiting the
     updraft mass flux to 100 g m-2 s-1 (messy_cvtrans.f90)
   - output of negative species reduced, now only if the negative values
     are produced in the module but have positive input values

******************************************************************************

echam5.2.02a_messy_0.1q (26 May 04)

CHANGES by Benedikt Steil:
- xmecca to allow the choice of strict mass conservation
- mecca/integr/ros2-log10.k added
- a new subdirectory mecca/scale containing the files needed for the
  mass conservation
- README file in directory scale describing the mass conservation
- include in SUBROUTINE mr2c in messy_mecca_e5.f90 has been shifted

CHANGES by Astrid Kerkweg and Rolf Sander:
- update of mecca box model, see mecca/CHANGELOG for details

******************************************************************************

echam5.2.02a_messy_0.1p (25 May 04)

CHANGES by Astrid Kerkweg:
- messy_ncregrid_tools_e5.f90: change numbering of regrid events from n to i
- messy_mecca_mbl_e5.f90/mecca.nml: adopt code to different emission modules
- messy_mecca_mbl_e5.f90/messy_m7_e5.f90: change SVI coupling method
- messy_drydep_e5.f90/messy_sedi_e5.f90: improved error message for tracers
  from unknown aerosol modules
- messy_mecca_e5.f90: updates to mecca_mbl calls
- messy_mecca_mbl.f90 / mecca/aqueous.eqn: factor xaer(##) moved from
  eqn-File to rate calculation for k_exf and k_exb
- messy_sedi.f90: bugfix
- messy_main_control_e5.f90/messy_onlem_e5.f90: call for onlem_init_coupling
  added

CHANGES by Christoph Bruehl:
- photo:
  - Ly-alpha-photolysis of CO2 added
  - init-coupling: bugfix for O3-pointer

CHANGES by Holger Tost:
- convect.nml: default is now convparam = 1

CHANGES by Patrick Joeckel:
- ATTILA: simplified and cleaned up

CHANGES by Rolf Sander:
- chemical mechanism recreated with xmecca (necessary due to
  incompatibility with older code)
- tracdef.tex: KH(SO2) = 1.2 M/atm added
- aeroem: sea salt emissions according to Monahan added: l_seasalt_monahan

******************************************************************************

echam5.2.02a_messy_0.1o (20 May 04)

CHANGES by Laurens Ganzeveld:
- EMDEP module: rewritten such that it is MESSy conform:
  - emdep_e5: a subroutine emdep_init_coupling has been inclued to extract
    some of the aerosol properties needed for emissions as well as aerosol
    dry deposition, from the aerosol streams. The aerosol stream being used
    and the parameters being extracted from the streams is defined in an
    the emdep CPL in the emdep namelists.
  - emdep_emis_e5 has been splitted in an emdep_emis_e5 and emdep_emis, with
    the latter containing a selection of subroutines that can be used in
    echam5 as well as a boxmodel.
    The routine has been modified to read in also 3-D emission fluxes given
    in molecules m-2 s-1 (SO2), NOTE the difference in the namelist.
    In addition, the initialization of the soil-biogenic NO emission classes
    has been modified with changes in the emdep namelist.
  - emdep_xtsurf_e5 has been splitted in an emdep_xtsurf_e5 and emdep_xtsurf,
    with the latter containing the subroutines for the online calculations of
    big leaf gaseous and aerosol phase dry deposition velocities. Since the
    aerosol dry deposition stream needs information on aerosol properties, its
    initialization is moved to emdep_e5 in the emdep_init_coupling. In addition
    some of the settings of the switches for aerosol dry deposition are moved
    to that subroutine. For diagnostics the dry deposition flux stream has been
    added (consistent with vd_bigl), which value is assigned its values in
    messy_emdep_drydep_e5. The SO2 dry deposition is included by setting the
    required parameters in tracdef.tex.
  - emdep_xtsurf_e5: the routine to calculate the aerodynamic resistance is
    called whenever or l_xtsurf_vdbl or l_xtsurf_vdaer since both need
    information on turbulence properties.
  - The surface roughness is now calculated from the drag coefficient, which is
    being read in instead of z0m. Consequently the emdep namelist has changed
    slightly, and a new input file has been produced. Note that also the name of
    the read-in forest fraction has changed!
  - emdep_drydep_e5: the already mentioned dry deposition flux is now assigned
    to the stream ddflux for diagnostics. In addition, the calculation of the
    dry deposition flux is slightly modified using not pxtm1 but the
    concentration corrected for the pxtte including the emission tendency. This
    is especially relevant for species for which emissions as well as dry
    deposition occurs (SO2)
  - emdep_emis: the pulsing routine has been rewritten using streams to store
    the information on the rain history. The routine can be used from now on.
  - emdep_xtsurf: the aerosol dry deposition code has changed a lot. Be carefull
    to only use the non-integrating calculations (lvd_integrated=.false.). The
    integrating calculations have still to be checked!

******************************************************************************

echam5.2.02a_messy_0.1n (20 May 04)

CHANGES by Michael Traub;
- STATATT : now MESSy-conform
- ATTILA  : bug fixes in TRAJEC MODE in case of rerun

CHANGES by Patrick Joeckel:
- bug fixes in messy_main_tracer_e5.f90 and messy_main_tracer.f90
  (thank's to Astrid Kerkweg)

CHANGES by Christoph Bruehl:
- mecca_t_ma.nml: updated

******************************************************************************

echam5.2.02a_messy_0.1m (17 May 04)

CHANGES by Holger Tost:
- SCAV module:
  - update of scav code (scav_cvdep) in messy_scav.f90
  - elimintation of not used RGT_EVENT calls in messy_scav_e5.f90
  - removing time inconsistency in scav_convec with temperature now
    using tm1, tte from mo_memory_g1a, mo_sc1  (messy_scav_e5.f90)
  - removing time inconsistency in scav_cvdep with temperature by adding
    an additional parameter to the parameter list (messy_scav.f90)
  - implemetation of new feature: accessable via namelist:
    scav_easy: whenever lwc higher than threshold value than a fixed (estimated)
    precentage of a species is scavenged and entered the wet deposition
    flux. This does not call a kpp routine and is therefor much
    faster, but propably not suitable for a real integration run
- messy_main_data_e5.f90:
  - longnames and units for qtec, ilab, pqhfla added
- physc.f90:
  - used and added switch USE_Convect to determine loconv
- CVTRANS module:
  - kproma loop changed to loop in the lowest layer for better
    vectorization (messy_cvtrans_e5.f90)
- CONVECT module:
  - change in call statement for scav_cvdep (as described above)
  - new subsubmodule: Convection scheme of Zhang/Hack with two versions
    of cloud water treatment implemented
    accessible via namelist (conv_param = 4 in CTRL and alterconv in CTRL_Zhang)

CHANGES by Patrick Joeckel:
- configure.in/configure: update with more macros and less sh-commands
- mh-*: -l removed from blas and lapack
- xmessy: added '-p' option to all cp commands
- ONLEM, AEROEM, MECCA: main.mk: F%.f90 files excluded from SRCS
- mo_memory_base.f90: iktrac=4 for 4D-FOURIER stream elements removed
- TFAMILY: another bug-fix (thank's to Astrid Kerkweg)
- messy_ncregrid_tools_e5.f90: bug fix (thank's to Laurens Ganzeveld)

******************************************************************************

echam5.2.02a_messy_0.1l (17 May 04)

CHANGES by Joachim Bucholz
- cloud.f90: bugfix in the psc module dependent part; use of kind parameter dp
  improved; variable declarations rdcpd, zbb, zdskewcor, zdthdp, zdvarcor,
  zracc, zskewold, and zvarold removed; INTRINSIC statement updated
- dyn.f90: kind parameter dp applied throughout module; nproma introduced in
  if constructs which depend on ltdiag
- messy_main_control.f90: call psc_global_start added
- messy_psc.f90: psc submodel internal improvements and bugfixes
- messy_psc_e5.f90: psc submodel internal improvements and bugfixes
- mo_cloud.f90: kind parameter dp applied throughout module
- mo_diag_tendency.f90: kind parameter dp applied throughout module; INTRINSIC
  statements in DIAG_Init and DIAG_Write; SAVE attributes for pdovor, pdodiv,
  pdotep, ptfh1, ptfh2
- mo_fft.f90: kind parameter dp applied throughout module; trig and nfax got
  SAVE attributes
- mo_geoloc.f90: kind parameter dp applied throughout module, wp replaced by dp
- mo_hyb.f90: kind parameter dp applied throughout module
- mo_legendre.f90: pnmd, anmd, rnmd got SAVE attributes; kind parameter dp
  applied throughout module
- mo_scan_buffer.f90: kind parameter dp applied throughout module
- mo_semi_impl.f90: kind parameter dp applied throughout module; global SAVE
  statement added
- mo_transpose.f90: kind parameter dp applied throughout module
- mo_truncation.f90: nmp and nnp got SAVE attributes
- physc.f90: use of kind parameter dp improved; update of EXTERNAL and
  INTERNAL statement
- psc.nml: rgtevents namelist added
- si1.f90: kind parameter dp applied throughout module; nproma introduced in if
  constructs which depend on ltdiag; implicit none statement added in subroutine
  si1_extended_const
- tf2.f90: kind parameter dp applied throughout module; nproma introduced in
  if constructs which depend on ltdiag

******************************************************************************

echam5.2.02a_messy_0.1k (13 May 04)

CHANGES by Rolf Sander:
- xecham should now also work on grand (untested)
- *.dat files excluded from gmake zip
- update of mecca chemistry, see mecca/CHANGELOG for details
- messy/src/specific.mk: mecca files deleted (mecca core files can now
  be compiled without "-r8")
- "gmake zipall" and "gmake zip1r" call scripts in messy/util
- tracdef.tex: molar masses for gas-phase species added (except for
  hydrocarbons >= C_2)

******************************************************************************

echam5.2.02a_messy_0.1j (12 May 04)

CHANGES by  Patrick Joeckel:
- messy_main_control_e5.f90: call messy_advect_initialize added
  (thank's to Holger Tost)

CHANGES by Astrid Kerkweg and Patrick Joeckel:
- TFAMILY: a lot of bug fixes for usage of the new tracer module(s)
- scan1.f90: use nintegrate in timefilter
- messy_main_control_e5.f90: new call to main_tracer_init_tracer
- physc.f90: loconv set to USE_CONVECT for MESSy
- messy_main_tracer_e5.f90: improved diagnostic output
- mo_sc1.f90, mo_scan_buffer.f90:
     POINTER xtte(_a) => xtte_scb(:,:,:,jrow)
  instead of
     ALLOCATABLE xtte(_a)(:,:,:) = xtte_scb(:,:,:,jrow)
- messy_main_tracer.f90: bug fix in subroutine get_tracer
  (thank's to Christoph Bruehl)
- TRACER: number_advect now calculated in ADVECTION-routines

******************************************************************************

echam5.2.02a_messy_0.1i (12 May 04)

CHANGES by Swen Metzger:
- gm7 and eqsam now messy conform.
  - new tracer interface to define tracers via namelist
  - new and consistent stream definition of the wet and dry radius,
    density and sigmas of the aerosol. Name can be defined in the
    coupling namelist to be consistent with other submodels
    (e.g. scav, emdep, eqsam, gm7).
  - code cleaned up.
  - files deleted and content merged:
    - messy_gm7_mem.f90      => messy_gm7.f90
    - messy_gm7_mem_e5.f90   => messy_gm7_e5.f90
    - messy_gm7_nucl.f90     => messy_gm7.f90
    - messy_gm7_extfunc.f90
    - messy_eqsam_mem.f90      => messy_eqsam.f90
    - messy_eqsam_mem_e5.f90   => messy_eqsam_e5.f90
- xmecca:
  added option 17 (Minimum chemistry + S for Gas/Aerosol Partitioning)
  set wanted17  = "Tr && G && \!C  && \!Cl && \!Br && \!I"
- configure.in: 'messy/run/xmessy' -> 'messy/xmessy'
- mh-mac: options modified

******************************************************************************

echam5.2.02a_messy_0.1h (6 May 04)

CHANGES by Rolf Sander:
- xmecca: change to kppversion 1.1-f90-alpha11

CHANGES by Patrick Joeckel:
- configure.in, Makefile.in: bug-fix (Fortran77 compiler FC (used for blas
  and lapack) is now exported correctly: if FC is empty it is set to F90;
  FFLAGS, however, is NOT set to F90FLAGS, since some compilers need
  special flags for f77-code/format
- Makefile.in:
  - exclude F*.f* for target zip
  - gmake clean also removes F*.f, F*.f90, and i.*.L in LIBSRCS,
    SRCDIRS, and BOXDIRS
- messy/src/Makefile.in: SRCS  := $(filter-out F%.f90, $(SRCS0))
- mo_memory_base.f90: set iktrac=4 for 4D-FOURIER stream elements
- messy_emis.f90: workaround for IBM-AIX (thank's to Swen Metzger)

******************************************************************************

echam5.2.02a_messy_0.1g (4 May 04)

CHANGES by Rolf Sander:
- */Makefile.in, */Makefile.e, */Makefile, */main.mk, xmessy,
  mecca/xbox: executable files renamed to *.exe
- gmake zip now calls the sh script messy/util/zip.sh and it does not
  include *.exe files.
- doubles and triples of rate constants for PSC module are combined, and
  pseudo-species NAT, ICE, and LIQ are removed
- xmecca: MBL with both sulfate and sea salt aerosol add to $wanted:
  "Tr && !C && !Ara"
- onlem: emission switch n_dms = -1,0,1,2 is read from namelist
- util/validate: new command line parameter "ALL" to check files of all users
- xbox: change boxmodel to mecca.exe

CHANGES by Astrid Kerkweg:
- messy_mecca_mbl_e5.f90_vdiff: factor 1e-3 deleted
- messy_mecca_mbl_e5.f90, messy_drydep_e5.f90, messy_m7_e5.f90:
  NAMELIST moved to module header (to avoid forcheck error: "a
  private object must not be placed in a public namelist" )
- messy_drydep.o und messy_m7.o deleted in specific.mk
- mecca/tracdef.tex : delete coarse mode aerosol initial values
- messy_m7_e5.f90: probability to use aeroem emissions added
- messy_main_control_e5.f90: in call from vdiff: for MECCA "USE_GM7"
  control statement deleted
- messy_mecca_e5.f90: cmass deleted
  lmbl for C(:) = 0. in mr2c added
- messy_mecca_mbl_e5.f90: switch l_calc_emis added
  new calculation of emissions of aerosol ions
  calculation of lwc: bugfix
- mecca/aqueous.eqn: two labels corrected
  cvfac added for Hp + SO32m equilibrium
- messy_sedi.f90: bugfix pdz <-> pdp

******************************************************************************

echam5.2.02a_messy_0.1f (3 May 04)

CHANGES by Patrick Joeckel:
- messy_tfamily_e5.f90: for faster compilation:
  - WHERE-constructs replaced by DO-loops
  - reduced maximal number of families and tracers/family
- scan1.f90: call messy_local_end moved directly after gpc
  for time filter conformity
- messy_main_control_e5.f90, TNUDGE: update and bugfix (thank's to Holger Tost)
- xmessy can also be used if ./configure --disable-MESSy
  (see WARNINGS)
- mchlog repaired (works also with filelists (wildcards))
- gmake -f Makefile.in repaired
- messy_emis_e5.f90: bug fix

CHANGES by Holger Tost and Patrick Joeckel:
- messy_scav_e5.f90: rgtevents removed

******************************************************************************

echam5.2.02a_messy_0.1e (22 Apr 04)

CHANGES by Holger Tost and Patrick Joeckel:
- ATTILA, LNOX: convection parameters updated to CONVECT
- src/cu*f90: '#if(n)def MESSY' removed

CHANGES by Rolf Sander:
- reduce /modeldata/ECHAM5/messy/raw/onlem/seawater_DMS.nc to seawater
  data
- messy/src/specific.mk: r8 rule for aeroem removed

CHANGES by Holger Tost:
- SCAV module:
  - using coupling namelist and coupling routine for eliminating not
    messy conform use statements and use statements of messy_main_data
  - moving scav_cvdep into core (is used by messy_convect_tiedtke.f90)
- CVTRANS module:
  - using coupling maelist and coupling routine for eliminating not
    messy conform use statements and use statements of messy_main_data
  - elimination of cvtrans_mem.f90 and transferring information to
    cvtrans.f90
  - information of the convection: now only the corrected values
    of the cvtrans closure are in the cvtrans stream
- CONVECT module:
  - new module that performs the convection (implicit none, dp)
    by now the convection with Nordeng closure (dafault for ECHAM)
    gives the same results as the old source code convection
  - other closures work, too, but cannot be compared because
    formerly they did not run
  - provides an interface to other convection modules, that are
    not implemented yet (Zhang/Hack, etc.)
  - convect stream with convection data (should be used by lnox, etc.)
- TROPOP module:
  - deleting of tropop_physc and calc_conv_cover and moving these
    calculations into the convect module
- MESSY_MAIN_CONTROL:
  - implementation of the new convect submodule
  - moving of cvtrans_physc to cvtrans_convec
  - moving scav_cvtrans from messy_physc to messy_convec
  - deleting tropop_physc (obsolete because it is in convect)
- MESSY_MAIN_DATA:
  - 3 new stream elements (formerly local fileds in physc for
    convection, cloud (ilab, zqtec, qhfla))
- PHYSC:
  - changes due to stream elements mentioned above, new convect module
  - lfirst_day not longer used for convection and cloud/cover
    (exchanged by: .not.lstart)
    so there are no processes not active from the second time step

******************************************************************************

echam5.2.02a_messy_0.1d (22 Apr 04)

CHANGES by Rolf Sander and Patrick Joeckel:
- target depend depends on $(SRCS) in all Makefiles

CHANGES by Patrick Joeckel:
- iorestart.f90: CALL messy_init_tracer added (thank's to Astrid Kerkweg)
- added nc2mc and mc4linux to distribution
- added ncdx to distribution
- compiled and run on Linux-Cluster bc-c1
- ONLEM, AEROEM: main.mk, Makefile.e, Makefile updated
- config/mh-linux.lf: update for bc-c1
- messy/src/specific.mk: entry for aeroem

******************************************************************************

echam5.2.02a_messy_0.1c (04)

CHANGES by Rolf Sander:
- gmake zip does not include depend.mk

CHANGES by Patrick Joeckel:
- IBM compatibility from 0.1a is now included (but untested)
- mecca boxmodel update

******************************************************************************

echam5.2.02a_messy_0.1b (20 Apr 04)

CHANGES by Rolf Sander:
- based on 0.1, not 0.1a!!!
- messy_main_data_e5.f90:
  - "=> NULL()" in declaration instead of NULLIFY(...)
  - general cleanup, 2d and 3d sorted, and more
- gas-phase online emission submodel USE_ONLEM:
  - based on subroutine dms_emissions in
    echam5.1.07_m7_0.18_ori/modules/mo_chem_forcing.f90
  - for now, calculates only DMS (later also other species)
  - e5 level puts fluxes into pxtte or pxtems (and also into stream)
  - also available as box model
- aerosol emission submodel USE_AEROEM:
  - based on subroutine seasalt_emissions_lsce in
    echam5.1.07_m7_0.18_ori/modules/mo_chem_forcing.f90
  - seasalt already split between AS and CS
  - for now, calculates only seasalt (later OC, BC, dust)
  - e5 level puts fluxes into stream
  - also available as box model
- xmecca: all $wanted consistent with Ara
- util/validate:
  - first do all tests, then exit 1 if warning or exit 2 if error
  - call MESSy conformity checks from PJ
  - output to validate.log
  - check for gmake.log.sx logfile

******************************************************************************

echam5.2.02a_messy_0.1a (21 Apr 04)

CHANGES by Patrick Joeckel:
- now compiles and runs on IBM/AIX (see also WARNINGS)
- messy/box/Makefile.e updated:
  targets install, clean, and distclean are mandatory !
- xmessy, mh-linux.lf, mh-linux.i: preparations for 'grand'
- mo_column.f90: preprocessor directive for flush on __ibm__
- config/config.h.rs6000: new file for ./configure --host=rs6000
  (cross compilation on sp for psi ... to be tested)
- messy/e5/messy_emis_e5.f90: bug fix
- Makefile.in, messy/src/Makefile.in: updated
- messy/box/ncregrid: Makefiles updated
- messy/box/mecca: Makefiles updated
- messy/util/sfmakedepend.pl.in: filelist now optional
- messy/box/ncregrid/Makefile.in: bug-fix

******************************************************************************

echam5.2.02a_messy_0.1 (19 Apr 04)

CHANGES by Patrick Joeckel and Rolf Sander (with help from Astrid
Kerkweg, Holger Tost, Joachim Buchholz, and Michael Traub):
- messy_mecca_e5.f90: corrected names for photolysis rates
- Makefile.in: does not echo all commands anymore
- *.nml: physc stream renamed to messy
- messy_mecca_mem_box.f90 was made obsolete and then deleted
- xmecca: selection "11 MBL" now excludes reactios in rain (Ara)
- mecca/integr/*.k: dp added
- messy_main_data_e5.f90: physc stream renamed to messy
- xecham: correct path of xmessy added in grep commands
- util/validate: submodels emis, drydep, m7, onlem, aeroem, and sedi
  added to personal lists
- contents of messy/run/ moved to messy/ with related changes in xmecca
  and xecham
- Makefile.in changed (via autoconf?)
- messy_check_all: check 4 and 5 added
- xmessy, mo_start_dataset.f90:
  echam.nml -> ECHAM5.nml
  main.nml  -> MESSy.nml
- mo_doctor.f90, inidoc.f90, mo_start_dataset.f90, master.f90,
  messy_main_switch_e5.f90, messy_main_switch.f90, messy_main_constants_mem.f90
  update of output to log-file, netCDF-global attributes
  (modstr = MESSy, modver=0.1pre017)
- modules/*.f90: #if(n)def MESSY #else #endif, except for
  SAVE, TARGET. etc., bug-fixes, _dp, and vertical resolution
  generalization by mz_jb_
- src/*.f90 #if(n)def MESSY #else #endif, except for
  op_ck_, bug fixes, _dp, and vertical resolution generalization by mz_jb_
- configure.in, configure, Makefile.in, etc.:
  new preproessor directive MESSY (configure --disable-MESSY to switch OFF)
- configure/Makefile.in etc. completely updated to new
  DIRECTORY structure (new files specific.mk and messy/src/specific.mk)
- new DIRECTORY STRUCTURE:
  $E/include/                 -> same as before
  $E/src/                     -> same as before
  $E/modules/                 -> same as before
  $E/blas/                    -> same as before
  $E/lapack/                  -> same as before
  $E/netcdf90                 -> same as before
  $E/messy/box/<SUBMODEL>/    -> messy box models
  $E/messy/e5/                -> messy e5 (bmil) files
  $E/messy/lib/               -> messy library
  $E/messy/mecca/             -> (previously $E/mecca)
  $E/messy/run/xmessy         -> messy runscript
  $E/messy/nml                -> messy namelist files
  $E/messy/src/               -> messy core files (MUST BE COMPLETELY
				 ECHAM5 INDEPENDENT !!!)
  $E/messy/util/              -> sfmakedepend.pl.in etc.
- messy_mecca_e5.f90: photolysis stream element names corrected
- mo_doctor.f90, mo_kind.f90, mo_constants.f90, messy_main_constants_mem.f90:
  improved preprocessor directives, _mem is now MESSy-Standard conform
- messy_ncregrid_base.f90: update
- new messy_ncregrid_mpi.f90: abort ncregrid in parallel environment (MPI)
- configure.in, Makefile.in: -DECHAM5 removed, -DMESSY new,
  -DMPI new, if MPI is used (-DNOMPI as before)
- messy_sedi.f90, messy_sedi_e5.f90: new implemented
- messy_drydep_e5.f90: output of deposition velocities enabled
- messy_drydep.f90: bug-fixes
- messy_m7_e5.f90: cleaned up
- messy_gm7_e5.f90: implementation of 4d radii and density streams,
  implementation od sigma stream
- messy_mecca_e5.f90, messy_mecca_mbl_e5.f90, messy_mecca.mbl, mecca.nml:
  updated to new structure; update of emissions
- messy_main_tools.f90: PTR_5D_ARRAY
- USE_SEDI
- drydep and m7 updated
- messy_main_tracer_e5.f90: bug fix in tracer_init
- non-MESSy conform gm7 removed from physc
- messy_emdep_mem_e5.f90: #if - directive removed
- messy_attila.f90 #if - directive removed
- messy_main_data_e5.f90: bug fix for pxtems
- vdiff.f90: bug fix
- messy_main_tracer_e5.f90: bug fixes
- messy_attila.f90, messy_attila.f90: additional netcdf-dimension
  moved to messy_main_tracer_e5.f90
- mo_netcdf.f90: improved add_unknown_dim
- physc.f90, messy_main_control_e5.f90: parameters of messy_physc deleted
- mh-aix: HIGH_RESOLUTION_TIMER removed
- tracdef.tex, tracdef.awk: adjusted to new basename/subname syntax of
  new_tracer
- new names for mecca (and scav) files:
  messy_mecca_mem.f90         -> messy_mecca_base.f90
  messy_mecca_mbl_mem.f90     -> messy_mecca_mbl_base.f90
  messy_mecca_conc2mr.inc     -> messy_mecca_c2mr_e5.inc
  messy_mecca_trac.inc        -> messy_mecca_trac_e5.inc
  messy_mecca_mr2conc.inc     -> messy_mecca_mr2c_e5.inc
  messy_mecca_idt.inc         -> messy_mecca_idt_e5.inc
  messy_mecca_gdata.f90       -> messy_mecca_kpp_g_mem.f90
  messy_mecca_sprsdata.f90    -> messy_mecca_kpp_s_mem.f90
  messy_scav_gdata.f90        -> messy_scav_kpp_g_mem.f90
  messy_scav_sprsdata.f90     -> messy_scav_kpp_s_mem.f90
- messy_mecca_e5.f90: get_stream instead of USE for getting rate
  constants from PHOTO and PSC
- TRIM(modstr) replaced by modstr
- messy_main_control_e5.f90: removed parameters from *_physc
- renamed ldc% to dcl% and gdc% to dcg%
- messy switch lskipkpp to switch off kpp_integrate
- pxtems as stream element in main_data
- tracdef.tex, tracdef.awk: adjusted to new syntax of new_tracer
- search for "get_tracer(ierr" and repair
- messy_main_tracer.f90: bug fix
- messy_photo_e5.f90, messy_mecca_mbl_e5.f90,messy_d14co_e5.f90,
  messy_main_tools_e5.f90, messy_m7_e5.f90: get_tr is now obsolete
- emdep 'core' back to old tracer DO loops
- back to old tracer DO loops
- tracdef.awk, xmecca: mecca include files renamed to *.inc. They are
  now linked into modules/ and not into include/
- createMakefiles.pl now also considers include files in ./
- USE mo_tracer and USE mo_tracdef deleted and tracer loops adjusted
  accordingly: messy_tfamily_e5.f90, messy_lgtmix_e5.f90,
  messy_photo_e5.f90
- USE mo_tracer and USE mo_tracdef deleted and tracer loops adjusted
  accordingly: messy_cvtrans_e5.f90, messy_tnudge_e5.f90, messy_scav_e5.f90
- USE replaced by CALL for pointer on tracer-list
- USE mo_tracer and USE mo_tracdef deleted and tracer loops adjusted
  accordingly: messy_mecca_e5.f90, messy_mecca_mbl_e5.f90,
  messy_gm7_extfunc.f90, messy_gm7_e5.f90, messy_m7_e5.f90,
  messy_emdep_emis_e5.f90, messy_emdep_emis.f90,
  messy_emdep_xtsurf_e5.f90, messy_emdep_mem_e5.f90,
  messy_emdep_drydep_e5.f90, messy_emis_e5.f90, messy_lnox_e5.f90
- USE mo_tracer and USE mo_tracdef deleted and tracer loops adjusted
  accordingly: control.f90, cudtdq.f90, labrun.f90,
  messy_main_control_e5.f90, physc.f90, physc.f90, scan1.f90, si1.f90,
  tf1.f90, tf2.f90, vdiff.f90, mo_column.f90, mo_netcdfstream.f90,
  mo_scan_buffer.f90, mo_semi_lagrangian.f90, mo_spitfire.f90,
  mo_tpcore.f90
- cudtdq.f90 bug-fix
- mo_linked_list.90 (remove_list_element): update for lav, lsd, etc.
- mo_sub_echam.f90, mo_sub_nml.f90: deleted
- USE of tracer_init in all submodels adjusted
- messy_ncregrid_tools_e5.f90: tracer_init removed (new version in
  messy_main_tracer_e5.f90)
- mo_memory_g1a, g1b, gl: pointers used from
  messy_main_tracer_mem_e5.f90
- new: messy_main_tracer_mem_e5.f90
- new: messy_main_tracer.f90 and messy_main_tracer_e5.f90
- mo_memory_gl.f90, mo_memory_g1a.f90, mo_memory_g1b.f90,
  mo_memory_streams.f90: new tracer interface
- messy_main_control_e5.f90: new tracer interface
- initialize.f90: call messy_new_tracer, call initrac removed
- ioinitial.f90: call messy_init_tracer, call xtini removed
- iorestart.f90: call xtini removed
- messy_emis_e5.f90: bug-fix
- mo_tracer.f90: xtini, initrac obsolete
- messy_mecca_e5.f90: jrow bug fix in mecca_physc
- *_kpp_mem files renamed to *_mem: messy_mecca_mbl_mem.f90,
  messy_psc_mem_e5.f90, messy_mecca_mbl_mem.f90
- TABs removed in files from Hamburg: mo_midatm.f90,
  mo_semi_lagrangian.f90, mo_time_base.f90
- rad_int.f90: parameter pxtec deleted
- bug fixes until successful compilation on bromine (lf95)
- messy interfaces in time loop:
  - scan1.f90: call_read            -> messy_global_start
  - scan1.f90:                      -> messy_local_start
  - vdiff.f90: call_chem_bcond      -> messy_vdiff
  - physc.f90:                      -> messy_convec
  - physc.f90: call_chem1/xtdriver1 -> (removed)
  - physc.f90: call_chem2/xtdriver2 -> messy_physc
  - scan1.f90: call_diagn/xtdiagn   -> messy_local_end
  - scan1.f90: call_diagn/xtdiagn   -> messy_global_end
- mo_tracer.f90, physc.f90: xtdriver* and xtdiagn replaced by messy standard
- configure/make: automake 1.8.3 and esos included
- autoconv updated
- call_submodels from HH deleted and messy_main_control_e5 used instead
- update to 5.2.02a
- several of our bugfixes are now obsolete because they have been
  included into 5.2.02a (although unlabeled):
  - scan1.f90: "xim1 (:,:,:) = xl (:,:,:)" changed to "xim1 (:,:,:) = xi
    (:,:,:)", i.e. XL replaced by XI
  - setdyn.f90: dampth, damhih, enstdif, nlvstd1, nlvstd2, spdrag,
    enspodi, nlvspd1, and nlvspd2 were previously undefined if lmidatm=F
  - configure.in: "@AS@" added
- initialize.f90: call to submodel init. moved
- .true. and .false. changed to T and F in *.nml
- DRYDEP: minor changes
- TNUDGE: update
- EMIS: update
- some stratospheric reactions corrected as suggested by L. Grenfell:
  OClO  + hv = ClO + O3P
  CFCl3 + hv = 3 Cl
  CH3Br + hv = Br + CH3O2
  CH3Cl + hv = Cl + CH3O2
- messy_cvtrans_e5.f90, messy_emdep_drydep_e5.f90, messy_scav.f90,
  messy_scav_e5.f90, messy_scav_liqcoeff.f90, scav.nml, cloud.f90,
  cucall.f90, cudtdq.f90, cumastr.f90, physc.f90: diff between mz10zl and
  mz10zm now also introduced into mz11pre version (for details of
  changes by HT in CVTRANS and SCAV, see below)
- precip from Swen deleted again in physc.f90 and cloud files
- messy_mecca_mem.f90 and messy_mecca_mbl_mem.f90 deleted for mecca boxmodel
- messy_emdep_drydep_e5.f90: "zdrydepflux(:,jt)=0." changed to
  "zdrydepflux(1:kproma,jt)=0." as suggested in email from LG
- CVTRANS:
  - nullifying stream_element trac_field (messy_cvtrans_e5)
- SCAV:
  - reaction rate for fhet N2O5 changed (messy_scav_liq_coeff)
  - wdepflxcv in out_rain_cv not added up, but calculated in each layer
    from the liquid phase concentrations (messy_scav)
  - aerosol scav only for tracers with nphase ge 2 (messy_scav_e5)
  - average cloud droplet radius changed from 1e-6 m to
    2.5e-5 m (more realistic value)
- messy_m7: mem-files obsolete
- strict separation of MBL from MECCA
- messy_mecca_mem.f90 and messy_mecca_mbl_mem.f90 deleted
- messy_mecca*_e5.f90: jk, jp, jrow changed to local variables
- started to rename CPL to CPL_MBL (not compiled and not tested yet)
- updates of xmessy_drydep.f90, xmessy_drydep_e5.f90, drydep.nml:
  bugfixes and namelist extended, tracers are now determined by namelist
- inclusion of new-old m7 scheme
- messy_emdep_emis_mem.f90 set logicals to .false. when initialize
- messy_emdep_emis_e5.f90/messy_emdep_emis.f90:  set basename to fullname
- messy_m7_e5.f90: introduce 4d radius stream
- introduce 4D aerosol streams into drydep (not ready yet)
- mo_nudging_sst.f90: bug fix
- new submodel EMIS for OFF-LINE emissions of
  - GRIDPOINT TRACERS
  - LAGRANGIAN TRACERS
- messy_main_tools_e5.f90:
  - TYPE PTR_?D_ARRAY moved to messy_main_tools.f90
  - PTR_4D_ARRAY added
- messy_scout.f90: using 'strcrack' from messy_main_tools.f90
- messy_main_tools.f90: new subroutine 'strcrack'
- NCREGRID:
  - update to v1.2
  - output to log-file reduced
  - complete FORCHECK analysis of stand-alone NCREGRID
- messy_scav_liqcoeff.f90: use correct gdata in fhet now
- cuflx.f90: bug fix (copies of local variables in stream elements must be
		      re-initialized every time step ...!)
- submodel M7 renamed to GM7
- messy_main_tools.f90: new SUBROUTINE int2str
- messy_ncregrid_nc.f90 to messy_ncregrid_netcf.f90
- messy_regrid_*.f90 renamed to messy_ncregrid*.f90
- messy_regrid_tools_e5.f90: update
- new submodel LNOX detached from EMDEP
- control.f90: call messy_init_cpl
  -> call XXX_init_cpl for ATTILA, D14CO, DRYDEP, LGTMIX, MECCA, PHOTO,
     PSC, SCAV, STATATT, LNOX
- xmessy:
  - replaced .true. and .false. by .TRUE. and .false. since ISO-Standard
    allows T,F and .T, .F for logicals in namelists
  - submodels sorted in alphabetical order
  - submodels.nml renamed to main.nml (GENERIC SUBMODEL)
  - new switch LAMIP for echam.nml
- messy_main_switch_e5.f90, messy_main_switch_mem.f90
  -> messy_main_switch_e5.f90, messy_main_switch.f90
     = GENERIC messy-SUBMODEL ('main')
  - submodels sorted in alphabetical order
- messy_attila_e5.f90: bug fix for normal mode after restart
- attila.nml : comment for definition of trajectories
- messy_statatt_e5.f90: bug fix in calculation of mass fluxes
  (still some work to do)
- messy_statatt.f90: update
- messy_tropop.f90:  function jqif changed
- mecca/boxmodel: correct usage of cair
- messy_main_constants_mem.f90 now provides nout and nerr
- MESSy submodels now use the ECHAM5-independent
  messy_main_constants_mem instead of mo_kind and mo_constants
- new module and file names in modules/:
  mo_mz_advect                   messy_advect
  mo_mz_advect_diag              messy_advect_diag
  mo_mz_advect_diag_e5           messy_advect_diag_e5
  mo_mz_advect_e5                messy_advect_e5
  mo_mz_advect_mem_e5            messy_advect_mem_e5
  mo_mz_dlr_attila               messy_attila
  mo_mz_dlr_attila_e5            messy_attila_e5
  mo_mz_attila_tools             messy_attila_tools
  mo_mz_attila_tools_e5          messy_attila_tools_e5
  mo_mz_cvtrans                  messy_cvtrans
  mo_mz_cvtrans_e5               messy_cvtrans_e5
  mo_mz_cvtrans_mem              messy_cvtrans_mem
  mo_mz_d14co                    messy_d14co
  mo_mz_d14co_e5                 messy_d14co_e5
  mo_mz_dradon                   messy_dradon
  mo_mz_dradon_e5                messy_dradon_e5
  mo_mz_drydep                   messy_drydep
  mo_mz_drydep_e5                messy_drydep_e5
  mo_mz_emdep                    messy_emdep
  mo_mz_emdep_drydep             messy_emdep_drydep
  mo_mz_emdep_drydep_e5          messy_emdep_drydep_e5
  mo_mz_emdep_e5                 messy_emdep_e5
  mo_mz_emdep_emis               messy_emdep_emis
  mo_mz_emdep_emis_e5            messy_emdep_emis_e5
  mo_mz_emdep_emis_mem           messy_emdep_emis_mem
  mo_mz_dlr_emdep_lnox           messy_emdep_lnox
  mo_mz_emdep_lnox_e5            messy_emdep_lnox_e5
  mo_mz_emdep_mem_e5             messy_emdep_mem_e5
  mo_mz_emdep_xtsurf             messy_emdep_xtsurf
  mo_mz_emdep_xtsurf_e5          messy_emdep_xtsurf_e5
  mo_mz_eqsam                    messy_eqsam
  mo_mz_eqsam_e5                 messy_eqsam_e5
  mo_mz_eqsam_mem                messy_eqsam_mem
  mo_mz_eqsam_mem_e5             messy_eqsam_mem_e5
  mo_mz_h2o                      messy_h2o
  mo_mz_h2o_e5                   messy_h2o_e5
  mo_mz_lgtmix                   messy_lgtmix
  mo_mz_lgtmix_e5                messy_lgtmix_e5
  mo_mz_hh_m7                    messy_m7
  mo_mz_hh_m7_e5                 messy_m7_e5
  mo_mz_hh_m7_ext_func           messy_m7_extfunc
  mo_mz_hh_m7_mem                messy_m7_mem
  mo_mz_hh_m7_mem_e5             messy_m7_mem_e5
  mo_mz_hh_m7_nucl               messy_m7_nucl
  mo_mz_messy_constants          messy_main_constants_mem
  mo_mz_physc_interface          messy_main_data_e5
  mo_mz_submodels_switch         messy_main_switch_e5
  mo_mz_submodels_switch_mem     messy_main_switch_mem
  mo_mz_messy_tools              messy_main_tools
  mo_mz_messy_tools_e5           messy_main_tools_e5
  mo_mz_messy_tools_pre          messy_main_tools_pre
  mo_mz_column                   messy_main_tools_pre_e5
  mo_mz_transform_e5             messy_main_transform_e5
  mo_mz_mecca                    messy_mecca
  mo_mz_mecca_e5                 messy_mecca_e5
  mo_mz_mecca_gdata              messy_mecca_gdata
  mo_mz_mecca_kpp                messy_mecca_kpp
  mo_mz_mecca_kpp_mem            messy_mecca_kpp_mem
  mo_mz_mecca_mbl                messy_mecca_mbl
  mo_mz_mecca_mbl_e5             messy_mecca_mbl_e5
  mo_mz_mecca_mbl_kpp_mem        messy_mecca_mbl_kpp_mem
  mo_mz_mecca_mbl_mem            messy_mecca_mbl_mem
  mo_mz_mecca_mem                messy_mecca_mem
  mo_mz_mecca_mem_e5             messy_mecca_mem_e5
  mo_mz_mecca_sprsdata           messy_mecca_sprsdata
  mo_mz_photo                    messy_photo
  mo_mz_photo_e5                 messy_photo_e5
  mo_mz_psc                      messy_psc
  mo_mz_psc_e5                   messy_psc_e5
  mo_mz_psc_kpp_mem              messy_psc_kpp_mem_e5
  mo_mz_ptrac                    messy_ptrac
  mo_mz_ptrac_e5                 messy_ptrac_e5
  mo_mz_regrid_base              messy_regrid_base
  mo_mz_regrid_control           messy_regrid_control
  mo_mz_regrid_diag              messy_regrid_diag
  mo_mz_regrid_geohyb            messy_regrid_geohyb
  mo_mz_regrid_interface         messy_regrid_interface
  mo_mz_regrid_nc                messy_regrid_nc
  mo_mz_regrid_tools             messy_regrid_tools
  mo_mz_regrid_tools_e5          messy_regrid_tools_e5
  mo_mz_scav                     messy_scav
  mo_mz_scav_aqchem              messy_scav_aqchem
  mo_mz_scav_e5                  messy_scav_e5
  mo_mz_scav_cloud_gdata         messy_scav_gdata
  mo_mz_scav_cloud_kpp           messy_scav_kpp
  mo_mz_scav_liq_coeff           messy_scav_liqcoeff
  mo_mz_scav_mem                 messy_scav_mem
  mo_mz_scav_cloud_sprsdata      messy_scav_sprsdata
  mo_mz_scout                    messy_scout
  mo_mz_scout_e5                 messy_scout_e5
  mo_mz_statatt                  messy_statatt
  mo_mz_statatt_e5               messy_statatt_e5
  mo_mz_tfamily                  messy_tfamily
  mo_mz_tfamily_e5               messy_tfamily_e5
  mo_mz_tnudge                   messy_tnudge
  mo_mz_tnudge_e5                messy_tnudge_e5
  mo_mz_tropop                   messy_tropop
  mo_mz_tropop_e5                messy_tropop_e5
  mo_mz_viso                     messy_viso
  mo_mz_viso_e5                  messy_viso_e5
- xmecca, tracdef.awk, mecca boxmodel etc. adjusted to new names
- mecca include files adjusted to new names:
  mz_idt.f90     -> messy_mecca_idt.f90
  mz_conc2mr.f90 -> messy_mecca_conc2mr.f90
  mz_mr2conc.f90 -> messy_mecca_mr2conc.f90
  mz_trac.f90    -> messy_mecca_trac.f90
- createMakefiles.pl.in: architecture specific rules adjusted to new names
- call_submodels.f90 renamed to messy_main_control_e5.f90
- renamed messy subroutines: (also for each submodel XXX)
  XXX_alloc_mem                     XXX_init_memory
  XXX_chem                          XXX_physc
  XXX_chem_bcond                    XXX_vdiff
  XXX_dealloc_mem                   XXX_free_memory
  XXX_diagn                         XXX_local_end
  XXX_gdiagn                        XXX_global_end
  XXX_init                          XXX_init_ctrl
  XXX_read                          XXX_global_start
  XXX_request_tracer                XXX_new_tracer
- new submodel drydep
- xmessy: USE_PREREGRID_MESSY switched off

******************************************************************************

echam5.1.07_mz10zm (15 Mar 04)

THIS IS THE LAST MZ VERSION BASED ON ECHAM5.1.07!

CHANGES by Rolf Sander:
- mo_mz_cvtrans_e5.f90, mo_mz_scav_e5.f90: bug fixes

******************************************************************************

echam5.1.07_mz10zl (9 Mar 04)

CHANGES by Holger Tost:
- CVTRANS:
  - whole code structure changed for the independence of scav and cvtrans
  - split of the old transport routine plumetrans in two subroutines,
    one dealing with the closure of the input parameters from base model
    (closure) and one for the transport (cv_transport) (mo_mz_cvtrans)
  - new CASE construct depending of USE_SCAV as coupling parameter
  - cleaning up the code of unused variables
- SCAV:
  - new subroutine for convective scavenging with cvtrans (column wise)
    including gas and aerosol scavenging and calculation of conv. cloud
    cover for scav purposes (mo_mz_scav_e5)
  - several stream elements from cvtrans imported by get_stream_elements
    in new subroutine scav_init_cpl in scav_init_tracer (mo_mz_scav_e5)
  - two new functions for aerosol scavenging: free mean path and air
    viscosity (mo_mz_scav)
  - several changes/bugfixes in the convective scavenging core routines
    (mo_mz_scav)
  - CO2 is scavenged but tracer concentration remains constant
  - cleaning up the code of unused variables
  - nullifying of zcover_conv in cuflx.f90
- CALL_Submodels:
  - call of the new subroutines for convective transport and scavenging
    (cvtrans_chem is necessarily called two times)
  - call of scav_init_tracer for scav_init_cpl

******************************************************************************

echam5.1.07_mz10zk (9 Mar 04)

CHANGES by Laurens Ganzeveld and Swen Metzger:
- mo_mz_emdep*.f90:
  - generalized code so that offline and online emissions of the same
    tracer are added.
  - volcanic SO2 is now added again to either EDGAR (offline) or M7
    (online) SO2
  - mo_mz_emdep_emis.f90: bug fix for SO2. SO2 volcanic (included
    division of zdz)
- createMakefiles.pl.in: special treatment (less optimization) for
  mo_mz_emdep_emis_e5 on SX6.

******************************************************************************

echam5.1.07_mz10zj (8 Mar 04)

CHANGES by Patrick Joeckel:
- mo_mz_messy_tools.f90: bug-fix
- mo_mz_dlr_emdep_lnox.f90: USE mo_geoloc deleted

CHANGES by Joachim Buchholz
- mh-aix: improved compiler options
- mo_mz_psc.f90, mo_mz_psc_e5.f90, psc.nml:
  - chemistry calculation now depends on namelist parameter LCalcChem
  - use of tropopause stream element now controlled via namelist
  - improved definition of psc relevant region as stored in flt_pscreg
  - minor improvements
- mo_mz_psc_kpp_mem.f90: global PRIVATE statement added
- nudge.nml: added nudging parameters LNUDGFRD, NUDGD, NUDGV, NUDGT, NUDGP
- WARNINGS:
  - submodule tropop does not run on alphas
  - mo_mz_emdep_emis_e5.f90 cannot be compiled by NEC SX 6 cross compiler
- xmessy: environment variable F_SYSLEN for formatted string output on
  SUPER-UX

CHANGES by Rolf Sander:
- xmecca: uses kpp version 1.1-f90-alpha10 where 1.d0 was replaced by
  1.e0 and DSQRT by SQRT
- xmessy: default for NPROMA is 101. This odd number ensures that there
  is always a small rest which is needed to test if the code is
  compatible with the nproma vectorization.
- mo_mz_mecca_mbl.f90: new values for alpha(ClNO3) and alpha(BrNO3)

******************************************************************************

echam5.1.07_mz10zi (4 Mar 04)

CHANGES by Rolf Sander:
- mo_mz_mecca*.f90: minor changes to reduce number of forcheck
  errors/warnings/infos

CHANGES by Swen Metzger:
- mo_mz_emdep_drydep_e5.f90: fixed bug with switch l_xtsurf_vdbl.
  Namelist switch can now be used to switch deposition off
- mo_mz_hh_m7.f90: bug fix for BC_ks in M7
- mo_mz_emdep_emis_e5.f90, mo_mz_emdep_emis.f90: bug fix for SO2 so that
  it is not accumulating anymore.
- mo_mz_emdep_emis_mem.f90, mo_mz_emdep_mem_e5.f90: echam-dependent USE
  statements moved into e5 file. Now forcheck works again.
- mo_mz_emdep_xtsurf_e5.f90: bug fix (however, xtssurf still tries to
  write undefined values to netcdf output if l_xtsurf=.true.)
- emdep.nml: l_emis_volc_SO2 and l_xtsurf_vdaer = .false.

******************************************************************************

echam5.1.07_mz10zh (3 Mar 04)

CHANGES by Joachim Buchholz and Patrick Joeckel:
- xmessy, echam.nml: LNMI switch for normal mode insertion (nudging)

CHANGES by Patrick Joeckel:
- mo_mz_regrid_nc.f90: bug fix for string attributes of length 0
- echam*.nml: T,F -> .TRUE., .FALSE.
- xmessy: update for Sun-Grid-Engine (SGE) on octopus
- mo_mz_tropop.f90: bug fix in calculation of boundary layer level index
- DRADON, PTRAC, LGTMIX: updates and bug-fixes
- ATTILA: code cleaned up; bug-fixes
- mo_mz_advect_e5.f90, mo_mz_attila_tools_e5.f90, mo_mz_dlr_attila_e5.f90,
  mo_mz_statatt_e5.f90:
  bugfixes for usage of trp_gpdc_gpgl(-1, ...) of mo_mz_transform_e5.f90
- mo_mz_attila_tools.f90, mo_mz_attila_tools_e5.f90:
  - new subroutine for usage of gridpoint surface emissions for
    Lagrangian tracers;
  - other routines revised

CHANGES by Swen Metzger:
- changed m7.nml

CHANGES by Rolf Sander:
- updated mecca chemistry
- mo_mz_messy_constants.f90: provides dp and physical constants as
  Fortran PARAMETERs for MESSy (similar to mo_kind and mo_constants but
  independent of ECHAM). MECCA already uses mo_mz_messy_constants, other
  submodels still need to be adjusted.
- mo_mz_mecca*.f90: for conversion between mixing ratio and
  concentrations, "cair" and its inverse "riac", which also consider the
  effect of humidity, are used consistently
- mo_tracer.f90: unused output of info about grib code table deleted

******************************************************************************

echam5.1.07_mz10zg (2 Mar 04)

CHANGES by Swen Metzger:
- included bug fix for CH4 from Laurens in mo_mz_emdep_emis.f90
- emdep_emis_mem now split into core and e5
- emdep now produces no more tracers
- new tracer propoerty (for aerosols): maxmod, sigma
- nc file for Edgar SO2 added to the namelist.
  also pre-regridded and included in T21
- volcanic so2 emissions are now added to either offline SO2 (edgar)
  or online SO2 (m7). see emdep_emis_so2_volcanic.
  something similar could be done in general for all emssions
- put the switch lvd_integrated in the namelist
- cleaned up /modeldata/ECHAM5/messy/T* (*.log etc. -> contents are
  identical to raw/) except two new files: emis_annual.nc and
  emis_monthly.nc which should be also compiled for 'raw'
- moved parameters kproma, kbdim, klev, and ktrac to _e5 file, i.e.
  IF (USE_M7)      CALL     m7_chem(pxtm1, pxtte)
- mo_mz_emdep_emis.f90: emdep_emis_bio_NOpulse: modified output file name
  from fname='../data' to fname='./'
  Should be removed completely (e..g put into namelist)
- all "USE mo_mz_hh_m7*" ... statements deleted
  cmr2mmr, sigmaln are calculated from sigma, which is now a tracer property
- mo_mz_emdep_e5.f90: now obsolete "IF (L_EMIS) CALL
  emdep_emis_request_tracer"
- README for all *m7*.nc in /modeldata
- lturb_emis switch is now in the namelist
- added comments to entries in emdep.nml switches
- deleted DMS_M7, SO2_M7, SO4_M7 from aerosol (m7), instead DMS, SO2, H2SO4
  are now (consistently) used from mecca
- made CH4 independent of tracer idt (nothing was be written out for
  l_emis_out_lforce=.true.)
- excluded m7_chemistry, since SO2 oxidation is done in MECCA and
  scavenging in SCAV!
- note:  chem_bcond := "chemical boundary conditions"
- EDGAR, M7 and volcanic SO2 emissions are updated and OK
- OC/BC emissions are updated and OK, files regridded
- Sea salt (monhan, lsce), OK
- Dust (lsce) updated, OK? (low values)
- DMS update piston velocities, OK (vertical distribution?)
- replaced jptrac used in mo_mz_emdep_xtsurf_e5 for e.g. diff(jptrac)
  by the actual value ntrac, by using the f95 feature ALLOCATABLE ...
- included new, optional tracer properties:
  (defaults are defined according to M7, for nmod = 7)
  maxmod, sigma(nmode), cmode(nmode)
- physc removed dependency on M7/lfirst_day for CALL m7_sedimentation
- cufl removed dependency on M7/lfirst_day for CALL m7_wetdep
- emdep_drydep_chem_bcond removed dependency on M7/lfirst_day for CALL
  emdep_xtsurf_vdaer
- m7_chemistry removed dependency on lfirst_day for CALL m7_wetdep
- cuflx SCAVENGING IN CONVECTIVE CLOUDS by P.Stier excluded!
- mo_mz_physc_interface added 2D stream for pxtems_2d from
  emdep_emis_chem_bcond in mo_mz_emdep_emis_e5.f90
- mo_mz_emdep_mem.f90 deleted
- new files in /modeldata:
  - Included EDGAR SO2 emissions
  - renamed  emis_1995_SO2.nc to emis_SO2_1995.nc and regridded (T21)
    (needs to be also done in raw)
  - updated the OC/BC emissions, including README and new data, i.e.
    T21/emdep/README_m7
    emiss_fields_monthly_.5x.5.nc
    emiss_fields_monthly_T63.nc

******************************************************************************

echam5.1.07_mz10zf (2 Mar 04)

CHANGES by Rolf Sander:
- updated mecca chemistry

CHANGES by Holger Tost:
- Scavenging:
   - change of number of layers in which convective scavenging takes place
     in mo_mz_cvtrans.f90
   - internal covective cloud cover (used only for internal purposes)
   - in cloud scavenging (nucleation) adapted from the old m7 routine for
     the liquid phase
   - cleaning up of the code in mo_mz_scav_e5.f90 using sub-routines in the
     core module to become more consistent with the MESSy - Structure on
     several occasions (also in the different e5-routines)
   - several changes in mo_mz_scav_liq_coeff.f90 for the unification of one
     aqueous equation file
   - new labels in aqueous.eqn: Ara (Aqueous, rain only)
				Sc  (Scavenging)
				Scm (Scavenging minimum mechanism)
- xmecca:
    some small changes to adapt the new equation file and the label
    selection, several sed - Command lines

******************************************************************************

echam5.1.07_mz10ze (24 Feb 04)

CHANGES by Rolf Sander:
- xmecca: dvips changed so that it also works on hydra

CHANGES by Patrick Joeckel:
- ADVECT: interface for species-decomposition finished
- new SUB-SUBMODEL ADVECT_DIAG
- new SUBMODEL VISO for Values on horizontal ISO-surfaces
- mo_mz_dlr_lnox.f90: renamed to mo_mz_dlr_emdep_lnox.f90
- mo_mz_messy_tools.f90: update
- mo_mz_tropop_e5.f90, mo_mz_tropop.f90: update
- mo_mz_transform_e5.f90: update
- mo_mz_dc_tools_e5.f90 is now OBSOLETE
- transition from mo_mz_sc_tools_e5 to mo_mz_transform_e5 for
  SCOUT, mo_mz_messy_tools_e5.f90, ATTILA, STATATT, ADVECT
  mo_io.f90, mo_grib.f90, mo_memory_base.f90

CHANGES by Michael Traub:
- STATATT: filenames changed (stat_attila -> statatt)
- call_submodels.f90: new names
- CPL namelist entry for ATTILA and STATATT added
- some further changes in ATTILA and STATATT, see header of modules
- cucall.f90: line "jrow = nrow(2)" moved to top of routine

******************************************************************************

echam5.1.07_mz10zd (24 Feb 04)

CHANGES by Rolf Sander:
- xmecca: check if CTRL namelist is okay
- updated mecca chemistry

CHANGES by Astrid Kerkweg:
- mecca/aerosol.eqn -> mecca/aqueous.eqn
- mecca/aerosol.spc -> mecca/aqueous.spc
- mo_mz_mecca_mbl.f90, mo_mz_mecca_mbl.f90_e5,
  mo_mz_mecca_mbl_kpp_mem.f90, aqueous.eqn, xmecca:
  changes according to unification of cloud.eqn and aerosol.eqn i.e. new
  calc. of exchange and acid/base equilibrium
- mo_mz_mecca_e5.f90: subroutine mecca_check_nml_e5 renamed according to
  MESSy-structure to mecca_init_cpl

CHANGES by Holger Tost:
- Scavenging:
  - changed use statements in several subroutines in mo_mz_scav to
    prevent compiler crashes due to changes in KPP
  - implementation of impaction scavenging of aerosols in the scav - routines
    (mo_mz_scav_e5, mo_mz_scav) similar to the old subroutine m7_wetdep
  - new switch in scav.nml for selection of use aer_scav and gas_scav
  - clearing of unused variables in mo_mz_scav_e5, mo_mz_scav
  - clearing of use_statements in mo_mz_scav_liq_coeff (now consistent with
    MESSy structure)
  - removing of unnecessary calculations of liq_chem in mo_mz_scav_e5
    (increasing performance)
  - using the "real convective cover" also below the convective column
  - moving the calculation of henry coefficient into core module (now a field of
    KPP - Species and independent of ECHAM)
  - correction of the temperature dependence of henry coefficients
  - correction of dissociation of CO2 in the liquid phase
  - use mo_kind in cuflx.f90 for convective scavenging parameters
- xmecca:
  - using the same species file for scav as for aerosols, several species added
- mo_mz_physc_interface.f90: new stream elements precflx_cv

CHANGES by Patrick Joeckel and Holger Tost:
- scan1.f90: initial values of zero for lvo, ld, ltp, and lu0

******************************************************************************

echam5.1.07_mz10zc (19 Feb 04)

CHANGES by Rolf Sander and Holger Tost:
- mo_mz_scav*.f90: temporary bug fixes to adapt scav submodel to new kpp
  version: USE mo_mz_scav_cloud_gdata, nu_dp => dp

******************************************************************************

echam5.1.07_mz10zb (11 Feb 04)

CHANGES by Rolf Sander:
- correct treatment of scav option in new xmecca
- iodine chemistry updated (still under construction)

CHANGES by Holger Tost:
- Scavenging:
  - major bug fix in convective scavenging in mo_mz_scav_e5
  - clearing of undefined values in mo_mz_cvtrans, checking of bounds of loops
- Convection:
  - bug fix with stream elements in mo_mz_cvtrans, mo_mz_cvtrans_e5
  - convective cloud cover in tropop
    routine added in mo_mz_tropop, mo_mz_tropop_e5 (chem), call_submodels
- xmecca:
  - new 6 step integrator to try to stabilize chem system in gas phase
  - new equation set option

******************************************************************************

echam5.1.07_mz10za (8 Feb 04)

CHANGES by Rolf Sander:
- major update to version 10 of mecca chemistry: Many changes, e.g.
  elemental functions are now used, see mecca/CHANGELOG for details

******************************************************************************

echam5.1.07_mz10y (6 Feb 04)

CHANGES by Patrick Joeckel:
- mo_legendre.f90: bug fixes 'IF (PRESENT(...)) &'
- mo_mz_emdep_lnox_e5.f90, mo_mz_emdep_e5.f90, emdep.nml:
  stream element of updraft velocity now via CPL_LNOX-namelist
- mo_io.f90: bug-fix (thank's to Michael Traub) zptr is now always associated
  (needed for zx1, zx2)
- ADVECT: update (still under construction !)

CHANGES by Michael Traub:
- new SUBMODEL STATATT (STAtistics with ATTila) calcutes residence times of
  trajectories in stratosphere, regions of enhanced transition from
  troposphere to stratosphere, maximum pressure height after crossing the TP,
  mass fluxes across PV tropopause, WMO tropopause, user defined isentrope,
  turbulence indices for the whole atmosphere
- ATTILA:
  - can now be run in a trajectory mode
  - lagrangian convection added
- cucall.f90, mo_mz_physc_interface.f90: up- and downdraft massfluxes,
  convection type now available in streams
- cuasc.f90: initialization of an old variable added, otherwise E5 will crash
  after one simulated day with all checks an hydra
- mo_mz_tropop_e5.f90: added isentrope diagnostics (see tropop.nml) and tp_p_PV
  and tp_p_WMO are made PUBLIC
- mo_mz_messy_tools.f90: iso2ind added : calculation of the level index
  of an iso-surface in a 3d-field (e.g. pv, potential temp.), ind2p
  added: calculates the pressure at a certain level
- mo_memory_g2a: ' * cos(lat)' added to the longname of um1 and vm1
- createMakefiles.pl.in: on ALPHA: compilation of mo_mz_messy_tools.f90
  without optimization

******************************************************************************

echam5.1.07_mz10x (5 Feb 04)

CHANGES by Swen Metzger:
- mo_mz_emdep*.f90:
  - emdep*.nml: adapted to new structure
  - modified and restructured various emdep/m7 routines (not yet
    completed). Caution: Do not use emdep/m7 of this version. They are
    still in progress. However, just have a look at the new structure.
    Some switches for the online emissions are removed. Online emissions
    now depend on the corresponding tracer. Only if the tracer exists,
    they are read in and assigned to the tracer. To test particular
    online emissions either the required tracer can be defined below, if
    the corresponding submodel is switched off. This allows to test the
    distribution of sea salt, dust or OC/BC over the M7 modes/tracers,
    even if only emdep is switched on. Alternatively, all emsisions can
    be forced to be read in and stored in streams, if l_emis_out_lforce
    = .true.
  - An optional conversion factor is included to convert the mass fluxes
    of aerosol from kg m-2 s-1 to molecules m-2 s-1. This now depends on
    the tracer property unit. However, needs to be applied consistently
    throughout the code.
  - Introduced the posibility to define tracer (and properties) via
    namelist. This works already for emdep, but not yet for M7, although
    started to include it (EQSAM will be adopted later).
- mo_mz_hh_m7.f90, mo_mz_hh_m7_e5.f90, m7.nml: read tracers via
  namelist, option for mol/mol
- mecca.nml: bug fix with sigma
- xmessy: special treatment for m7 input deleted
- mo_mz_hh_m7_ext_func.f90, mo_mz_hh_m7_mem.f90, mo_mz_hh_m7_mem_e5.f90
- mo_mz_physc_interface.f90, cloud.f90, cudtdq.f90, surf.f90: 2 new
  elements: zprecip_2d, smelt_2d
- mo_tracdef.f90, mo_tracer.f90:
  - tracer property "density" added (now different order of optional
    parameters of subroutine new_tracer)
  - new struct t_io for tracers via namelist
- echam*.nml: aerosol namelists deleted
- mo_mz_hh_m7_chem_forcing.f90: deleted
  all emission routines are now included in emdep_emis
- mo_constants.f90: new molar masses
- new files: mo_mz_emdep_emis_mem.f90, modules/mo_mz_emdep_mem.f90

******************************************************************************

echam5.1.07_mz10w (5 Feb 04)

CHANGES by Holger Tost:
- Convective Tracer Transport:
   - mo_mz_cvtrans.f90, mo_mz_cvtrans_e5.f90, mo_mz_cvtrans_mem.f90:
     several bug fixes
   - cvtrans now really works under several tested conditions
   - interface created to calculate convective scavenging at the same
     time as transport
- Scavenging:
   - cleared of undefined values
   - new subroutine to calculate the convective scavenging (mo_mz_scav_e5)

******************************************************************************

echam5.1.07_mz10v (28 Jan 04)

CHANGES by Rolf Sander:
- version 9 of mecca chemistry included: see mecca/CHANGELOG
- mo_mz_scav.f90: bug fix: several definitions "INTEGER :: ntrac" moved
  before corresponding "REAL :: xyz(ntrac)"
- Makefile.in: *.nc and */mecca/boxmodel/boxmodel excluded from gmake zip

CHANGES by Holger Tost:
- cloud.f90: bug fix with paphm1

******************************************************************************

echam5.1.07_mz10u (22 Jan 04)

CHANGES by Patrick Joeckel and Rolf Sander:
- mo_mz_tools*.f90 renamed to mo_mz_messy_tools*.f90

CHANGES by Patrick Joeckel:
- mo_tracer.f90
  - get_tracer, new_tracer: test if (TRIM(subname) == '')
  - SAVE-attribute added to ntrac_a
- mo_mz_submodels_switch_mem.f90, mo_mz_submodels_switch.f90,
  call_submodels.f90, xmessy:
  new submodel TFAMILY (mo_mz_tfamily.f90, mo_mz_tfamily_e5.f90,
  tfamily.nml)
  -> see WARNINGS
- mo_memory_streams.f90 check (and fix) consistency between
  stream settings and stream-element settings:
  element%(laccu,lav,lsd,lrerun) requires stream%lrerun,
  because rerun- and output- intervals can be specified independently
  -> WARNINGS updated
- preliminary_xmessy_m7update: applied changes for changed m7 (from Swen
  Metzger)
- mo_linked_list.f90, mo_grib.f90, mo_io.f90, mo_netcdf.f90:
  number of steps since last output added to stream-structure
  (needed to be stored in rerun-files; required for changing output time
   interval after rerun for average/standard deviation and accumulation)
- mo_scan_buffer.f90: initialization of xtte_a with 0.0
- mo_grib.f90: bug-fixes: use number of time steps since last output for
  calculations of average and standard deviation
- mo_mz_submodels_switch_mem.f90, mo_mz_submodels_switch.f90,
  call_submodels.f90, xmessy:
  new submodel LGTMIX (mo_mz_lgtmix.f90, mo_mz_lgtmix_e5.f90,
  lgtmix.nml)
- xmessy: host ds8 (cumulus.dkrz.de) added
- mo_tracdef.f90, mo_tracer.f90:
  new tracer attribute 'nlgmix' for mixing of Lagrangian tracers
- mo_tracdef.f90, mo_tracer.f90, mo_column.f90:
  tracer attribute 'force' renamed to 'nforce' for consistency
- h2o.nml, ptrac_t.nml: inserting i_p0 in regrid-namelist, which is
  required for successful offline pre-regridding (thank's to Swen Metzger)
- PTRAC: - coupled to ATTILA
	 - dynamic tracer definitions via namelists
- mo_mz_d14co_e5.f90: new subroutine d14co_init_cpl
- mo_mz_photo_e5.f90: new subroutine photo_init_cpl
- mo_mz_tools_e5.f90: start_message_e5, end_message_e5
- mo_mz_tools.f90:    start_message, end_message
- mo_mz_*_e5.f90 updated (scout, tnudge, dlr_attila, ptrac, h2o, ptrac
			  dradon, photo, advect, tropop)
- mo_mz_*.f90 updated (d14co, photo)
- mo_mz_regrid_tools_e5.f90: update

CHANGES by Patrick Joeckel and Christoph Bruehl:
- mo_mz_photo.f90, mo_mz_photo_e5.f90: now indepenent on vertical HALOE-grid
  -> WARNINGS updated

******************************************************************************

echam5.1.07_mz10t (21 Jan 04)

CHANGES by Holger Tost:
- Scavenging:
  - some small bug fixes
  - convective scavenging now scaled by an estimate of convective
    cloud cover due to the values of the updraft mass flux and no
    longer over the whole box
- Convective Tracer Transport:
  - new submodel CVTRANS to calculate convective tracer transport
    from the existing convective mass fluxes including a closure with
    entrainment/detrainment that leads to nmass conserving, monotone and
    homogeneous tracer fields
  - new stream in which the massfluxes and entrainment/detrainment rates
    of ECHAM before and after the closure and rescaling can be found (cvtrans)
  - code adapted from M. Lawrence
  - several stream elements taken from cumastr, cuasc, cuddraf

******************************************************************************

echam5.1.07_mz10s (12 Jan 04)

CHANGES by Astrid Kerkweg:
- mo_mz_hh_m7_e5.f90:
  WARNING: ONLY TO BE USED AFTER unitchange for tracer from kg/kg to mol/mol
	read and check of CPL-namelist
	therefore    - subroutine m7_read_nml_e5
		     - subroutine m7_check_nml_e5
	added
- mo_mz_mecca.f90:
	subroutine mecca_read_nml rewritten
	(= uses now subroutine of mo_mz_tools_e5 by P. Joeckel)

- mo_mz_mecca_e5.f90; mo_mz_mecca_mbl_e5.f90:
	- use t_stream from definition place: mo_linked list
	- new redistribution of namelist reading and checking:
		-  reading of CPL moved to mecca_init
		-  subroutines mecca(_mbl)_check_e5 added
	- activate subroutines mecca_mbl_alloc_mem and(!) mecca_mbl_init_tracer

- mo_mz_hh_m7_e5.f90; mo_mz_hh_m7_mem_e5.f90; mo_mz_hh_m7_ext_func.f90
	rnummed and densaer changed from 4d-stream-element to pointer-array
	introduction of ARRAY1D- and od streams for aerosol parameter
	needed in other modules

- mo_mz_emdep_xtsurf_e5.f90:
	code changed accordingly to changes in M7

- mo_mz_hh_m7_chem_forcing.f90; mo_mz_hh_m7_mem_e5.f90;
  vdiff.f90:
	velo10m changed to wind10_2d from physc_interface

- mo_mz_emdep_drydep_e5.f90:
	".not.lfirst_day" added to call of emdep_xtsurf_vdaer

- xecham:
  question for ESH_NO = 0 for "no don't delete any file" added

******************************************************************************

echam5.1.07_mz10r (12 Jan 04)

CHANGES by Rolf Sander:
- Makefile.in: output changed if zip file exists

CHANGES by Joachim Buchholz:
- call_submodels.f90: comment in call_chem_bcond corrected
- cloud.f90: The former mz_psc_cloud.f90 and cloud.f90 are merged. The changes
  in cloud.f90 include tidying up the USE statements, applying the kind
  parameter dp througout the module, adding intent attributes to all dummy
  variables and explicit declarations for all variables. Furthermore, if
  USE_PSC then cloud.f90 has now no effect in the psc relevant region, like in
  the old mz_psc_cloud.f90.
- host.list: changed to psi24s.rzg.mpg.de
- mh-aix: comment regarding host.list changed (see host.list)
- mh-mac: changed architecture name ARCH to "darwin"
- mo_advection.f90: global SAVE statement added
- mo_cloud.f90: resolution dependency of cauloc has been rewritten in a more
  flexible way based on the values found in echam5.2.02; minor improvements
- mo_constants.f90: kind paramter dp applied throughout module
- mo_cumulus_flux.f90: resolution dependency of cmfctop and cprcon has been
  rewritten in a more flexible way based on the values found in
  echam5.2.02; kind parameter dp applied throughout module
- mo_diag_tendency.f90: SAVE attributes added for pdiga, pdsga, pdigaa,
  pdigas, pdsgaa, pdsgas, pdigb, pdigba, pdigbs, pdigs, pdigsa, pdigss,
  pdsgs, pdsgsa, pdsgss
- mo_gwspectrum.f90: kind parameter dp applied throughout module;
  parameter emiss_press new; former namelist parameter emiss_lev is no
  longer in namelist gwsctl and has new initial value
- mo_memory_g2a.f90: SAVE attributes added for um1, vm1, dudlm1, dvdlm1,
  dtlm1, dtmm1
- mo_memory_g3a.f90: global SAVE statement added
- mo_mz_hh_m7_ext_func.f90: use of kind parameter i4 in subroutine m7_chemistry
  modified
- mo_mz_physc_interface.f90: kind parameter dp used for declaration of
  2-dimensional fields
- mo_mz_psc_e5.f90: preprocessor directive for darwin added
- mo_mz_psc.f90: new model version name ("20040108")
- mo_nmi.f90: SAVE attributes added for dh_t, dh_m, dh_l, buf_t, buf_m, buf_l
- mo_physc1.f90: SAVE attribute removed; global SAVE statement added, kind
  parameter dp applied throughout module
- mo_sc1.f90: SAVE attributes removed; global SAVE statement added, IMPLICIT
  NONE statement added, PUBLIC statement added, kind parameter dp applied
  throughout module
- mo_ssortns.f90: kind parameter dp applied throughout module
- mo_time_control.f90: resolution dependency of set_delta_time has been
  rewritten in a more flexible way based on values found in echam5.2.02;
  minor improvements
- mo_timer.f90: global SAVE statement added
- mo_tmp_buffer.f90: kind parameter dp applied throughout module
- mo_tracdef.f90: kind parameter dp applied throughout module
- mo_tracer.f90: kind parameter dp applied throughout module
- mz_psc_cloud.f90: removed (see cloud.f90)
- physc.f90: call of mz_psc_cloud removed; abs, epsilon, max, min, sqrt, tanh
  added to INTRINSIC statement; EXTERNAL statement adapted; kind parameter dp
  applied throughout module
- physctl.inc: tab removed
- rad_int.f90: resolution dependency of zinpar and zinhomi has been rewritten
  in a more flexible way based on the values found in echam5.2.02; kind
  parameter dp applied throughout module; minor improvements
- setgws.f90: emiss_lev is now calculated from the gwsctl namelist parameter
  emiss_press; kind parameter dp applied throughout module
- WARNINGS: changed parameterisations mentioned in WARNINGS (see mo_cloud.f90,
  mo_cumulus_flux.f90, mo_gwspectrum.f90, mo_time_control.f90 and rad_int.f90)

******************************************************************************

echam5.1.07_mz10q (7 Jan 04)

CHANGES by Patrick Joeckel:
- mo_linked_list.f90, mo_memory_base.f90, mo_grib.f90, mo_netcdfstream.f90,
  mo_io.f90: added SCALAR and ARRAY1D representations
- xmessy:
  - modified modifications (from Swen) for modified m7
  - modifications for octopus
- emiss_fields_volc.txt: moved from
  /modeldata/ECHAM5/messy/raw/m7
  to
  /modeldata/ECHAM5/messy/raw/m7/misc
- mo_mz_transform_e5.f90: bugfix (initialization of f) in fas2f

CHANGES by Swen Metzger:
- xmessy:
  aerosol subdirectory removed and replaced by INPUTDIR_MESSY
  for consistency with USE_m7 USE_eqsam (both submodels are now part of MESSy)
- new subdirectories for preregridded files: /modeldata/ECHAM5/messy/T*
- call_submodels.f90:
  - 'IF (USE_EQSAM)  CALL  eqsam_chem' activated
- physc.f90:
  - 'm7_chem' removed (since called in call_submodels.f90)
- mz_psc_cloud.f90:
  Pointer dimension modified to avoid IBM compiler crash on Apple.
- createMakefiles.pl.in: "-Wf,-A idbl4" included as compiler option for
  mo_mz_hh_m7_chem_forcing.f90 for consistency with call_submodels.f90

CHANGES by Astrid Kerkweg:
- aerosol.eqn: references added
- mecca/latex/*.awk:
  - scripts adapted to aerosol chemistry

CHANGES by Rolf Sander:
- /modeldata/ECHAM5/messy/raw now contains two more subdirectories,
  m7/ and eqsam/
- gas.eqn:
  - references added
  - several rate constants updated (Atkinson 2003, JPL 2003 etc.)
  - unimportant reactions labeled with Box and Jh which were previously
    included as comments are now deleted
  - consistent reaction numbers
- Makefile.in:
  - gmake validate tests if code fulfills some necessary conditions for
    check-in
- mo_mz_mecca_e5.f90, mo_mz_mecca.f90: definitions of special rate
  constants (k_G2108 etc.) moved from _e5 to core file.
- mecca/boxmodel: Makefile includes dependencies.inc
- return if lfirst_day added to m7_chem

******************************************************************************

echam5.1.07_mz10p (22 Dec 03)

CHANGES by Rolf Sander:
- xecham:
  - quits immediately if xmecca returns with exit status 1
  - new option "config" creates Makefile via configure, then exits

CHANGES by Christoph Bruehl:
- mo_mz_photo.f90 and mo_mz_photo_e5.f90: subroutine 'haloe_prof'
  removed, HALOE-O3 for upper boundary is read instead by 'photo_read'
  from nc-file monthly. photo.nml changed accordingly. Code now
  resolution independent. Bug-fixes.

******************************************************************************

echam5.1.07_mz10o (19 Dec 03)

CHANGES by Swen Metzger and Astrid Kerkweg:
- M7 and EQSAM re-implemented according to MESSy structure.
  - All include files have been removed and separate namelist (m7.nml,
    eqsam.nml) and switches for M7 (USE_M7) and EQSAM (USE_EQSAM) have
    been introduced, replacing USE_AEROSOL and aerosol.nml (including
    lm7, leqsam).
  - ALL M7 core (source) routines are now included in mo_mz_hh_m7.f90,
    accordingly, EQSAM core is in mo_mz_eqsam.f90.
  - Parameter are defined in mo_mz_hh_m7_mem_e5.f90 and
    mo_mz_eqsam_mem_e5.f90.
  - deleted files: aero_eqsam_ctl.inc aeroctl.inc aerom7ctl.inc
    aerosol.nml m7_2.nml m7_averageproperties.f90 m7_coaset.f90
    m7_concoag.f90 m7_cumnor.f90 m7_dconc.f90 m7_delcoa.f90 m7_dgas.f90
    m7_dnum.f90 m7_equil.f90 m7_equimix.f90 m7_equiz.f90
    m7_interface.f90 m7_nuck.f90 m7.f90 mo_aero_m7_eqsam.f90
    mo_aero_m7.f90 mo_aero_mem.f90 mo_aero_nucl.f90 mo_aero_trac.f90
    mo_aero.f90 mo_aerosol_e5.f90 mo_chem_forcing.f90
    mz_eqsam_interface.f90 mz_eqsam.f90 runM7column runM7mpi runM7nec
    xt_aero_prop.f90 xt_burden.f90 xt_chemistry.f90 xt_sedimentation.f90
    xt_wetdep.f90
  - new files: m7.nml eqsam.nml mo_mz_eqsam_e5.f90 mo_mz_eqsam_mem.f90
    mo_mz_eqsam_mem_e5.f90 mo_mz_eqsam.f90 mo_mz_hh_m7_chem_forcing.f90
    mo_mz_hh_m7_e5.f90 mo_mz_hh_m7_ext_func.f90 mo_mz_hh_m7_mem_e5.f90
    mo_mz_hh_m7_mem.f90 mo_mz_hh_m7_nucl.f90 mo_mz_hh_m7.f90
  - modified files:
    physc.f90 : callings of m7_interface, eqsam_interface and
		xt_aero_prop removed.
    xmessy    : USE_AEROSOL replaced by USE_M7 and USE_EQSAM
    echam.nml : m7/eqsam namelist removed
  - modified files according to replacement of USE_AEROSOL by USE_M7 and
    USE_EQSAM: mo_mz_emdep_emis_e5.f90 mo_mz_emdep_xtsurf_e5.f90
    mo_mz_mecca_e5.f90 mo_mz_scav.f90 mo_mz_scav_e5.f90
    mo_mz_submodels_switch.f90 mo_mz_submodels_switch_mem.f90
    call_submodels.f90 cloud.f90 cudtdq.f90 cuflx.f90 mz_psc_cloud.f90
    surf.f90 vdiff.f90

CHANGES by Astrid Kerkweg:
- mo_physc1.f90: dp and SAVE for REAL declaration of cdisse added
- util/createMakefiles.pl.in: special case for
  mo_mz_hh_m7_chem_forcing.f90 for SX included

******************************************************************************

echam5.1.07_mz10n (18 Dec 03)

CHANGES by Patrick Joeckel and Rolf Sander:
- xecham: question "write 0 to ESH_NO?" moved to s1r partial_cleanup

CHANGES by Patrick Joeckel:
- new README file for input files in /modeldata/ECHAM5/messy/raw/
  directories: d14co, dradon, ptrac
- mpich-library v1.2.5.2 installed
- config/mh-linux:   - update (mpich v1.2.5.2_lf) -> SEE WARNINGS
		     - preparations for octopus
- config/mh-linux.i: (EXPERIMENTAL !) configuration for
		     INTEL ifort 8.0 on Linux
- mo_time_manager.f90: preprocessor option for INTEL ifort 8.0 on Linux
- mo_mz_tropop_e5.f90: two PUBLIC attributes removed
- call_submodels.f90: submodel TNUDGE
- mo_mz_tnudge.f90, mo_mz_tnudge_e5.f90, tnudge.nml:
  namelist control for flexible tracer nudging
- mo_mz_h2o_e5.f90:
  - conversion of tendencies q <-> H2O corrected (thank's to Christoph Bruehl)
  - I_H2O_TENDENCY = -2 : no tendency, no initialization

CHANGES by Michael Traub and Patrick Joeckel:
- mo_mz_attila_tools.f90: bug fix for mass conservation in
  GP <-> LG transformation
- mo_mz_tropop.f90: bug fix in if_PVtropop for index of PV tropopause at
  low latitudes

CHANGES by Benedikt Steil:
- mo_mz_mecca_kpp_mem.f90:
  - all functions elemental, merged and optimized
  - results can be checked by the activation of  CALL check_new_func

******************************************************************************

echam5.1.07_mz10m (17 Dec 03)

CHANGES by Rolf Sander:
- several changes in mecca/: see mecca/CHANGELOG
- Makefile.in:
  - exclude directory -x '*/tmp/*' added to gmake zip
  - gmake zip1r creates zip file without data/ directory in path
- mo_mz_psc.f90, mo_mz_psc_e5.f90, mo_mz_submodels_switch.f90:
  renamed modver_psc=>modver
- physc.f90, mo_mz_physc_interface.f90: ptp_2d deleted because better
  tropopause is available from TROPOP
- mo_netcdfstream.f90: time_step_len changed to delta_time

CHANGES by Christoph Bruehl:
- mo_mz_photo.f90:
  month_haloe = month/2
  IF(month.EQ.1)  month_haloe = 6

******************************************************************************

echam5.1.07_mz10l (11 Dec 03)

CHANGES by Patrick Joeckel:
- new SUBMODEL SCOUT (Selectable Column OUTput) for high frequency (HF)
  output at dedicated locations
- mo_linked_list.f90, mo_memory_base.f90, mo_grib.f90, mo_netcdfstream.f90,
  mo_io.f90:
  added COLUMN representation for HF-Station-Sounding-Output
  and rerun-handling in 3D mode
- mo_mz_tropop_e5.f90, mo_mz_tropop.f90:
  bug-fixes (thank's to Michael Traub)
- mo_mz_h2o_e5.f90: bug fixes (time filter)

CHANGES by Christoph Bruehl:
- (undocumented changes in photo* and h2o*)

CHANGES by Rolf Sander:
- mo_mz_mecca_e5.f90: back again to CALL kpp_integrate(time_step_len)
  until time-filter consistency is clarified

******************************************************************************

echam5.1.07_mz10k (11 Dec 03)

CHANGES by Laurens Ganzeveld:
- mo_mz_emdep_emis: the seasalt emission routine of M7, written by
  Philip Stier and developed by Michael Schultz, has been included as an
  extra subroutine in the emdep file structure. At the moment this
  routine is only called whenever USE_AEROSOL=.false. but which will be
  changed in updated versions.
- In mo_mz_emdep_emis_e5.f90 and mo_mz_emdep_emis.f90 some changes have
  been introduced to include a subroutine to perform sensitivity
  analyses of snow-atmosphere O3 exchanges: emdep_emis_snice_O3, which
  is being called whenever l_emis_snice_O3 is set to true in the emdep
  namelist and which initializes a prescribed snow/ice ozone emission
  flux. The switch is not included in the default namelist and
  consequently not used.
- mo_mz_emdep_xtsurf_e5.f90: emdep_xtsurf_vdaer, in the aerosol dry
  deposition code some modifications have been introduced based on
  comments by Philip Stier who found some inconsistencies in the
  parameters, e.g., alpha, bubble etc.
- mo_mz_emdep_xtsurf_e5.f90: line 168: The statement :
	 IF (trlist%ti(jt)%ndrydep.EQ.2.) THEN
  has been replaced by:
	 IF (trlist%ti(jt)%ndrydep.EQ.2.AND.   &
	     trlist%ti(jt)%nphase.EQ.GAS) THEN
  This is done to avoid the assignment of an index number to aerosol species
  for which ndrydep is also set to 2. The parameter VD_BIGL, which is a
  diagnostic parameter, should only contain the gaseous-phase dry deposition
  velocities. The statements with the VD_BIGL parameter have been reinforced
  again.
- mo_mz_emdep_xtsurf_e5.f90: line 1251: the next switch settings have been
  removed since the first two were already set in in mo_mz_emdep_xtsurf.f90.
  Definition of lvd_intergrated is also moved to that subroutine.

    !@@@ Define switches and parameters until interfaces are defined:

    LOGICAL :: lwhitecap      = .TRUE.
    LOGICAL :: ldr_rh         = .FALSE.
    LOGICAL :: lvd_integrated = .TRUE.
- mo_column.f90, mo_mz_column.f90, columnctl.inc: new lat_1d_deg,
  lon_1d_deg: longitude and latitude in degrees with negative values
  referring to western and southern locations
- new submodel TNUDGE with mo_mz_tnudge.f90, mo_mz_tnudge_e5.f90,
  tnudge.nml (tracer nudging): up to now only the ozone at the PV level
  is included and still hardcoded used to nudge ozoone concentrations
  using mo_my_tropop_e5.f90 parameters.

******************************************************************************

echam5.1.07_mz10j (11 Dec 03)

CHANGES by Rolf Sander:
- mo_mz_mecca_e5.f90: CALL kpp_integrate(delta_time) instead of
  time_step_len
- Makefile, Makefile.in:
  - rm data/* added to distclean again. New option veryclean is like
    distclean but keeps data/* and html/*.
  - "gmake zip1r" creates zip file with 1d and rerun files.
- xecham:
  - "gmake distclean" changed to "gmake veryclean" when starting from scratch
  - writing 0 to ESH_NO (to ensure that new binary will be used) now also
    for option 'r'
  - queueing system mandatory on hydra
  - since the cleanup options "1" for 1D and "r" for rerun are usually
    not needed individually, they now only consist in the combined form
    "s1r".
- xmessy: "cat $WORKDIR/nudge.nml >> $WORKDIR/echam.nml" changed to:
  "sed 's|!.*||g' $WORKDIR/nudge.nml >> $WORKDIR/echam.nml" This deletes
  comments before adding the contents to the end of echam.nml (also for
  columnctl).
- mo_machine.f90: dd = 0.0_dp (not 0.0_sp)
- mo_mz_mecca_e5.f90, mo_mz_mecca_mem_e5.f90, mecca.nml: sulfate_gas
  renamed to H2SO4_gas
- new README file for input files in /modeldata/ECHAM5/messy/raw/mecca
- vdiff.f90, mo_aero_mem.f90, mo_chem_forcing.f90: velo10m from
  mo_aero_mem replaced by wind10_2d from mo_mz_physc_interface
- mo_mz_mecca.f90, mo_mz_mecca_e5.f90, mo_mz_submodels_switch.f90,
  gas.eqn, tracdef.awk: for consistency with other submodels,
  modstr_mecca renamed to modstr
- mo_mz_mecca_e5.f90: during initialization, only mecca tracers are now
  set to zero if negative
- gas.eqn: khet* variables changed from 3d-arrays to scalars
- mo_mz_mecca_e5.f90, mo_mz_mecca_mbl_e5.f90: loc_idt* renamed to zidt*

******************************************************************************

echam5.1.07_mz10i (10 Dec 03)

CHANGES by Joachim Buchholz:
- config/mh-aix: due to changes at the computing center Garching psi01s became
  psi24 in "echo 'psi24.rzg.mpg.de' > host.list'"
- mecca/gas.eqn: Khet1(jp,jk,jrow) became Khet1, similar for other heterogeneous
  reaction rates (bugfix)
- modules/mo_aero_mem.f90: SAVE attribute added for zprcip
- modules/mo_cloud.f90: SAVE attribute added for tbetai0, tbetai1, rbetak
- mocules/mo_mz_mecca.f90: dummy_time changed from typ real(dp) to type double
  precision (workaround for bug)
- modules/mo_memory_gl.f90: SAVE attribute added for q, xl, xi
- modules/mo_mz_psc.f90: elemental functions T_nat, T_ice now public
- modules/mo_mz_psc_e5.f90: by means of preprocessor directives, parts of
  psc_chem are now system dependent (necessary due to compiler bug of the
  IBM xlf95-compiler); pointer array val_psc replaced by stream element;
  val_psc now calculated in new subroutine psc_chem_bcond, subroutines
  psc_check and psc_dealloc_mem removed; bugfixes and minor improvements
- modules/mo_param_switches.f90: global SAVE statement added
- src/call_submodels.f90: subroutine call psc_chem_bcond added, subroutine call
  psc_dealloc_mem removed
- src/cuflx.f90: explicit type conversion from real to integer added (bugfix)
- src/mz_psc_cloud.f90: new version based on new cloud.f90; val_psc now stream
  element

CHANGES by Patrick Joeckel:
- mo_mz_tropop.f90, mo_mz_tropop_e5.f90: bugfixes:
  REAL, DIMENSION(:), INTENT(OUT) :: lpblh_idx
  USE mo_constants,           ONLY: api, rd, cpd, g, alv, als

******************************************************************************

echam5.1.07_mz10h (4 Dec 03)

CHANGES by Patrick Joeckel:
- mo_mz_tropop_e5.f90: bug-fix (missing p_bcast) (thank's to Michael Traub)
- mo_io.f90: bug-fix (thank's to Astrid Kerkweg)
- mo_mz_h2o_e5.f90, mo_mz_h2o.f90, h2o.nml, h2o_t.nml: rewritten,
  simplified, bug-fixes, code-cleanup, MESSy-conform code, time-filter
  conformance, ...
- Makefile.in: define architecture-specific preprocessor directive

CHANGES by Christoph Bruehl:
- new module for chemical changes of stratospheric H2O and initialization by
  satellite data (done when USE_H2O = .true. or USE_MECCA = .true.) introduced:
  mo_mz_h2o_e5.
- Changes in src/call_submodels, mo_mz_submodels_switch, and xmessy, additional
  namelists h2o_t.nml and h2o.nml (for the chemical source climatology).
- changes also in mo_mz_mecca_e5 for interactive water

CHANGES by Rolf Sander:
- config/mh-linux: --pca option (protect constant arguments) deleted
  because it could hide errors

******************************************************************************

echam5.1.07_mz10g (2 Dec 03)

CHANGES by Rolf Sander:
- TODO file moved into echam distribution

CHANGES by Holger Tost:
- whole structure of the scavenging code changed (most of the
  calculation now done in the core routines in mo_mz_scav.f90)
  mo_mz_scav_e5.f90 now almost only an interface (as it should be)
- several bugfixes with concentrations from the former timestep of
  mo_mz_scav_e5.f90 and now in mo_mz_scav.f90
- several changes in the equilibrium constants for dissociation
- added variable zrainh in cuflx.f90
- stream phy_scav only if use_scav = .true.
  required changes in cloud.f90, cudtdq.f90
- new switch in scav.nml for a first atempt of scavenging of
  eqsam-tracer (in development)
- changes in xmecca for building the cloud/rain chemistry (ROS3 necessary !!!!)
- convective scavenging now in the whole convective rainflux and not as
  before in the part of newly produced convective rain (within and below
  the column of convection)
- evaporation now calculated as change in the rainflux
- new sream elements: wdflxcv_sum and wdflxls_sum are the accumulated convective
  and large-scale wet deposition rates already integrated over the modeled time

******************************************************************************

echam5.1.07_mz10f (2 Dec 03)

CHANGES by Rolf Sander and Astrid Kerkweg:
- mo_mz_mecca.f90: parameters for CALL integrate changed back from
  (0.,dt) to (dummy_time, dummy_time+dt) to avoid compiler problem

CHANGES by Astrid Kerkweg:
- mo_tracdef.f90, mo_tracer.f90, mo_column.f90, mecca/tracdef.tex,
  mecca/tracdef.awk: individual forcing for each tracer enabled
- tracdef.awk: possibility to add rerun=OFF and force=OFF to all tracers
- mo_mz_mecca.f90, mo_mz_mecca_e5.f90, mo_mz_mecca_mbl_e5.f90,
  mecca.nml:
  - namelist splitted in CTRL and CPL
  - mecca is now ready to use another aerosol module (other than m7)

******************************************************************************

echam5.1.07_mz10e (27 Nov 03)

CHANGES by Patrick Joeckel:
- mo_mz_dradon*.f90, dradon.nml: update
- mo_mz_d14co*.f90, d14co.nml: update
- mo_mz_attila_tools.f90,mo_mz_dlr_attila.f90: update
- xmessy, mo_mz_submodels_switch.f90, src/call_submodels.f90:
  new submodel 'ptrac'

CHANGES by Michael Traub:
- mo_mz_physc_interface.f90, vdiff.f90: new fields added:
  convtype, zust_2d, zsenkf_2d, zlatkf_2d, zcdh_2d
- mo_mz_tropop.f90,mo_mz_tropop_e5.f90,tropop.nml:
  added boundary layer diagnostics

CHANGES by Patrick Joeckel and Michael Traub:
- mo_mz_dlr_attila.f90: bug-fixes (INT...)

CHANGES by Patrick Joeckel and Christoph Bruehl:
- 'stratos' removed from photo.nml, 'lmidatm' from ECHAM used instead in
  mo_mz_photo_e5
- 'force'-switch in photo.nml forces calculation and output of all
  photolysis rates independent of tracers or 'lmidatm' (default .false.)

******************************************************************************

echam5.1.07_mz10d (20 Nov 03)

CHANGES by Astrid Kerkweg:
- aerosol.eqn: Label N added
- tracdef.tex: ndrydep for aerosol components changed to 3
- mo_aero_trac.f90: ndrydep for m7 aerosol components changed to 3 (but
  not for eqsam)
- emdep_drydep_e5, emdep_xtsurf_e5: check for ndrydep ==3 instead of >0
  for aerosol components
- mo_mz_mecca_e5.f90: incorrect factor 1e3 deleted in sulfur emission
  calculation
- mo_mz_mecca_mbl_e5.f90: for halogen ion emission check for KPP_Clm_**
  added

CHANGES by Rolf Sander:
- mecca/integr/ros3.k: STEPMIN and STEPMAX defined here (see also
  mecca/CHANGELOG)
- mecca/* and mo_mz_mecca_e5.f90: new integrator ros3-diag (like ros3
  but with diagnostics output for time step control)

CHANGES by Astrid Kerkweg and Rolf Sander:
- USE_XXX moved from mo_mz_submodels_switch.f90 to
  mo_mz_submodels_switch_mem.f90 and USE statements changed accordingly.

******************************************************************************

echam5.1.07_mz10c (25 Nov 03)

CHANGES by Rolf Sander:
- Makefile.in: distclean option does not "-rm -fr data/*"
  (it destroys rerun and forcing files when recompiling with new
  compiler options)
- mecca/xmecca: new option to create mecca box model
- mecca/mbl: even stricter separation between core and e5 files
  (necessary to run mecca also as a box model, independent of echam):
  - mo_mz_mecca_mem.f90: t_stream POINTER mecca moved to
    mo_mz_mecca_e5.f90 (also change in mo_mz_mecca_mbl_e5.f90)
  - mecca/gas.eqn: see mecca/CHANGELOG
  - modules/mo_mz_emdep_emis_e5.f90: "USE mo_mz_mecca_mem" deleted
  - echam-specific commands "USE mo_mz_psc_kpp_mem" and "USE
    mo_mz_photo" moved from gas.eqn to mo_mz_mecca_e5.f90
  - mo_mz_mecca_e5.f90: echam-specific stream elements for J-values and
    heterogeneous psc rate constants are transferred to scalars, e.g.:
    "RJ_NO2 = RJ_NO2_3d(jp,jk,jrow)"
  - mo_mz_mecca_kpp_mem.f90: declarations of scalars RJ_* and khet*
  - mo_mz_mecca_mem_e5.f90: New module. idt_* are now here and not in
    mo_mz_mecca_mem.f90 anymore. USE commands in mo_mz_mecca_e5.f90,
    mo_mz_mecca_mbl_e5.f90, and mo_mz_scav_mem.f90 are changed
    accordingly.

******************************************************************************

echam5.1.07_mz10b (27 Oct 03)

CHANGES by Patrick Joeckel:
- mo_doctor.f90: updated version
- WARNINGS: updated
- xmessy: embedded flags for NQS deactivated (use NQSII on hurrikan2)
  (see WARNINGS)
- config/mh-aix: update to netCDF v3.5.1b11
- config/mh-linux: updated compiler options for lf95 v6.20a
    --f95 --chk a,e,s,u --pca --ap -g --trap --verbose -O0 -Cpp
- submodels D14CO, DRADON, ATTILA, TROPO, EMDEP-LNOX checked
  with updated compiler options on Linux
- mo_gaussgrid.f90, mo_hyb.f90:
  (global) SAVE added
- mo_io.f90: bug-fixes (undefined statusx1/x2 for lav,lsd after rerun)
- mo_grib.f90: bug-fixes and improved diagnostic output
- mo_linked_list.f90: bug-fixes for potential NULL-pointers (lav, lsd)
- mo_memory_base.f90: corrected for LAGRANGIAN stream-elements with
  length < #CPUs
- mo_memory_g1a.f90, mo_memory_g1b.f90, mo_memory_gl.f90,
  mo_memory_streams.f90: simplified link to ATTILA for LAGRANGIAN tracers
- mo_mz_dc_tools_e5.f90: bug-fixes
- mo_mz_dlr_lnox.f90, mo_mz_emdep_lnox_e5.f90:
  applied bug-fixes reported by Volker Grewe (DLR)
- run/nml/emdep.nml, run/nml/emdep_min.nml: updated CTRL_LNOX namelist
  (see WARNINGS)
- mo_mz_tropop_e5.f90: lrerun = .false.
- mo_mz_tropop.f90: bug-fix
- mo_scan_buffer.f90:
  - (global) SAVE added
  - restore commands for .NOT. (ntrac > 0)
- mo_tracer.f90: restore commands for .NOT. (ntrac > 0)
- call_submodels.f90: updates for ATTILA
- dyn.f90: initialization and simplified condition for calculation of
  (p)etadot
- scan1.f90:
  - restore commands for .NOT. (ntrac > 0)
  - bug-fix for LAGRANGIAN tracers
- si1.f90: bug-fix for LAGRANGIAN tracers
- util/createMakefiles.pl.in: added \$(F90DEFS) for special rules on
  NEC-SX6
- mo_mz_attila_tools_e5.f90: new module
- physc.f90:  "IF (ntrac>0)" for "CALL xtdiagn" deleted

CHANGES by Michael Traub and Patrick Joeckel:
- mo_mz_attila_tools_e5.f90, mo_mz_attila_tools.f90,
  mo_mz_dlr_attila.f90, mo_mz_dlr_attila_e5.f90,
  mo_mz_dc_tools_e5.f90: updated
- run/nml/attila.nml: CPL-namelist added
- mo_mz_dradon.f90, mo_mz_dradon_e5.f90, dradon.nml:
  updated, coupling to ATTILA
- mo_mz_regrid_tools_e5.f90:
  updated for LAGRANGIAN tracers (INIT_TRACER)

CHANGES by Astrid Kerkweg:
- dyn.f90: IF (ldc% col_1d) petadot(jl,jk+1,jrow) = 0.

******************************************************************************

echam5.1.07_mz10 (8 Oct 03)

CHANGES by Rolf Sander:
- xecham: option "d" is now included in "c" and thus obsolete
- chemistry code updated to mecca version 08

CHANGES by Patrick Joeckel:
- stepon.f90, scan1.f90: original position of out_streams reestablished
- xmessy: queuing system NQSII for NEC-SX6 added
- mo_io.f90: bug fix for SPECTRAL representation
- xmessy: simplified and correction of INPUT-PATHs for NEC-SX6
- Makefile.in: added target 'make' to target 'all'
- mo_scan_buffer.f90: bug-fixes
- mo_mz_transform_e5.f90: move #ifdef EXPLICIT ... #endif blocks
  commented-out behind END MODULE (!!!) to make it compilable on SX6/cross
  (otherwise multiply defined. first defined in ../modules/mo_transpose.f90)
- Makefile.in, configure.in, configure: define LITTLE_ENDIAN
  (for nudging routines)

******************************************************************************

echam5.1.07_mz09y (2 Oct 03)

CHANGES by Patrick Joeckel and Rolf Sander:
- xecham, xmecca: tcsh path changed to /bin/tcsh
- mz_echam renamed to xmessy (changes also in xecham, configure.in,
  mo_exception.f90)
- xkpp renamed to xmecca (changes also in xecham, Makefile.in, mecca/decomp/*)

CHANGES by Michael Traub:
- cleaning of attila module files
- changing some parameters in attila-nml
- mo_mz_physc_interface.f90: units for etadot

CHANGES by Patrick Joeckel and Michael Traub:
- mo_tracdef.90, mo_tracer.f90, mo_memory_g1a.f90, mo_memory_gl.f90,
  mo_memory_streams.f90, mo_memory_base.f90, mo_memory_g1b.f90,
  mo_scan_buffer.f90, mo_sc1.f90 tf1.f90, tf2.f90, scan1.f90, si1.f90,
  mo_netcdf.f90, mo_netcdfstream.f90: add Lagrangian tracers
- mo_scan_buffer.f90: add TARGET attribute
- mo_linked_list.f90: minor changes

CHANGES by Patrick Joeckel:
- new module mo_mz_transform_e5.f90 (based on mo_transpose.f90)
  for the transformation between different representations
- update NCREGRID
- stepon.f90, scan1.f90: moved out_streams and call_read
- mo_mz_tools_e5.f90: update

******************************************************************************

echam5.1.07_mz09x (2 Oct 03)

CHANGES by Swen Metzger:
- update of M7 src code form box model version 1.2 to 1.3. Changed files:
  - in src/ directory: m7.f90, m7_dconc.f90, m7_dgas.f90, m7_dnum.f90,
    m7_equil.f90, m7_equimix.f90, m7_equiz.f90, m7_interface.f90,
    m7_nuck.f90
  - in modules/ directory: mo_aero.f90, mo_aero_m7.f90, mo_aero_trac.f90
  - in include/ directory: aeroctl.inc, aerom7ctl.inc
  - in run/nml/ directory: aerosol.nml, echam.nml

******************************************************************************

echam5.1.07_mz09w (1 Oct 03)

CHANGES by Rolf Sander:
- mo_io.f90: call message if expected stream element is not in rerun
  file and contnorest=T

CHANGES by Christian Kurz and Michael Ponater, DLR OP, Aug. 2003:
- cuini.f90, cuasc.f90, cuflx.f90, cudlfs.f90, cuddraf.f90, cubasmc.f90,
  cumastr.f90, cudtdq.f90, vdiff.f90: Update from Sabine Brinkop to
  ensure positive tracer concentration during the model integration.
  Look for string "op_ck_20031001" to identify the modifications.

  Reference: Brinkop, S., Sausen, R.: A Finite Difference Approximation
  for Convective Transports which Maintains Positive Tracer
  Concentrations. Beitrge zur Physik der Atmosphre, 3, (1997), S.
  245-248

******************************************************************************

echam5.1.07_mz09v (1 Oct 03)

CHANGES by Astrid Kerkweg and Rolf Sander:
- mo_mz_physc_interface.f90: contnorest=.TRUE. added to streams
- mecca_mbl_calc_hrate and mecca_mbl_xaer moved from mo_mz_mecca_mbl.f90
  to mo_mz_mecca_mbl_e5.f90
- mecca/mbl: stricter separation between core and e5 files
- mo_mz_mecca_mbl_e5.f90: slf>0.8 instead of slm=1

CHANGES by Astrid Kerkweg:
- mz_echam and mh-linux: Getafix added as computer name
- gas.eqn, mo_mz_mecca_mbl*.f90: aerosol mode specifier AS/CS defined
  locally for submodel mecca_mbl
- tracdef.tex: Nap_cs tracer added

CHANGES by Holger Tost:
- mo_mz_scav*.f90: Bugs solved if it rains from above into a cloud: Now
  all rain that is falling into a box triggers below-cloud scavenging,
  all cloud water with a LWC > 1e-7 triggers in-cloud scavenging.
- mo_mz_scav_mem.f90: include new species for a more complex liquid
  phase chemistry scheme
- mo_mz_scav*.f90: unnecessary lines have been removed from the code

CHANGES by Joachim Buchholz:
- mo_mz_psc_e5.f90: psc stream elements khet1, ..., khet30 are no longer
  defined if USE_MECCA==.false. + minor improvements
- mz_psc_cloud.f90: new version, based on cloud.f90, not on old
  mz_psc_cloud.f90, which had a bug
- mo_memory_gl.f90: now tracer output can be switched off by optional parameter
  nwrite of subroutine new_tracer

CHANGES by Rolf Sander:
- inside the mecca files, "dp" is only defined in mo_mz_mecca and all
  other files use it from there
- gas.eqn: several updates from Rolf von Kuhlmann included (see
  mecca/CHANGELOG for details)

******************************************************************************

echam5.1.07_mz09u (27 Sep 03)

CHANGES by Laurens Ganzeveld:
- mz_echam, columnctl.nml: warnings added that 1D mode needs NPROMA=0
- mo_mz_emdep_emis.f90: the switch lemis_bio_NO_pls for pulsing is set
  to FALSE, until the rain history will be included.
- mo_mz_emdep_emis_e5.f90: Modified subroutine emdep_emis_chem_bcond to
  deal with the update of the tracer tendencies/pxtems for the off-line
  and on-line code
- emdep.nml: ef_3D_NO switched on again

CHANGES by Astrid Kerkweg:
- mecca_mbl: slm added for aerosol chemistry yes/no
- mecca_e5: subroutine save_emis 1/avo changed in 1/32. because sulfur mass
  and not number is needed.

CHANGES by Rolf Sander:
- vdiff.f90, mo_mz_dlr_attila_e5.f90, mo_mz_physc_interface.f90: zri_3d
  renamed to ri_3d because it is not a local variable
- mh-linux: syntax for lf95 option corrected to "--chk a,e,s,u,x"
- trailing spaces deleted in *mz*.f90
- mo_mz_emdep_xtsurf_e5.f90: Due to a problem of vd_bigl, all lines
  containing vd_bigl are commented out.

CHANGES by Astrid Kerkweg and Rolf Sander:
- physc.f90:
  - aerosol block     ! testing if .NOT. USE_AEROSOL makes no sense
  - "IF (USE_AEROSOL) THEN ... CALL m7_interface, CALL eqsam_interface
    ..." moved before vdiff because m7 aerosol radii are needed in vdiff

******************************************************************************

echam5.1.07_mz09t (24 Sep 03)

CHANGES by Swen Metzger:
- EQSAM aerosol composition model included (runs with and without Mecca
  chemistry)
- optionally the equilibrium model isorropia can be used on request (ask Swen).
- new or changed aerosol files: aero_eqsam_ctl.inc aeroctl.inc,
  aerosol.nml, mo_aero.f90, mo_aero_m7_eqsam.f90, mo_aero_mem.f90,
  mo_aero_trac.f90, mo_aerosol_e5.f90, mo_chem_forcing.f90,
  mz_eqsam.f90, mz_eqsam_interface.f90, eqsam_TM3_p07a_1997tavg.nc
- modified base files: cloud.f90, cudtdq.f90, cuflx.f90, physc.f90,
  surf.f90, vdiff.f90, echam.nml
- modified files in other submodels: mz_psc_cloud.f90, mo_mz_mecca_e5.f90
- changes for Mac: mh-mac, mz_echam

******************************************************************************

echam5.1.07_mz09s (23 Sep 03)

CHANGES by Rolf Sander:
- MECCA dummy stream deleted
- zriat_3d renamed to zri_3d
- xkpp produces requirements for submodel selections: REQ_PSC,
  REQ_PHOTO, REQ_AEROSOL (corresponding consistency check in
  mo_mz_submodels_switch.f90 deleted)
- mecca/mbl: stricter separation between core and e5 files
- H2O is now a regular MECCA tracer
- tracdef.tex: vini for accumulation soluble (as) deleted
- new uniform structure of input data files implemented
  (/modeldata/ECHAM5)

CHANGES by Michael Traub:
- mo_mz_physc_interface.f90: longname and unit of zri added

CHANGES by Holger Tost:
- mo_geoloc.f90, mo_tmp_buffer.f90, mo_memory_g1a.f90: duplicate SAVEs
  deleted

******************************************************************************

echam5.1.07_mz09r (10 Sep 03)

CHANGES by Rolf Sander:
- output of geoloc stream switched off

CHANGES by Michael Traub:
- mo_mz_physc_interface.f90: added some stream elements for attila

CHANGES by Patrick Joeckel:
- mz_echam / echam.nml: LMIDATM-switch for middle atmosphere version
- mz_echam: improved help
- submodel D14CO: tropopause for OH, STE now controlled via namelist
		  -> coupling to TROPOP possible
- submodel TROPOP: namelist control, O3(PV, month) added

******************************************************************************

echam5.1.07_mz09q (10 Sep 03)

CHANGES by Michael Traub and Patrick Joeckel:
- new submodel ATTILA:
  - added to mo_mz_submodels_switch.f90 and mz_echam
- new files mo_mz_dlr_attila_e5.f90 and mo_mz_dlr_attila.f90
- physc.f90, scan1.f90, stepon.f90, vdiff.f90, call_submodels.f90, dyn.f90:
  a few lines necessary to run *ATTILA* are added

******************************************************************************

echam5.1.07_mz09p (9 Sep 03)

CHANGES by Astrid Kerkweg:
- tracdef.tex: nrerun=OFF deleted for all aerosol species

CHANGES by Holger Tost:
- major changes in the scavenging code to prevent the scavenging of tracers
  that do not exist in mecca (structural changes, new module)
- the parameters necessary for the solution of the species as well as their
  tracer number is now in the new module MO_MZ_SCAV_MEM
- the I_ - Variables are replaced by the equivalent KPP_ - variables
- every local allocated variable is deallocated

CHANGES by Rolf Sander:
- mz_echam: if [ $ESH_NR -eq 1 ] ; then overwrite existing files in $WORKDIR
- bug fix in gas.eqn: H+O2 also for troposphere
- xecham: echo 0 >! data/ESH_NO to ensure that new binary will be used
- Makefile.in: distclean removes also src/*.log and modules/*.log

CHANGES by Astrid Kerkweg and Rolf Sander:
- CH3I emissions added

******************************************************************************

echam5.1.07_mz09o (8 Sep 03)

CHANGES by Patrick Joeckel:
- bug fixes in mo_io.f90 and mo_memory_base.f90
- new module mo_mz_tools_e5.f90 with ECHAM5-dependent MESSy tools
  currently: get tracer information usable on I/O-processor for unified
	     namelist read
- submodels d14co and dradon updated for unified namelist read
- submodel photo updated for unified namelist read
- submodel photo: output stream renamed to 'photo'
- update mo_mz_tools.f90
- update NCREGRID (v1.2b-dev)
- new submodel ADVECT
- new submodel TROPOP
- files in /modeldata: BIOSPH renamed back to XTSURF

CHANGES by Laurens Ganzeveld:
- BIOSPH renamed back to XTSURF
- more changes were done but precise details are not known anymore

CHANGES by Patrick Joeckel:
- new module mo_mz_tools.f90 with ECHAM5-independent MESSy tools
  usable in various submodels
  currently: routines to simplify NAMELIST input
- /modeldata/echam5_ini/mainz/emdep
  now contains files for BIOSPH and EMIS
- files renamed (XXX = tracer, yyyy = year, zzzzzzzzz = text, ??? = domain)
    emis_XXX_???.nc         -> offline emissions
    emis_ol_XXX_zzzzzz.nc   -> fields for online emission calculation
    emis_airc_XXX_yyyy.nc   -> aircraft emission data
    sfconc_XXX.nc           -> surface concentration
    biosph.nc
    biosph_soilpH.nc
- run/nml/emdep/nml: paths/filenames adjusted accordingly
- only one stream per sub-submodel: emis, biosph, lnox
- submodel EMDEP: STOP statements replaced by status/finish

******************************************************************************

echam5.1.07_mz09n (3 Sep 03)

CHANGES by Patrick Joeckel and Rolf Sander:
- submodels EMIS, XTSURF (now: BIOSPH), LNOX and DRYDEP combined into
  new submodel EMDEP (= emissions and deposition)

******************************************************************************

echam5.1.07_mz09m (2 Sep 03)

CHANGES by Laurens Ganzeveld:
- mo_column.f90: bug fix if LAT_1D or LON_1D are defined such that they
  are outside the grid of the selected model resolution. -> Call finish
- more changes were done but precise details are not known anymore

CHANGES by Holger Tost:
- mo_mz_scav_aqchem.f90: bug with N2O5_l fixed

******************************************************************************

echam5.1.07_mz09l (1 Sep 03)

CHANGES by Holger Tost:
- mo_geoloc, mo_tmp_buffer, mo_memory_g1a: SAVE included
- The scavenging routines are updated:
  - The liquid chemical reactions are updated now including the SO2
    oxidation and the heterogeneous loss of N2O5 whose reaction rate is
    still to be tested.....
  - The cloud reaction table has got new labels. Be careful that all the
    gasphase species used in the cloud.eqn exist in mecca. This still
    has to be developed.

******************************************************************************

echam5.1.07_mz09k (29 Aug 03)

CHANGES by Christoph Bruehl:
- photolysis controlled by tracer list, in mo_mz_photo_e5 a logical array
  is set to define stream elements and to calculate photolysis in
  mo_mz_photo only for species used. (iodine switch not needed anymore
  but stratos switch stays for special cases). The modules work in
  parallel environment.
- CH3Br and Halons introduced in MECCA and mecca_t.nml
- gas.eqn:
  - ALD + hv new RJ value: RJ_CH3CHO_3D
  - PAA + hv new RJ value: RJ_PAH_3d

******************************************************************************

echam5.1.07_mz09j (29 Aug 03)

CHANGES by Joachim Buchholz:
- mo_mz_psc.f90: all subroutines have been replaced by elemental functions, all
  functions have been made elemental
- mo_mz_psc_e5.f90: structure of subroutine psc_chem changed; bugs fixed
- psc_t.nml: i_hyar changed for 2d_Dez2000.nc; i_ps new, i_p0 changed for
  echam4chem.nc
- psc.nml: var from Aliq_sage.nc now A_LIQ_92 instead of A_LIQ_99

CHANGES by Rolf Sander:
- xecham:
  - new option sx to use cross compiler on hydra
  - optionally call xkpp
  - option "s" renamed to "snompi" and option "sm" renamed to "s"
- master.f90, inidoc.f90, mo_doctor.f90: new version string echam_version
- inidoc.f90: writing correct advection scheme to nc file
- mo_mz_mecca_gdata.f90: definition of modstr_mecca and modver_mecca is
  now here
- run/nml/*.nml: $RES changed to ${RES} in all outfile names

******************************************************************************

echam5.1.07_mz09i (13 Aug 03)

CHANGES by Laurens Ganzeveld:
- emission code now works in parallel environment
- tracer basename vs. full name inconsistency removed
- mo_tracer.f90: grmass [kg] (NEW UNIT!!!) and grvol [m3] for
  mo_mz_physc_interface are defined
- emis and xtsurf are now independent of MECCA
- mo_mz_emis_e5.f90: call finish if bioemis=true and USE_XTSURF=false
- mo_physc_interface: units for prc=m, prl=m
- output of drydep stream elements only for species that deposit
- bugs fixed in both offline and online (biogeo) emissions.

******************************************************************************

echam5.1.07_mz09h (12 Aug 03)

CHANGES by Patrick Joeckel:
- mz_echam: several bug fixes
- mo_mz_regrid_tools_e5.f90: TRACER_INIT skipped after restart (untested)
- mo_mz_dlr_lnox*.f90, lnox.nml, mo_mz_submodels_switch.f90, mz_echam,
  call_submodels.f90: new SUBMODEL LNOX (not yet giving scientific
  reasonable results !!!)
- config/mh-nec: update NETCDFROOT
- mo_linked_list: empty_info is no PARAMETER on SX6

CHANGES by Rolf Sander:
- xecham: info how to view log file on hydra while job is running

******************************************************************************

echam5.1.07_mz09g (11 Aug 03)

CHANGES by Christoph Bruehl:
- mo_mz_photo*.f90, photo*.nml:
  - Fixed dimension of HALOE-ozone array changed to T106.
  - Stratospheric photolysis rates can be switched off from namelist
  - arrays in 'photo_cal' reordered for better vectorization and easy
    introduction of general species switches.

CHANGES by Benedikt Steil:
- new scripts in mecca/decomp/
- mo_mz_mecca_kpp_mem.f90: Currently all functions appear twice. The old
  functions are still active. The new functions will be called soon to
  check for potential differences. The check is done, and there are no
  differences.

CHANGES by Rolf Sander:
- changes in mecca/ directory (see mecca/CHANGELOG)
- mo_mz_physc_interface.f90: tslm1 from g3b added

******************************************************************************

echam5.1.07_mz09f (7 Aug 03)

CHANGES by Astrid Kerkweg:
- tracdef.tex: label CONSTANT deleted for aerosol initialisation
- mo_mz_mecca_e5.f90, mo_mz_mecca_mbl_e5.f90:
  subroutines "mecca_mbl_save_pH" and "mecca_mbl_diag_output" added
- mo_mz_mecca_mbl.f90: limit for mbl chemistry set to lwc>1E-12

******************************************************************************

echam5.1.07_mz09e (6 Aug 03)

- NOTE: There are many small changes in mo_nudging*.f90 by Joachim which
  are not marked individually with mz_jb_* labels. If you have any
  questions, please ask Joachim or Patrick.

CHANGES by Joachim Buchholz:
- mo_control.f90: SAVE attributes removed, global SAVE statement added
- mo_diag_tendency.f90: SAVE attributes added for pdvor, pddiv, pdtem, pdprs,
  pdprl, p4prs
- mo_memory_g3b.f90: global SAVE statement added
- mo_memory_sp.f90: global SAVE statement added
- mo_netcdf.f90: SAVE attributes added for BELOWSUR, SURFACE, ABOVESUR2,
  ABOVESUR10, HYBRID, HYBRID_H
- mo_nudging*.f90: modifications for use of nudging with nproma /= 0 + minor
  improvements
- mo_physc2.f90: global SAVE statement added
- mo_post.f90: global SAVE statement added
- mo_time_control.f90: SAVE attributes added for nudg_start, nudg_stop,
  ndg_date0, ndg_date1, ndg_date2, ndg_date3, ndg_inp_date
- mo_transpose.f90: "USE mo_kind, ONLY: dp" added and used for dummy arguments
  and local variables in overloaded subroutines scatter_sp, scatter_gp

CHANGES by Patrick Joeckel:
- mo_memory_base.f90: bug fix in add_stream_reference (info copied to reference)

CHANGES by Rolf Sander:
- changes in mecca/ directory (see mecca/CHANGELOG)

******************************************************************************

echam5.1.07_mz09d (1 Aug 03)

CHANGES by Rolf Sander:
- changes in mecca/ directory (see mecca/CHANGELOG)
- mz_echam: logfile contains job-id

CHANGES by Holger Tost:
- xecham: infos about log file on hydra

CHANGES by Benedikt Steil:
- mo_mz_mecca_kpp_mem.f90: all kpp functions optimized as ELEMENTAL.
  Currently all functions appear twice. The old functions are still
  active. The new functions will be called soon to check for potential
  differences

******************************************************************************

echam5.1.07_mz09c (31 Jul 03)

CHANGES by Rolf Sander:
- changes in mecca/ directory (see mecca/CHANGELOG)

CHANGES by Patrick Joeckel:
- util/createMakefiles.pl.in : - architecture specific rules cleaned up
- d14co, dradon: transition to 'kind'-parameter
- config/mh-aix, config/mh-alpha: updates for NCPUS > 1
- config/mh-*: minor changes
- mo_mz_dc_tools_e5.f90: new SUBROUTINES for index decomposition
  of 1D and 4D fields
- mo_netcdf.f90: SAVE added
- mo_grib.f90, mo_io.f90, mo_linked_list.f90, mo_memory_base.f90,
  mo_netcdfstream.f90, mo_mz_dc_tools_e5.f90:
  added LAGRANGIAN representation for I/O and rerun-handling of
  1D fields (LAGRANGIAN information)
- mz_echam: update, preparations for new $INPUTDIR_* path-structure
- new info for howto setup on the IBM (AIX) ->
  www.mpch-mainz.mpg.de/~sander/echam/mz_echam.pdf
- mo_mz_regrid_base.f90: USE mo_kind / USE typesizes instead of
  hard-coded kind-parameters
- clean up all paths in *.nml
- *.nml:
  - comment-out 'outfile' in regrid-namelists
  - standard name of 'outfile' is now ncrg_$RES_*.nc without explicit path !
- nec_gmake: deleted, not necessary anymore

******************************************************************************

echam5.1.07_mz09b (25 Jul 03)

CHANGES by Rolf Sander:
- xecham: mpi and queueing updated
- mo_memory_g3b.f90: lines >132 characters truncated
- *.awk: [A-z] replaced with [A-Za-z] because of bug in old gawk version
  on hydra

CHANGES by Christoph Bruehl:

- The bugs in the photoroutine in case of 'iodine=.true.' are corrected:
  a broadcast of 'iodine' in 'mo_mz_photo_e5' is added; fint in
  'photo_cal' in 'mo_mz_photo' has now also the levels as dimension to
  allow correct splitting of loop
- Code runs on multi-processors on alpha and linux!
- photo.nml with consistent path (as in mz08)
- mz_echam_ma and echam_ma.nml for middle atmosphere version (timestep
  for T21, for T42 it has to be 900).

CHANGES by Patrick Joeckel:

******************************************************************************

echam5.1.07_mz09 (18 Jul 03)

- Alpha/OSF:                only 1 CPU with --disable-MPI
- Linux-PCs, Linux-Cluster: O.K.
- NEC-SX6/SUPER-UX          O.K., but netCDF I/O veeeery slow !!!
- IBM-SP2/AIX               only 1 CPU

CHANGES by Patrick Joeckel:
- util/createMakefile.pl.in: changes required for IBM/AIX
- update in configure and Makefiles
- mo_mz_d14co.* and mo_mz_dradon.*: jp for kproma loop variables etc.
- mo_mz_emis_e5.f90 and mo_mz_scav_e5.f90: bug fixes for standard f90
- mz_echam: delete comments in namelists when copying to working directory

******************************************************************************

echam5.1.07_mz08f (14 Jul 03)

CHANGES by Michael Traub and Patrick Joeckel:
- new MODULE mo_mz_dc_tools_e5.f90

CHANGES by Patrick Joeckel:
- mo_memory_base.f90:
  - bug-fix: for average and standard deviation for stream-references
    (lsd requires lav !)
- mz_echam: new switch/namelist for nudging
  (implementation similar to column-switch)
  - new namelist nudge.nml
  - changed echam.nml
- new submodel DRADON
- for consistency, mo_mz_14co*.f90 renamed to mo_mz_d14co*.f90

CHANGES by Laurens Ganzeveld:
- submodel structure rearranged: EMIS, DRYDEP, XTSURF
- improved netcdf stream output by emis
- emis_out_lforce independent of ntrac

CHANGES by Holger Tost:
- The module structure has been made similar to the mecca structure.
  Because of this the kpp generated files were renamed as well as the
  generated and used modules.
- Basic module:
  - mo_mz_scav_e5 calls mo_mz_scav and mo_mz_scav_aqchem
  - mo_mz_scav_aqchem calls mo_mz_scav_liq_coeff, mo_mz_scav_cloud_kpp,
    mo_mz_scav_cloud_gdata, mo_mz_scav_cloud_sprsdata
- The mecca_scav directory is no longer neccessary as the scavenging
  kpp-files are now generated with the xkpp script in an additional run
  to the mecca-files.
- The scavenging routines run but do not yet produce reasonable results
  for all species !!!!!

CHANGES by Astrid Kerkweg:
- changes in mecca/ directory (see mecca/CHANGELOG)
- aerosol emission in pxtems (mo_mz_mecca_mbl_e5.f90)
- mo_aero_mem.f90: diag stream: lrerun and lpost equal false

******************************************************************************

echam5.1.07_mz08e (9 Jul 03)

CHANGES by Joachim Buchholz:
- mo_mz_psc.f90: minor changes
- mo_mz_psc_e5.f90: second order heterogeneous reaction rates khet1,
  khet2, ..., khet30 are now limited to range 0.0 <= khet?? <= 1.0E-5; some
  more minor changes
- mz_psc_cloud.f90: updated according to changes in cloud.f90; variable
  declarations and implicit none statement added

CHANGES by Christoph Bruehl:
- mo_mz_photo.f90, mo_mz_photo_e5.f90: reading HALOE data works for
  NCPUS>1, but correctly only for T42.
- photo.nml: iodine switch
- mecca_t_ma.nml: entries for middle atmosphere

CHANGES by Patrick Joeckel:
- mo_exception.f90 (SUBROUTINE finish):
  - file 'END' written when ECHAM5 is terminated
  - IF (p_parallel_io) not used because any processor can CALL FINISH
- mo_netcdfstream.f90: bug-fix for 3D/4D stream elements with 1 level
- mo_memory_base.f90:
  - bug-fix: average and standard deviation now also works for stream-references
  - added optional error-status for add_stream_reference
- master.f90: corrections for proper termination of ECHAM5
  (lstop, lbreak, labort)
- mz_echam:
  - Blade-Center (Linux-Cluster) rerun-facility working using bc-c1
    as qsub-host
  - IBM Load Leveler (AIX) added
  - separate SWITCHES and NAMELIST-FILES
  - -h option for online-help
- new compile script 'nec_gmake' for all NEC-SX6 cross-compiler hosts

******************************************************************************

echam5.1.07_mz08d (8 Jul 03)

- Some files renamed to show that they belong to the submodel MECCA. Now
  the modules contained in these files have the same names as the files
  mo_mz_kpp.f90          -> mo_mz_mecca_kpp.f90
  mo_mz_kpp_gdata.f90    -> mo_mz_mecca_gdata.f90
  mo_mz_kpp_sprsdata.f90 -> mo_mz_mecca_sprsdata.f90

- since add_stream_reference cannot be used for stream elements with
  laccu=T, attempting this now produces a CALL FINISH. tsurf and wind10
  are now defined correctly in physc stream. The stream elements aprc,
  aprl, and evap are not defined anymore.

- several changes in kpp files, e.g. substeps are now defined separately
  for each integrator in integr/*.k. For details, see versions 7 and 8
  in mecca/CHANGELOG

- vdiff.f90: discard negative tracer values with
  zdxtdt = MAX(-pxtm1(jl,jk,jt)/time_step_len-pxtte(jl,jk,jt), zdxtdt)

- mo_memory_base.f90: call finish if trying add_stream_reference for
  element with laccu = T

- src/xt_vdrydep_presc.f90 deleted because it was not used

- physc.f90: CALL xt_burden switched off

******************************************************************************

echam5.1.07_mz08c (2 Jul 03)

- several changes by Astrid Kerkweg for mecca_mbl subsubmodel:

  - src/xt_sedimentation.f90: calculation of sedimentation for aerosol comp. added

  - src/xt_chemistry.f90 : calculation of wetdeposition for aerosol comp. added

  - mo_mz_xtsurf_e5.f90 : calculation of deposition velocities for aerosol
			  components  added

  - mo_mz_xt_emis.f90: Division by g for emission calculation with geopoti

  - mo_mz_meca_mbl_e5.f90: Division by g added 1.d6 => 1.d-6
			   for emission calculation

  - KPP_ /= 0  for every hrate-calculation ?
	  modules/mo_mz_mecca_mbl.f90

  - changes according to forcheck errors, warnings, informations in
	  nearly all modules/mo_mz_mecca*.f90  files
	  modules/mo_control.f90:  SAVE added for maxrow

  - changes from AEROSOLMASS (for mecca_mbl tracer) to AEROSOLVMR:
	  mecca/tracdef.tex
	  modules/mo_tracer.f90
	  modules/mo_mz_mecca_e5.f90
	  modules/mo_mz_xtsurf_e5.f90

  - changes from a3/a4 =>  as/cs   and tracerflag mode AS=13, CS=14:
	  mecca/mecca.spc
	  mecca/xkpp
	  mecca/aerosol.eqn
	  mecca/tracdef.tex
	  modules/mo_tracer.f90
	  modules/mo_mz_mecca_mbl_kpp_mem.f90
	  modules/mo_mz_mecca_mbl.f90
	  modules/mo_mz_mecca_mbl_mem.f90
	  modules/mo_mz_mecca_e5.f90

  - gas.eqn: change k_H2 into a function

  - mo_mz_mecca*.f90: change calculation of cmass and massc
		      change k_H2 into a function
		      insert emission calculations (rewrite existing dummies)

  - xt_chemistry.f90:  exclude the wetdeposition if tracers modulename
		       not equal m7

  - xt_aero_prop.f90:   if tracers modulename not equal m7 do not recalculate
			mixing ratios

  - cuflx.f90 : exclude the whole wetdeposition block if tracers modulename
		not equal m7

- new submodel USE_SCAV from Holger Tost:

  - new files: mo_mz_scav.f90, mo_mz_scav_e5.f90,
    mo_mz_scav_aqchem_kpp.f90, mo_mz_scav_liq_coeff.f90,
    mo_mz_cloud_kpp.f90, mo_mz_cloud_kpp_gdata.f90,
    mo_mz_cloud_kpp_sprsdata.f90

  - currently needs mecca idt_*

  - The kpp files are made automtically by kpp using the script
    xkpp_cloud in the mecca_cloud directory (by now tested only with
    ros3)

  - call_submodels.f90, mo_mz_submodels_switch.f90, mz_echam: USE_SCAV
    added

  - mo_mz_physc_interface.f90: the stream_element tm1_3d und tte_3d must
    be given the lrerun=.true. for runs with rerun values because these
    values are needed in convective scavenging before their actual
    calculation.

  - cloud.f90: several elements of the phy_scav stream filled in this
    routine

  - cuflx.f90: the convective scavenging is called in this routine added
    some parameters needed for the scavenging routine coming from
    cumastr

  - cumastr.f90: call cuflx changed with the now neede elements of cuflx

- ncregrid: minor bug fixes, see CHANGELOG of ncregrid

- mo_grib.f90: bug-fixes for average + standard deviation

- configure.in and configure: message to set NCPUS=0 in run/mz_echam if
  configured with --disable-mpi

- mz_echam:

  - SYSTEM=Darwin (on MAC) included

  - NCPUS=0 -> run ECHAM5 without mpirun (configured with --disable-mpi)

  - new feature: set horizontal-resolution dependent input paths for
    using pre-regridded data (Swen)

- special workaround for the NEC-SX6: The tcsh-scripts
  (nec_compile.suncross and nec_compile.mainz) are required for compilation
  of ECHAM5 for the NEC-SX6 on suncross.dkrz.de and on our Linux-PCs,
  respectively. The scripts
  - combine the usage of two compiler releases (rev267 and rev270)
    (both available also on linux-/soft !!!)
  Usage: ./configure --host=sx6
	 gmake make
	 ./nec_compile.<machine>

******************************************************************************

echam5.1.07_mz08b (24 Jun 03)

- mh-linux: different MPI for hydra

- mh-*: MPIROOT cannot be used as $(MPIROOT) here

- mz_echam: adapted for NEC-SX6

- gmake zip produces a file in the echam base directory again. However,
  it now complains if there is one already and it does not archive zip
  and tar files. This way consecutive calls of "gmake zip" do not
  accumulate previously created zip files.

- new option "gmake etags" creates TAGS file for emacs

- mo_mz_mecca_e5.f90: zq added again

- call new_tracer only for those species that are in kpp mechanism (see
  mecca/CHANGELOG)

- mo_mz_physc_interface.f90, mo_gaussgrid.f90: SAVE attributes added

- cuflx.f90: USE_AEROSOL switch added

- mo_mz_emis_e5.f90: preliminary bug fixes

******************************************************************************

echam5.1.07_mz08 (12 Jun 03)

- mo_memory_base: subroutines get_stream and get_stream_element now return
  ierr=1 if stream does not exist (like get_tracer)

- psc module updated

- mo_mz_xtsurf_e5.f90: dry deposition velocities for mecca_mbl species
  included in xtsurf_vdaer

- gas.eqn, aerosol.eqn: fhet* unified to fhet; TABs deleted; 1e0 changed
  to 1d0 etc.

- xkpp: modstr_mecca and modver_mecca deleted (moved to mo_mz_mecca.f90)

- mo_aero_mem.f90: awc_m* deleted

- mo_control.f90, mo_geoloc.f90, mo_memory_g1a.f90, mo_memory_gl.f90,
  mo_mpi.f90, mo_tmp_buffer.f90: SAVE attributes added

- mo_aero_nucl.f90, mo_chem_forcing.f90, mo_midatm.f90,
  mo_mz_psc_e5.f90, mo_scan_buffer.f90, mo_semi_lagrangian.f90,
  mo_time_base.f90, mo_tmp_buffer.f90, m7_averageproperties.f90,
  m7_coaset.f90, m7_delcoa.f90, m7_equiz.f90: all TABs deleted

******************************************************************************

echam5.1.07_mz07d (10 Jun 03)

- updated emission and deposition routines: (sea-salt emissions not
  killed anymore, all TABs deleted, etc.)

- mz_echam: setting the new variable $INPUTDIR_MZ allows the Mainz input
  files to be in a subdirectory completely independent of echam5_ini/

- xkpp uses new kpp version v1.1-f90-devel

- gmake zip now produces a file in ".." not in the echam base directory.
  This way consecutive calls of "gmake zip" do not accumulate previously
  created zip files.

******************************************************************************

echam5.1.07_mz07c (09 Jun 03)

- radau5 added to kpp

- prerad.f90, m_solang.f90: SZA>90 is now possible

- photolysis works with nproma

******************************************************************************

echam5.1.07_mz07b (29 May 03)

- mo_mz_emis_e5.f90, mo_mz_xt_emis.f90, mo_mz_xtsurf_e5.f90: new
  filenames for USE mo_mz_mecca_mem

- mo_mz_mecca renamed to mo_mz_mecca_e5

- mbl submodel:

  - mo_mz_mbl_e5.f90, mo_mz_mbl.f90: restructured

  - new files: mo_mz_mbl_kpp_mem.f90, mo_mz_mbl_mem.f90

- xecham: only contents of data/ is moved to $TRASH, not the directory
  itself. It should now also work if data/ is a link.

******************************************************************************

echam5.1.07_mz07 (26 May 03)

- psc submodel adapted to nproma

- some kpp/mecca changes (see mecca/CHANGELOG)

- hrate and DUMMY_EMISSION moved from mo_mz_mbl.f90 to mo_mz_mbl_e5.f90

- several subroutines moved from mo_mz_kpp_interface to mo_mz_mbl_e5.f90

******************************************************************************

echam5.1.07_mz06e (22 May 03)

- new submodel MBL:

  - added to mo_mz_submodels_switch.f90, call_submodels.f90:

  - new files: mo_mz_mbl.f90, mo_mz_mbl_e5.f90,
    mo_mz_mbl_kpp_interface.f90, mbl.nml

  - mo_mz_mecca.f90:
    - gas-phase halogen tracers added
    - modstr_mecca and modver_mecca moved to mo_mz_kpp
    - submodel USE_MBL added

- new mecca version 05 (see mecca/CHANGELOG)

- changes in aerosol and xtsurf models to ensure they work with MBL submodel:

  - mo_aero_mem.f90: stream elements awc_M3 and awc_M4 added

  - mo_aero_trac.f90, mo_chem_forcing.f90, cuflx.f90, m7_interface.f90,
    xt_chemistry.f90: all tracers (idt_*) renamed to idt_*_m7

  - m7.f90: pww added for mbl

  - mo_mz_xtsurf_e5.f90:
    - idt_SO4 renamed to idt_H2SO4
    - CALL new_tracer deleted

- run/nml/emis.nml: emis_bio_NO = .false. until it works with nproma

- CALL update_physc moved from driver to mo_mz_mecca

- physc.f90, vdiff.f90: Additions from Philip only active IF USE_AEROSOL

- xecham:

  - environment variable TRASH introduced (moving insteat of deleting
    old data/* files)

  - operating system dependent options for qsub

  - optional disable-MPI for configure

******************************************************************************

echam5.1.07_mz06d (19 May 03)

- run/mz_echam: goedel and bromine added

- xkpp handles markers A3 and A4

- the mecca/ subdirectory was moved into the echam base directory. This
  makes synchronization of echam and mecca versions much easier.

- mo_mz_emis.f90, mo_mz_emis_e5.f90, mo_mz_xt_drydep.f90,
  mo_mz_xt_emis.f90, mo_mz_xtsurf.f90, mo_mz_xtsurf_e5.f90: submodels
  EMIS and XTSURF adapted to nproma

- submodels EMIS and XTSURF are now independent of MECCA

- some changes to allow setting USE_AEROSOL=.false.:
  - src/cloud.f90: CALL xt_chemistry only IF USE_AEROSOL=.true.
  - src/cudtdq.f90: calculation of zprecip only if USE_AEROSOL=.true.
  - src/physc.f90: CALL m7_interface, CALL xt_aero_prop, and CALL
      xt_sedimentation only if USE_AEROSOL=.true.
  - src/surf.f90: calculation of smelt only if USE_AEROSOL=.true.
  - src/vdiff.f90: calculation of velo10m only if USE_AEROSOL=.true.

******************************************************************************

echam5.1.07_mz06c (13 May 03)

- run/mz_echam: completely rewritten

- xecham:
  - adapted to new mz_echam
  - cleanup of data/ directory before model start

- mecca subdirectory moved into echam directory

- no check if (USE_MECCA=.false. and USE_XTSURF=.true.) because this
  should be possible in the future

- no check if (USE_MECCA=.false. and USE_EMIS=.true.) because this
  should be possible in the future

- Makefile.in:
  - @DEFOPT@ECHAM5 added to F90DEFS
  - gmake zip and tar exclude i.*.L

- config/mh-nec: now for compilation on NEC-SX6, cross.dkrz.de, and
  Linux-PCs (with /soft !). The two latter need ./configure --host=sx6

- configure.in: AC_SUBST(DEFOPT,$DEFOPT) added

- call_submodels.f90, mo_mz_mecca.f90: dummy subroutine mecca_read deleted

- netcdf90/netcdf_overloads.f90, netcdf90/typeSizes.f90,
  mo_mz_regrid_base.f90: compiler directives for NEC-SX6

- netcdf90/Makefile: $(DNECSX) deleted because it is obsolete

- modules/mo_mz_regrid_base.f90: #ifdef ECHAM5

- mo_mz_regrid_tools_e5.f90: 3D fields and 2d-ps are distributed with
  scatter_gp, if 3D regridding, or horizontal regridding has been
  performed, respectively ; via p_bcast else...

- submodel d14co adapted to nproma

- util/createMakefiles.pl.in: special -Cvsafe option for
  mo_mz_regrid_nc.f90 on SX

******************************************************************************

echam5.1.07_mz06b (6 May 03)

- aeroctl.inc: CR added at end of file

- Makefile.in: "test -e" changed to "test -r"

- mo_mz_regrid_tools_e5.f90, mo_mz_mecca.f90, mo_mz_14co_e5.f90: adapted
  to nproma

- data from mo_memory_g2a and mo_memory_g3b (e.g., albedo, aclc, slf)
  can now be accessed via USE mo_mz_physc_interface

- mo_mz_xtsurf_e5.f90: no gdims and ldims for standard-shape streams

- mo_mz_photo_e5.f90: CALL photolysis switched off because it doesn't
  work with nproma

- run/mz_echam: USE_D14CO=.false., USE_EMIS=.false. and
  USE_XTSURF=.false. because they don't work with nproma

- physc.f90, radiation.f90, vdiff.f90: stream elements for
  mo_mz_physc_interface adapted to nproma

- xecham: configure with option --disable-MPI

******************************************************************************

echam5.1.07_mz06 (30 Apr 03)

- run/mz_echam:

  - currently using mini initialization for chemistry (mecca_t_min.nml)
    to make model start faster

  - NPROMA=0 (other values don't work yet)

- mo_mz_mecca.f90: new subroutine check_range tests, if tracer mixing
  ratios are 0 < mr < 1

- submodel d14co changed to nproma

- $NPROMA added to echam.nml

- util/createMakefiles.pl.in and Makefile.in: special treatment for
  mo_grib.f90 because of compiler bug on alpha machines

- mo_aero_trac.f90, src/xt_chemistry.f90 and run/nml/aerosol.nml:
  chemistry tracers OH, H2O2, O3, and NO2 renamed to OH_m7, H2O2_m7,
  O3_m7, and NO2_m7 to avoid conflict with mecca tracers

- mo_mz_physc_interface.f90: add_stream_reference activated

******************************************************************************

echam5.1.07_mz05f (28 Apr 03)

- modstr  = 'aerosol' and modver  = '0.18' moved to modules/mo_aero.f90
  to avoid cyclic redundancy in Makefile

- mo_physc_interface renamed to mo_mz_physc_interface

- gmake check starts forcheck

- basic statistics (average and standard deviation) for tracer and
  stream netcdf output re-introduced

- d14CO submodel added and renamed to d14co

******************************************************************************

echam5.1.07_mz05e (28 Apr 03)

- kpp chemistry currently switched off!!!

- several changes to make xtsurf and aerosol submodels compatible

- mo_mz_submodels_switch.f90: WRITE(*,*) changed to WRITE(nout,*)

- all the Mainz modification re-introduced from version
  echam5.1.04_mz05. The following files were changed:

  modules/mo_constants.f90
  modules/mo_doctor.f90
  modules/mo_geoloc.f90
  modules/mo_memory_streams.f90
  modules/mo_netcdfstream.f90
  modules/mo_parameters.f90
  modules/mo_physc_interface.f90
  modules/mo_tracer.f90
  src/cuadjtq.f90
  src/cumastr.f90
  src/daystat.f90
  src/inidoc.f90
  src/physc.f90
  src/radiation.f90
  src/setdyn.f90
  src/vdiff.f90

- All the submodels from Mainz were re-introduced. The following files
  were added and/or changed:

  modules/mo_mz_*.f90       (14CO not yet!!!!!!!!!!!)
  src/call_submodels.f90
  include/substeps.f90
  src/mz_psc_cloud.f90

- Some features from the preliminary run/mz_echam_new were introduced in
  run/mz_echam.

******************************************************************************

echam5.1.07_mz05d (26 Apr 03)

- src/call_submodels.f90: CALL radionucl_sink, CALL request_tracer_nml
  and CALL set_tracer_nml re-inserted

- mo_aerosol_e5.f90:
  - CALL radionucl_sink, CALL request_tracer_nml and CALL set_tracer_nml
    deleted
  - xt_read_emiss_fields is now a local sub-subroutine

- mo_chem_forcing.f90: subroutines xt_read_chem_fields and
  xt_read_emiss_fields completely deleted here

- mo_mz_submodels_switch.f90: CALL put_submodel_nc_att activated

- mz_echam is a generalization of the previous mz_m7

- run/nml/echam.nml is now in a separate file, not in mz_echam anymore

- src/vdiff.f90: velo10m(jl,jrow)=... activated

******************************************************************************

echam5.1.07_mz05c (24 Apr 03)

- modules/mo_tracer.f90: leapfrog bug fix for xtm1
  IF (PRESENT(xtm1)) xtm1(:,:,jt,:) = (1. - eps) * xt(:,:,jt,:)

- run/mz_m7: since 5.1.07, use TSLCLIM2.nc instead of TSLCLIM.nc for all
  resolutions

- src/ltd.f90 updated from recent clearcase version to fix bug in 1D
  mode (P. Stier, pers. comm.): IF ( nlnm0 > 0 ) THEN ... END IF

- model start moved from 18:00 to midnight: DT_START = 1978,01,01,0,0,0

- Several changes by Patrick Joeckel:

  - configure.in: F90R8, F90FLAGS, LDFLAGS, final message modified ;
		  simplified ;
		  SRCDIRS, LIB(S), and INCLUDES automatically generated
		  (i.e. not longer needed in config/mh-*) ;

  - config/
    - mh-linux:   simplified
    - mh-alpha:   new
    - other mh-*: not yet available
    - config.guess, config.sub, install-sh from automake version 1.7

  - configure: generated from configure.in with GNU Autoconf 2.57:
    - default: --enable-MPI (where possible)
    - no MPI : --disable-MPI or --enable-MPI=no

  - Makefile.in: F90R8, F90NOR8, ARFLAGS, NMFLAGS, ... (simplified)

  - util/createMakefiles.pl.in: add special rules (F90NOR8)

  - modules/mo_mz_submodels_switch.f90:
    - new switch USE_MZ_M7
    - all other submodels commented out

  - run/mz_echam_new  + modules/mo_start_dataset.f90:
      namelist.echam -> echam.nml

  - run/mz_echam_new: echam.nml also copied from run/nml - subdirectory

  - src/call_submodels.f90: all submodels commented out, except for mz_m7

  - changed call statements in:
	  src/initialize.f90
	  modules/mo_memory_streams.f90
	  modules/mo_tracer.f90
	  src/stepon.f90

  - new modules/file mo_mz_m7_e5.f90 (almost consistent with submodel structure)

  - regridder:
    - NCREGRID v1.1b-dev and modified
    - used in modules/file mo_mz_m7_e5.f90
    - commented out routines, using the old regridder in
      modules/mo_chem_forcing.f90

  - dry deposition is temporarily switched off until it is
    re-implemented by Laurens:
    - src/vdiff.f90:
      - CALL xt_drydep in line 987 commented out
      - calculation of velo10m in line 2084 commented out
    - src/xt_drydep.f90               --> src/xt_drydep.f90.bak
    - modules/mo_mz_xtsurf_init.f90   --> modules/mo_mz_xtsurf_init.f90.bak
    - modules/mo_mz_xtsurf_drydep.f90 --> modules/mo_mz_xtsurf_drydep.f90.bak

******************************************************************************

echam5.1.07_mz05b (22 Apr 03)

- starting from Philip's ori/echam5107_m7_AEROSOL_M7_E5107_0.18.tar.gz
  and re-introducing all Mainz additions again.

- cp xecham CHANGELOG README_MZ from echam5.1.04_mz05

- chmod -R u+w *

- mh-alpha, mh-linux: NETCDFROOT =  /soft/netcdf/v3.5.1b

- mh-linux:

  - "-llapackmt -lblasmt" changed to "-llapack -lblas" (the optimized
    *mt libraries are not included in our Linux express version)

  - F90FLAGS changed

- new or improved gmake options in Makefile.in: zip, zipall, help, tar,
  tarall, make, purge, clean, distclean

- configure: alpha-*-* changed to alpha*-* because $host = alphaev56-dec-osf5.1

- src/master.f90: duplicate line "USE mo_exception, ONLY: finish,
  message" removed

- src/setdyn.f90: dummy default values defined for enspodi, nlvspd1,
  nlvspd2

******************************************************************************

echam5.1.04_mz05 (2 Apr 03)

- photolysis code updated. It should now also work properly in 1D SCM

- psc code updated:

  - deleted: mo_mz_psc_check.f90 mo_mz_psc_init.f90 mo_mz_psc_interface.f90

  - new: mo_mz_psc_e5.f90

- modules/mo_mz_mecca.f90: some molar masses ("moleweight") added to
  new_tracer

- mz_1d integrated into mz_echam

******************************************************************************

echam5.1.04_mz04d (18 Mar 03)

- new: run/mz_echam_new can handle parallel runs (currently under
  construction)

- config/mh-* updated for MPI

- mo_exception.f90, master.f90: last parameter deleted in SUBROUTINE
  finish (name, text)

- mo_mpi.f90: CALL MPI_ABORT (MPI_COMM_WORLD, 1, p_error) -> exit status 1

- bug in mo_io.f90 fixed (rerun)

- update of 14CO modules

- mo_mz_photo*.f90:
  - V2_H deleted (was defined but not used)
  - replaced STOP statements by 'CALL finish'

- regridder updated to v1.1b

- mecca now uses troposheric initial values from t63nmhc8_8.nc (the
  previous t21nmhc8_12.nc is obsolete)

- mo_mz_emis_e5.f90: bug fixes in strings

- mo_mz_submodels_switch.f90: bug fixes

- mz_1d currently under construction

******************************************************************************

echam5.1.04_mz04c (17 Feb 03)

- input data files via namelist in mo_mz_photolysis_e5.f90
     - new CTRL-namelist in run/nml/photo.nml
     - 3 links to datafiles removed from run/mz_echam
     - modstr moved from mo_mz_photo_e5.f90 to mo_mz_photo.f90
     - modver in mo_mz_photo.f90
     - modver_photo and modstr_photo activated in mo_mz_submodels_switch.f90

- *.jnl files excluded from 'gmake zip' and 'gmake tar' (Makefile.in)

- update of 14CO modules

******************************************************************************

echam5.1.04_mz04b (13 Feb 03)

- photolysis code:

  - files renamed from mo_mz_photolysis* to mo_mz_photo*. This prevents
    confusing it with the old code (and the old lookthal.dat).

  - 1D runs now (maybe) possible. Question about ngl still unresolved.

  - night-time photolysis for halogen species deleted

  - only 2 values for C4_INO3 in lookthal (used to be 3)

  - lookthal.dat changed and renamed to lookthal_v2.dat. There is no
    backward compatibility!

  - new species: PAH and CH3COCHO

  - IMPLICIT NONE

  - tf changed to the correct and consistent temp_3d = tm1 + delta t * tte

  - fj_corr added to several species

******************************************************************************

echam5.1.04_mz04 (7 Feb 03)

- restructuring of emission and deposition submodels from Laurens

- updated version of psc submodel included

- the run script mz_mecca was restructured, made more user-friendly, and
  renamed to mz_echam.

- xecham uses grid engine instead of codine.

- modules/mo_tracer.f90: tracer number added to logfile

- submodel name (modstr) and version (modver) added to netcdf output

- new names in call_submodels.f90 for consistency:
  call_read_forcing   -> call_read
  call_init_tracers   -> call_init_tracer
  call_init_submodels -> call_init

- photolysis_init split into photo_init and photo_init_tracer

******************************************************************************

echam5.1.04_mz03b (31 Jan 03)

- emission and deposition submodels from Laurens Ganzeveld included

  - new files: modules/mo_mz_emis.f90 modules/mo_mz_emis_e5.f90
    modules/mo_mz_xt_drydep.f90 modules/mo_mz_xt_emis.f90
    modules/mo_mz_xtsurf.f90 modules/mo_mz_xtsurf_e5.f90

  - modules/mo_mz_mecca.f90: additional properties for some tracers in
    new_tracer, e.g.: moleweight=63., ndrydep=2, henry=1.e4, dryreac=1.

  - modules/mo_mz_submodels_switch.f90: USE_XTSURF and USE_EMIS added

  - modules/mo_physc_interface.f90: many streams added

  - src/call_submodels.f90: several new SUBROUTINE calls

  - src/physc.f90:

    - Some values are collected for mo_physc_interface.

    - geopoti_3d is height below current level. It is calculated using
      the dummy array zalpha_hp which only contains zeros.

  - src/vdiff.f90:

    - Some values are collected for mo_physc_interface.

    - new parameter zxtems in CALL call_chem_bcond

- namelist files for run scripts (mz_*) are now in the subdirectory
  run/nml

- regridder update (some bug fixes, RGTEVENT_STATUS
  (mo_mz_regrid_tools_e5.f90) with optional LOGICAL parameter lstop:
  stops on error)

- mo_mz_psc_kpp_interface: default value for khet_tot = 0. needed if
  USE_PSC=.false.

- Initialization of N2O from 2d_Dez2000.nc

******************************************************************************

echam5.1.04_mz03 (23 Dec 02)

- kpp and mecca changes:

  - new module mo_mz_kpp_interface provides kpp with access to variables
    and functions that describe rate constants (not vectorized yet).

  - Variables ilon, ilat, and ilev were moved from mo_geoloc to
    mo_mz_kpp_interface. (also changed in mo_mz_psc_init)

  - extended checks for existence of kpp variables: IF
    (idt_XXX*KPP_XXX/=0)

  - kpp variables VAR(I_*) replaced by C(KPP_*)

- always call xtdriver, not only if tracers exist

- parameters (klon,klev) re-inserted into CALL photolysis_chem which
  erroneously contained nlon and nlev

- psc module:

  - structure adapted to mo_mz_psc_kpp_interface

  - decoupling of the tracer initialization from MECCA

  - tf etc. changed to tm1, tte...

  - aerosol initialization via H2O, temperature, and surface climatology

- basic statistics (average and standard deviation) for tracer and
  stream netcdf output:

  - optional logical parameters lav (average) and lsd (standard
    deviation) for SUBROUTINEs new_tracer, default_stream_setting,
    set_stream_element_info, and add_stream_element

  - creation of additional stream <name>_sd for field <name> in case of
    lsd=.true.

  - This only works for netCDF output, not GRIB.

  - The information is saved in the rerun files.

  - changed files: mo_linked_list.f90, mo_memory_base.f90, mo_grib.f90,
    mo_netcdfstream.f90, mo_tracdef.f90, mo_tracer.f90,
    mo_memory_gl.f90, and mo_io.f90

- mo_mz_14CO_e5.f90: output of average and std.dev for all diagnostic
  fields and tracers

- xecham: the script continues as long as status = 0 and no user
  interaction is required.

- mo_netcdfstream.f90: time_step_len added to netcdf output. This is
  necessary for plot programs to calculate current temperature: temp =
  tm1 + time_step_len * tte.

******************************************************************************

echam5.1.04_mz02k (13 Dec 02)

- TRIGRAD deleted in run scripts (now default = 2h is used)

- d14CO: get_stream -> USE pointer transition

- regridder:

  - improved time step control

  - bug fixes in mo_mz_regrid_tools.f90 and mo_mz_regrid_tools_e5.f90

- mo_mz_submodels_switch.f90: new entry 'CHECK' in submodels.nml
  (default: .true.); if set to false echam5 does NOT terminate on
  unfulfilled submodel-interdependencies

******************************************************************************

echam5.1.04_mz02j (27 Nov 02)

- mo_mz_submodels_switch.f90: dependency between USE_PSC and USE_PHOTO deleted

- physc.f90 and mo_physc_interface.f90: qm1_3d, qte_3d, tm1_3d, tte_3d,
  xim1_3d, xite_3d, xlm1_3d, and xlte_3d added

- tm1, tte, paphp1, and papp1 deleted from parameter list of call_chem
  in call_submodels.f90 and xtdriver in mo_tracer.f90

******************************************************************************

echam5.1.04_mz02i (25 Nov 02)

- psc module restructured:

  - mo_mz_psc_mecca.f90 from smeili integrated into mo_mz_mecca.f90

  - rest of psc module in separate files (mo_mz_psc*.f90)

******************************************************************************

echam5.1.04_mz02h (22 Nov 02)

- mo_mz_14CO*.f90: update 3.0b

- mo_mz_regrid_*.f90 updated

- mo_mz_photolysis.f90:

  - split into 2 files: mo_mz_photolysis.f90 and mo_mz_photolysis_e5.f90

  - works in parallel environment

  - switch for online/offline O3 via namelist photolysis.nml

- call_submodels.f90: names adjusted to submodel conventions (e.g. d14co_chem)

- physc.f90: CALL xtdriver moved to end of latitude loop

- mo_physc_interface.f90: default_stream_setting for physc is lrerun=.FALSE.

******************************************************************************

echam5.1.04_mz02g (18 Nov 02)

- new option r = 'run' in xecham script

- mo_mz_submodels_switch.f90: consistency check of submodel interdependencies

- mo_mz_regrid_tools_e5.f90 updated

- USE_PHOTO can be set to .TRUE. even if USE_MECCA is .FALSE.

- updated mo_mz_photolysis.f90:

  - bug fixes from Christoph and Benedikt

  - should now work for resolutions other than T42

  - input suitable for parallel processing

  - photolysis of halogen species added (lookthal.dat instead of lookt.dat)

******************************************************************************

echam5.1.04_mz02f (14 Nov 02)

- a lot of bug-fixes in mo_mz_regrid*.f90

- new xecham script

- mpi configuration on linux, osf1, and aix

******************************************************************************

echam5.1.04_mz02e (7 Nov 02)

- each submodel (e.g. mecca) should define a global identification
  string:

  CHARACTER(LEN=*), PARAMETER :: modstr = 'mecca'

  This string is used to identify:

  - namelist files <modstr>.nml

  - tracer initialization namelist files <modstr>_t.nml

  - regridding trigger event restart files <modstr>.rst

- tracer initialization not in xtini in mo_tracer.f90 anymore but now in
  mo_mz_regrid_tools_e5.f90. It can be used by any submodel via:

  call_submodels.f90:        SUBROUTINE call_init_tracers
			     IF (USE_<modstr>) CALL <modstr>_init_tracer

  mo_mz_<modstr>.f90:        SUBROUTINE <modstr>_init_tracer
			     CALL tracer_init('<modstr>')

  mo_mz_regrid_tools_e5.f90: SUBROUTINE tracer_init()
			     ...
			     ! read <modstr>_t.nml and initialize tracer field

- this file renamed from history.txt to CHANGELOG

- run/mz_* adapted to initialize tracers

- update for mo_mz_14CO*.f90 (active only if USE_D14CO=.TRUE.)

- util/createMakefiles.pl.in: compile mo_mz_regrid_tools_e5.f90 w/o
  optimization on DEC-alpha and IBM RS6000

******************************************************************************

echam5.1.04_mz02d (6 Nov 02)

- new config/mh-aix

- updated mo_mz_14CO*.f90 (active only if USE_D14CO=.TRUE.)

- new ncregrid included:

  - see /soft/ncregrid/v0.9a1.10/CHANGELOG

  - updated mo_tracer.f90

  - new: mo_mz_regrid_tools*.f90 (connection between 'event-handler'
    and 'regridder'  --> RGTEVENTS (Regridding Trigger Events) (example
    in run/mz_pj* and mo_mz_14CO*.f90)

- new Makefile.in from Patrick. For more info, run "configure", then type
  "gmake help"

******************************************************************************

echam5.1.04_mz02c (21 Oct 02)

- psc module from smeili included but not activated

- xecham (previously called xmecca) now asks which run script should be used

- mo_physc_interface uses xi, xl, and q instead of xif, xlf, and qf

******************************************************************************

echam5.1.04_mz02b (16 Oct 02)

- new ncregrid included: see /soft/ncregrid/v0.9a1.09/CHANGELOG

- compilation of blas, lapack, and netcdf90 not needed anymore because
  the libraries are at /soft/ECHAM5/lib/* and /soft/netcdf/v3.5.1b/*

- changed files: configure, Makefile.in, config/mh-*,
  util/createMakefiles.pl.in

- the run scripts mz_1d and mz_mecca can now also be used on linux pc's
  without any changes

******************************************************************************

echam5.1.04_mz02 (15 Sep 02)

- new ncregrid included: version 0.9a1.08 + patch in TIME CONTROL
  CORRECTIONS, SUBROUTINE READ_NAMELIST, mo_mz_regrid_control.f90

- new submodel interface with mo_mz_submodels_switch.f90 added

- initialize.f90:

  - CALL initrac moved to end

  - new: CALL call_init_submodels

******************************************************************************

echam5.1.04_mz01c (13 Sep 02)

- modules/mo_memory_g3b.f90: longname corrected for stream_element az0i

- modules/mo_mz_photolysis.f90:

  - albedo used instead of albedo_2d (local variable renamed to zalbedo)

  - aclc used instead of frac_3d

- modules/mo_physc_interface.f90: many new entries

- src/physc.f90: several variables saved in physc stream

- src/radiation.f90: palbedo and pclc not used for physc stream anymore

- src/vdiff.f90: several variables saved in physc stream

******************************************************************************

echam5.1.04_mz01b (3 Sep 02)

- modules/mo_geoloc.f90: bugfix according to email from Philip (24 Jul 02)

- modules/mo_mz_mecca.f90: suggestion added how to affect qf(ilon,ilev,ilat)

******************************************************************************

echam5.1.04_mz01 (23 Jun 02)

- first working version with complete kpp gas-phase chemistry

******************************************************************************
**                           end of CHANGELOG                               **
******************************************************************************
